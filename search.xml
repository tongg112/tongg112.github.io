<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>NHK《简明日语》第10课 全員（ぜんいん）いますか。</title>
      <link href="/2025/08/27/NHK%E3%80%8A%E7%AE%80%E6%98%8E%E6%97%A5%E8%AF%AD%E3%80%8B%E7%AC%AC10%E8%AF%BE/"/>
      <url>/2025/08/27/NHK%E3%80%8A%E7%AE%80%E6%98%8E%E6%97%A5%E8%AF%AD%E3%80%8B%E7%AC%AC10%E8%AF%BE/</url>
      
        <content type="html"><![CDATA[<h1 id="NHK《简明日语》第10课"><a href="#NHK《简明日语》第10课" class="headerlink" title="NHK《简明日语》第10课"></a>NHK《简明日语》第10课</h1><h2 id="课程简介"><a href="#课程简介" class="headerlink" title="课程简介"></a>课程简介</h2><p>今天，学校里有体检，学生们都来到了会场。</p><h2 id="教材详情"><a href="#教材详情" class="headerlink" title="教材详情"></a>教材详情</h2><h3 id="全員（ぜんいん）いますか。"><a href="#全員（ぜんいん）いますか。" class="headerlink" title="全員（ぜんいん）いますか。"></a><strong>全員（ぜんいん）いますか。</strong></h3><ul><li>先生: はじめに身長と体重をはかります。<br>全員いますか。 &#x2F;&#x2F; 首先测量身高和体重。都到齐了吗？</li><li>ロドリゴ: アンナさんがいません。 &#x2F;&#x2F; 安娜还没来。</li><li>アンナ: すみません。遅れました。 &#x2F;&#x2F; 对不起，我来晚了。</li></ul><h3 id="语法要点"><a href="#语法要点" class="headerlink" title="语法要点"></a>语法要点</h3><p>「ました」：「ます」的过去形</p><blockquote><p>マス形动词的过去形，要把「ます」变成「ました」。<br>例如：食べます（吃）　&gt;&gt;　食べました（吃了）</p></blockquote><blockquote><p>「います」和「あります」<br>在第7课里，安娜看到有很多蛋糕，就很吃惊地说「ケーキがいっぱいあります」（有好多蛋糕啊）。像这样，如果主语是无生命的物体，就要用「あります」。不仅要看这个物体是否活着，还要根据它是否能够根据自己的意志来移动进行区分。</p></blockquote><blockquote><p>植物虽然是活着的，但因为不能移动，所以用「あります」。超市里卖的鱼不能动，所以用「あります」，鱼缸里的鱼来回游动，所以用「います」。</p></blockquote><blockquote><p>另外，公交车和私家车虽然不能按照自己的意志行驶，但有司机在的时候，用「います」。</p></blockquote><blockquote><p>总的说来就是，表示人或动物存在的动词是「います」（在、有）。否定形是「いません」（不在、没有）。<br>没有生命的物体的存在用「あります」（在、有）。否定形是「ありません」（不在、没有）。</p></blockquote><h3 id="单词"><a href="#单词" class="headerlink" title="单词"></a>单词</h3><table><thead><tr><th>はじめに</th></tr></thead><tbody><tr><td><strong>首先</strong></td></tr></tbody></table><table><thead><tr><th>身長</th></tr></thead><tbody><tr><td><strong>身高</strong></td></tr></tbody></table><table><thead><tr><th>と</th></tr></thead><tbody><tr><td><strong>和</strong></td></tr></tbody></table><table><thead><tr><th>体重</th></tr></thead><tbody><tr><td><strong>体重</strong></td></tr></tbody></table><table><thead><tr><th>はかります</th></tr></thead><tbody><tr><td><strong>测量</strong></td></tr></tbody></table><table><thead><tr><th>全員</th></tr></thead><tbody><tr><td><strong>所有人</strong></td></tr></tbody></table><table><thead><tr><th>います</th></tr></thead><tbody><tr><td><strong>在、有</strong></td></tr><tr><td>「います」是表示人或动物存在的动词。</td></tr></tbody></table><table><thead><tr><th>遅れます</th></tr></thead><tbody><tr><td><strong>迟到</strong></td></tr></tbody></table><p>教材：<a href="https://www.nhk.or.jp/lesson/update/pdf/le10_zh_t.pdf">https://www.nhk.or.jp/lesson/update/pdf/le10_zh_t.pdf</a></p><h2 id="我的收获"><a href="#我的收获" class="headerlink" title="我的收获"></a>我的收获</h2><ul><li><strong>「ます」</strong>——<strong>「ました」</strong></li></ul><h2 id="课程地址"><a href="#课程地址" class="headerlink" title="课程地址"></a>课程地址</h2><p><a href="https://www.nhk.or.jp/lesson/chinese/learn/list/10.html">https://www.nhk.or.jp/lesson/chinese/learn/list/10.html</a></p>]]></content>
      
      
      <categories>
          
          <category> 日语之路 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 日语 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>加缪《局外人》：冷漠叙述背后的荒诞真相</title>
      <link href="/2025/08/25/%E5%8A%A0%E7%BC%AA%E3%80%8A%E5%B1%80%E5%A4%96%E4%BA%BA%E3%80%8B/"/>
      <url>/2025/08/25/%E5%8A%A0%E7%BC%AA%E3%80%8A%E5%B1%80%E5%A4%96%E4%BA%BA%E3%80%8B/</url>
      
        <content type="html"><![CDATA[<h2 id="引言"><a href="#引言" class="headerlink" title="引言"></a>引言</h2><p>如果你因为没有在葬礼上流泪而被判死刑，你会觉得荒谬吗？《局外人》的主人公默尔索，正因为这种“冷漠”，被社会彻底抛弃。他为什么不辩解？为什么选择沉默？这部小说不仅讲述一桩杀人案，更揭示了存在的荒诞：当生命失去意义，我们该如何面对？</p><hr><img src="/2025/08/25/%E5%8A%A0%E7%BC%AA%E3%80%8A%E5%B1%80%E5%A4%96%E4%BA%BA%E3%80%8B/post-juwairen.jpg" class="" title="局外人"><h2 id="第一人称，却像第三人称的冷漠"><a href="#第一人称，却像第三人称的冷漠" class="headerlink" title="第一人称，却像第三人称的冷漠"></a>第一人称，却像第三人称的冷漠</h2><p>《局外人》(《L’Étranger》)最迷人的地方在于它的叙述风格：明明是第一人称，却让人感觉像第三人称。默尔索讲述自己的故事，就像在描述一件无关紧要的事实：</p><blockquote><p>“今天，妈妈死了。也许是昨天，我不知道。”</p></blockquote><p>没有情绪渲染，没有内心独白，只有简洁、冷淡、像天气预报一样的陈述。读者甚至会怀疑：这是一个杀人犯的自述吗？还是某种冷血的记录？<br>这种写法，让“我”失去了存在感，成了旁观者。这正是“局外人”的第一层含义：<strong>他是自己人生的旁观者</strong>。</p><hr><h2 id="冷漠，不是病，而是清醒"><a href="#冷漠，不是病，而是清醒" class="headerlink" title="冷漠，不是病，而是清醒"></a>冷漠，不是病，而是清醒</h2><p>默尔索对母亲的死无动于衷，对婚姻无所谓，对朋友的请求不加拒绝。他看似冷漠，仿佛失去了人类最基本的情感反应。很多读者会怀疑：他是不是有心理疾病？<br>但加缪给出的解释更深刻：默尔索并不是病态，而是<strong>拒绝伪装</strong>。他拒绝假装悲伤，拒绝假装悔恨，因为他看透了生命的荒诞——当世界没有终极意义时，一切虚假的仪式和情绪，都是多余的。<br>这种“真实”，让社会恐惧。因为他不演戏，显得危险。</p><hr><h2 id="不辩解，比辩解更有力量"><a href="#不辩解，比辩解更有力量" class="headerlink" title="不辩解，比辩解更有力量"></a>不辩解，比辩解更有力量</h2><p>在法庭上，默尔索几乎没有辩护。他知道，审判他的不是“杀人”，而是“不合群”：他为什么不为母亲的死哭泣？为什么在葬礼后去约会？为什么在规则面前无动于衷？<br>社会不能容忍这样的冷漠，所以必须用死刑，把他钉死在“怪物”的标签上。<br>沉默，成了默尔索最后的武器。辩解毫无意义，因为在荒诞的世界里，一切理由都是空的。<strong>选择沉默，是对虚伪规则最彻底的反抗</strong>。</p><hr><h2 id="局外人：意义之外的自由"><a href="#局外人：意义之外的自由" class="headerlink" title="局外人：意义之外的自由"></a>局外人：意义之外的自由</h2><p>《局外人》不仅揭示了人与社会的冲突，更揭示了人与“意义”的冲突。当我们意识到生命没有终极意义，唯一的自由，是接受荒诞，活出真实。<br>默尔索在死亡面前保持清醒，他说：</p><blockquote><p>“世界如此美好，为什么我会害怕呢？”</p></blockquote><p>他没有虚假的希望，没有对上帝的幻想，而是在最后一刻，坦然拥抱无意义的存在。这，才是加缪笔下的自由。</p><hr><h2 id="核心金句"><a href="#核心金句" class="headerlink" title="核心金句"></a>核心金句</h2><blockquote><p><strong>“默尔索在自己的命案中，成了一个旁观者；在社会的规则里，他是局外人；在意义的荒原上，他却找到了唯一的自由。”</strong></p></blockquote><hr><h2 id="延伸思考"><a href="#延伸思考" class="headerlink" title="延伸思考"></a>延伸思考</h2><p>为什么这部小说在今天仍然震撼？因为我们依然生活在规则和意义的幻象中：努力、成功、幸福，被社会定义的标准驱动着。如果有一天，你拒绝参与这种“意义游戏”，社会会怎么看你？<br>默尔索的选择，逼迫我们面对一个尖锐的问题：<strong>在生命的荒诞面前，我们该如何活着？</strong></p><hr><h2 id="个人观点"><a href="#个人观点" class="headerlink" title="个人观点"></a>个人观点</h2><p>读完《局外人》，我最深的感受是：默尔索不是没有情感，他只是拒绝虚伪。他的冷漠，是一种勇敢。当社会强迫你去哭泣、去悔恨、去迎合，你是否还有勇气选择沉默？<br>这本书让我明白，真实的自由不是改变世界，而是直面荒诞，依然活得坦然。</p>]]></content>
      
      
      <categories>
          
          <category> 思考札记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 阅读 </tag>
            
            <tag> 哲学 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>茜さす 歌词 Aimer</title>
      <link href="/2025/08/22/%E6%AD%8C%E8%AF%8D%E8%8C%9C%E3%81%95%E3%81%99/"/>
      <url>/2025/08/22/%E6%AD%8C%E8%AF%8D%E8%8C%9C%E3%81%95%E3%81%99/</url>
      
        <content type="html"><![CDATA[<h1>茜さす 歌词</h1><p>Aimer</p><p>作词：aimerrhythm  </p><p>作曲：釣俊輔    </p><div class="lyricBody">  <div class="large">    <div class="hiragana">      <span class="ruby"><span class="rb">枯</span><span class="rt">か</span></span>れ<span class="ruby"><span class="rb">葉舞</span><span class="rt">はま</span></span>う<span class="ruby"><span class="rb">町角</span><span class="rt">まちかど</span></span>を <span class="ruby"><span class="rb">駆</span><span class="rt">か</span></span>け<span class="ruby"><span class="rb">抜</span><span class="rt">ぬ</span></span>けてく<span class="ruby"><span class="rb">乾</span><span class="rt">かわ</span></span>いた<span class="ruby"><span class="rb">風</span><span class="rt">かぜ</span></span><br><span class="ruby"><span class="rb">伸</span><span class="rt">の</span></span>びた<span class="ruby"><span class="rb">影</span><span class="rt">かげ</span></span>とイチョウ<span class="ruby"><span class="rb">並木</span><span class="rt">なみき</span></span> <span class="ruby"><span class="rb">季節</span><span class="rt">きせつ</span></span>を<span class="ruby"><span class="rb">見</span><span class="rt">み</span></span>てたかった<br><br><span class="ruby"><span class="rb">返事</span><span class="rt">へんじ</span></span>のない<span class="ruby"><span class="rb">呼</span><span class="rt">よ</span></span>ぶ<span class="ruby"><span class="rb">声</span><span class="rt">こえ</span></span>は あっという<span class="ruby"><span class="rb">間</span><span class="rt">ま</span></span> かき<span class="ruby"><span class="rb">消</span><span class="rt">け</span></span>されてしまう<br><span class="ruby"><span class="rb">目抜</span><span class="rt">めぬ</span></span>き<span class="ruby"><span class="rb">通</span><span class="rt">とお</span></span>り <span class="ruby"><span class="rb">人波抜</span><span class="rt">ひとなみぬ</span></span>けて どこか<span class="ruby"><span class="rb">遠</span><span class="rt">とお</span></span>く <span class="ruby"><span class="rb">誰</span><span class="rt">だれ</span></span>もいない<span class="ruby"><span class="rb">場所</span><span class="rt">ばしょ</span></span>へ<br><br><span class="ruby"><span class="rb">気付</span><span class="rt">きづ</span></span>いていたのに <span class="ruby"><span class="rb">何</span><span class="rt">なに</span></span>も<span class="ruby"><span class="rb">知</span><span class="rt">し</span></span>らないふり<br><span class="ruby"><span class="rb">一人</span><span class="rt">ひとり</span></span>きりでは <span class="ruby"><span class="rb">何</span><span class="rt">なに</span></span>もできなかった<br><br><span class="ruby"><span class="rb">出会</span><span class="rt">であ</span></span>えた<span class="ruby"><span class="rb">幻</span><span class="rt">まぼろし</span></span>にさよならを <span class="ruby"><span class="rb">茜</span><span class="rt">あかね</span></span>さす この<span class="ruby"><span class="rb">空</span><span class="rt">そら</span></span>に<br><span class="ruby"><span class="rb">零</span><span class="rt">こぼ</span></span>れた<span class="ruby"><span class="rb">弱</span><span class="rt">よわ</span></span>さに<span class="ruby"><span class="rb">手</span><span class="rt">て</span></span>のひらを <span class="ruby"><span class="rb">一輪</span><span class="rt">いちりん</span></span>の<span class="ruby"><span class="rb">徒花</span><span class="rt">あだばな</span></span> そんなふうに<br><span class="ruby"><span class="rb">願</span><span class="rt">ねが</span></span>い<span class="ruby"><span class="rb">叶</span><span class="rt">かな</span></span>え <span class="ruby"><span class="rb">痛</span><span class="rt">いた</span></span>みを<span class="ruby"><span class="rb">知</span><span class="rt">し</span></span>る<br><br><span class="ruby"><span class="rb">渡</span><span class="rt">わた</span></span>り<span class="ruby"><span class="rb">鳥</span><span class="rt">とり</span></span>の<span class="ruby"><span class="rb">鳴</span><span class="rt">な</span></span>く<span class="ruby"><span class="rb">声</span><span class="rt">こえ</span></span>も <span class="ruby"><span class="rb">赤</span><span class="rt">あか</span></span>く<span class="ruby"><span class="rb">染</span><span class="rt">そ</span></span>まる<span class="ruby"><span class="rb">雲</span><span class="rt">くも</span></span>に<span class="ruby"><span class="rb">消</span><span class="rt">き</span></span>えてしまう<br><span class="ruby"><span class="rb">帰</span><span class="rt">かえ</span></span>り<span class="ruby"><span class="rb">道</span><span class="rt">みち</span></span>も<span class="ruby"><span class="rb">遠</span><span class="rt">とお</span></span>く<span class="ruby"><span class="rb">離</span><span class="rt">はな</span></span>れて <span class="ruby"><span class="rb">今</span><span class="rt">いま</span></span>は<span class="ruby"><span class="rb">一人</span><span class="rt">ひとり</span></span> <span class="ruby"><span class="rb">誰</span><span class="rt">だれ</span></span>もいない<span class="ruby"><span class="rb">場所</span><span class="rt">ばしょ</span></span>で<br><br><span class="ruby"><span class="rb">気付</span><span class="rt">きづ</span></span>いた<span class="ruby"><span class="rb">景色</span><span class="rt">けしき</span></span>の<span class="ruby"><span class="rb">色</span><span class="rt">いろ</span></span>にふれたとしても<br><span class="ruby"><span class="rb">一人</span><span class="rt">ひとり</span></span>きりでは <span class="ruby"><span class="rb">声</span><span class="rt">こえ</span></span>も<span class="ruby"><span class="rb">出</span><span class="rt">だ</span></span>せなかった<br><br><span class="ruby"><span class="rb">愛</span><span class="rt">あい</span></span>した<span class="ruby"><span class="rb">幻</span><span class="rt">まぼろし</span></span>に<span class="ruby"><span class="rb">口</span><span class="rt">くち</span></span>づけを <span class="ruby"><span class="rb">黄昏</span><span class="rt">たそがれ</span></span>れた この<span class="ruby"><span class="rb">空</span><span class="rt">そら</span></span>に<br>まだ<span class="ruby"><span class="rb">夕</span><span class="rt">ゆう</span></span>べの<span class="ruby"><span class="rb">星灯</span><span class="rt">ほしとも</span></span>らない <span class="ruby"><span class="rb">待</span><span class="rt">ま</span></span>ち<span class="ruby"><span class="rb">宵</span><span class="rt">よい</span></span>も<span class="ruby"><span class="rb">朧</span><span class="rt">おぼろ</span></span>げ <span class="ruby"><span class="rb">月</span><span class="rt">つき</span></span>は<span class="ruby"><span class="rb">何処</span><span class="rt">どこ</span></span>に<br><span class="ruby"><span class="rb">引</span><span class="rt">ひ</span></span>き<span class="ruby"><span class="rb">裂</span><span class="rt">さ</span></span>かれて <span class="ruby"><span class="rb">痛</span><span class="rt">いた</span></span>みを<span class="ruby"><span class="rb">知</span><span class="rt">し</span></span>る<br><br>くり<span class="ruby"><span class="rb">返</span><span class="rt">かえ</span></span>す<span class="ruby"><span class="rb">日々</span><span class="rt">ひび</span></span>の<span class="ruby"><span class="rb">中</span><span class="rt">なか</span></span>で<span class="ruby"><span class="rb">探</span><span class="rt">さが</span></span>してたのは<br><span class="ruby"><span class="rb">歩</span><span class="rt">ある</span></span>き<span class="ruby"><span class="rb">続</span><span class="rt">つづ</span></span>けるための<span class="ruby"><span class="rb">願</span><span class="rt">ねが</span></span>い<br><br><span class="ruby"><span class="rb">出会</span><span class="rt">であ</span></span>えた<span class="ruby"><span class="rb">幻</span><span class="rt">まぼろし</span></span>にさよならを <span class="ruby"><span class="rb">憧</span><span class="rt">あこが</span></span>れは この<span class="ruby"><span class="rb">空</span><span class="rt">そら</span></span>に<br><span class="ruby"><span class="rb">流</span><span class="rt">なが</span></span>れた<span class="ruby"><span class="rb">月日</span><span class="rt">つきひ</span></span>を<span class="ruby"><span class="rb">手</span><span class="rt">て</span></span>のひらに <span class="ruby"><span class="rb">一片</span><span class="rt">ひとひら</span></span>の<span class="ruby"><span class="rb">花弁</span><span class="rt">はなびら</span></span> そんなふうに<br><span class="ruby"><span class="rb">痛</span><span class="rt">いた</span></span>み<span class="ruby"><span class="rb">重</span><span class="rt">かさ</span></span>ね <span class="ruby"><span class="rb">出会</span><span class="rt">であ</span></span>いを<span class="ruby"><span class="rb">知</span><span class="rt">し</span></span>る<br><br><span class="ruby"><span class="rb">出会</span><span class="rt">であ</span></span>い<span class="ruby"><span class="rb">重</span><span class="rt">かさ</span></span>ね <span class="ruby"><span class="rb">願</span><span class="rt">ねが</span></span>いを<span class="ruby"><span class="rb">知</span><span class="rt">し</span></span>る<br>    </div>  </div></div><h1>原文地址</h1><a href="https://utaten.com/lyric/sa16112211/" target="_blank" >茜さす 歌詞 Aimer</a><style>.lyricBody {    background: #fff;    padding: 10px;    user-select: none;    letter-spacing: 1px;    line-height: 2.3;}.lyricBody div.large {    font-size: 21px;}.lyricBody div.large span.ruby {    line-height: 2.6;}.lyricBody div span.ruby {    margin-bottom: 0.55em;    display: inline-table;    position: relative;    vertical-align: bottom;}.lyricBody span.ruby span.rb {    display: table-row;    position: relative;    line-height: 1.2;}.lyricBody div.large span.ruby span.rt {    font-size: 14px;}.lyricBody span.ruby span.rt {    display: table-header-group;    line-height: 1.8;    color: #999;    white-space: nowrap;    text-align: center;    letter-spacing: -0.001em;    before: '(';    after: ')';}</style>]]></content>
      
      
      <categories>
          
          <category> 日语之路 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 日语 </tag>
            
            <tag> 歌曲 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>一次机械键盘清理引发的乌龙</title>
      <link href="/2025/08/16/%E4%B8%80%E6%AC%A1%E6%9C%BA%E6%A2%B0%E9%94%AE%E7%9B%98%E6%B8%85%E7%90%86%E5%BC%95%E5%8F%91%E7%9A%84%E4%B9%8C%E9%BE%99/"/>
      <url>/2025/08/16/%E4%B8%80%E6%AC%A1%E6%9C%BA%E6%A2%B0%E9%94%AE%E7%9B%98%E6%B8%85%E7%90%86%E5%BC%95%E5%8F%91%E7%9A%84%E4%B9%8C%E9%BE%99/</url>
      
        <content type="html"><![CDATA[<p>朋友送我的 ikbc F87 机械键盘已经服役快 5 年了。今天看着它脏兮兮的样子，突然心血来潮——是时候给它洗个澡了。</p><p>于是我拿出键盘自带的拔键器，把键帽一颗颗拔下来清理，又用小棍子处理缝隙里的灰。手上没刷子，小棍子也不够给力，于是我干脆把键盘倒扣着拍。经过一顿猛操作，键盘看起来焕然一新，我满意地把键帽按回去，继续用电脑。</p><p>结果刚用几分钟，就发现 <strong>Windows 键失灵</strong>。<br>我用的是 Ubuntu，很多快捷键都依赖 Win 键，比如锁屏（Win+L）……这下全废了。</p><hr><h2 id="怀疑人生的排查过程"><a href="#怀疑人生的排查过程" class="headerlink" title="怀疑人生的排查过程"></a>怀疑人生的排查过程</h2><p>第一反应是系统问题，于是重启。<br>——没用。</p><p>怀疑是键盘坏了，插到另一台 Windows 电脑试试。<br>——还是不行。</p><p>用 Ubuntu 的命令检测按键输入，发现系统根本收不到 L_Super 信号。<br>——我开始慌了。</p><p>想着可能是接触不良或进灰了，于是上网查了机械键盘换轴教程，还顺手下单了个拔轴器。毕竟刚才倒扣拍打得有点猛，我已经开始脑补“暴力拆键盘”的场景。</p><p>为了确认伤情，我用 key-test.com&#x2F;cn 测试全键。结果发现——<strong>只有左右 Win 键坏了</strong>。</p><hr><h2 id="关键的反转"><a href="#关键的反转" class="headerlink" title="关键的反转"></a>关键的反转</h2><p>“太巧了吧？难道是锁键功能？”<br>我疯狂按 Fn + Win，毫无反应。顺手试了 Fn + 数字键想开背光，结果也没动静。</p><p>想起自己几年前曾关过背光，于是翻出键盘说明书：<a href="http://www.kjjw.cc/ikbc-f87-f108/">http://www.kjjw.cc/ikbc-f87-f108/</a>  </p><img src="/2025/08/16/%E4%B8%80%E6%AC%A1%E6%9C%BA%E6%A2%B0%E9%94%AE%E7%9B%98%E6%B8%85%E7%90%86%E5%BC%95%E5%8F%91%E7%9A%84%E4%B9%8C%E9%BE%99/post-keyboard.png" class="" title="键盘说明书"><p>上面赫然写着：<strong>Fn + 右 Win 键 &#x3D; 锁定&#x2F;解锁 Win 键</strong>。</p><p>我照着一试——<strong>瞬间复活</strong>。<br>原来，整个事故的起因是——清理键盘时不小心按了 Fn + 右 Win，把两个 Win 键都锁了。</p><hr><h2 id="后记"><a href="#后记" class="headerlink" title="后记"></a>后记</h2><p>差点就去买轴、焊轴、开键盘了，结果问题只需要一个快捷键。<br>还好没出手买，不然我就多了一包原厂轴和一次无意义的拆机经历。</p><hr><p>💡 <strong>小贴士</strong><br>如果你的机械键盘左右 Win 键都突然失灵，先查一下说明书，看看有没有“Win 锁定”功能。<br>有些键盘是为了防止游戏中误触，按下 Fn + Win 键会直接把它禁用。</p>]]></content>
      
      
      <categories>
          
          <category> 技术坑记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 机械键盘 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Linux 下安装 IntelliJ IDEA 并创建桌面图标</title>
      <link href="/2025/08/04/Linux%E4%B8%8B%E5%AE%89%E8%A3%85IDEA%E5%B9%B6%E5%88%9B%E5%BB%BA%E6%A1%8C%E9%9D%A2%E5%9B%BE%E6%A0%87/"/>
      <url>/2025/08/04/Linux%E4%B8%8B%E5%AE%89%E8%A3%85IDEA%E5%B9%B6%E5%88%9B%E5%BB%BA%E6%A1%8C%E9%9D%A2%E5%9B%BE%E6%A0%87/</url>
      
        <content type="html"><![CDATA[<blockquote><p>在 Linux（Ubuntu）下安装 IntelliJ IDEA 并添加桌面图标的完整流程，支持在 Dock（如 Plank）中图标化启动，方便又高效。</p></blockquote><hr><h1 id="一、下载安装包"><a href="#一、下载安装包" class="headerlink" title="一、下载安装包"></a>一、下载安装包</h1><p>前往 JetBrains 官网下载安装包（推荐选择 <code>.tar.gz</code> 版本）：</p><p>🔗 <a href="https://www.jetbrains.com/idea/download/?section=linux">https://www.jetbrains.com/idea/download/?section=linux</a></p><h1 id="二、解压到指定目录"><a href="#二、解压到指定目录" class="headerlink" title="二、解压到指定目录"></a>二、解压到指定目录</h1><p>将下载好的压缩包解压至指定目录，例如 <code>~/tools</code>：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">tar -zxvf ideaIU-2021.1.3.tar.gz -C /home/xtong/tools/</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>解压后的文件夹为 <code>idea-IU-211.7628.21</code></p><h1 id="三、创建桌面图标"><a href="#三、创建桌面图标" class="headerlink" title="三、创建桌面图标"></a>三、创建桌面图标</h1><p>为了在应用菜单中快速启动 IDEA，我们可以手动创建一个 .desktop 文件。</p><p>执行以下命令创建文件：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">vim ~/.local/share/applications/idea.desktop</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>并填写如下内容，根据你实际的安装路径进行调整：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[Desktop Entry]</span><br><span class="line">Version=1.0</span><br><span class="line">Type=Application</span><br><span class="line">Name=IntelliJ IDEA</span><br><span class="line">Icon=/home/xtong/tools/idea-IU-211.7628.21/bin/idea.png</span><br><span class="line">Exec=<span class="string">&quot;/home/xtong/tools/idea-IU-211.7628.21/bin/idea.sh&quot;</span> %f</span><br><span class="line">Comment=The IntelliJ IDEA IDE</span><br><span class="line">Categories=Development;IDE;</span><br><span class="line">Terminal=<span class="literal">false</span></span><br><span class="line">StartupWMClass=jetbrains-idea</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>💡说明：</p><ul><li><p>Icon 路径需指向 IDEA 的图标文件，可用 PNG 或 SVG。</p></li><li><p>Exec 是 IDEA 的启动脚本路径。</p></li><li><p>StartupWMClass 用于窗口识别，推荐保持 jetbrains-idea 不变。</p></li></ul><h1 id="四、添加执行权限"><a href="#四、添加执行权限" class="headerlink" title="四、添加执行权限"></a>四、添加执行权限</h1><p>给 .desktop 文件赋予执行权限：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">chmod</span> +x .<span class="built_in">local</span>/share/applications/idea.desktop</span><br></pre></td></tr></table></figure><p>然后即可在系统启动器或 GNOME&#x2F;KDE 应用菜单中搜索 “Idea” 启动应用。</p><p>以上就是在 Linux 桌面系统中手动安装 IntelliJ IDEA 并添加桌面图标的全过程。</p>]]></content>
      
      
      <categories>
          
          <category> 技术坑记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>男の勲章 歌词 嶋大輔</title>
      <link href="/2025/05/19/%E6%AD%8C%E8%AF%8D%E7%94%B7%E3%81%AE%E5%8B%B2%E7%AB%A0/"/>
      <url>/2025/05/19/%E6%AD%8C%E8%AF%8D%E7%94%B7%E3%81%AE%E5%8B%B2%E7%AB%A0/</url>
      
        <content type="html"><![CDATA[<h1>男の勲章 歌词</h1><p>今日から俺は！！ OP</p><p>作词：Johnny  </p><p>作曲：Johnny    </p><div class="lyricBody">  <div class="large">    <div class="hiragana">          つっぱることが<span class="ruby"><span class="rb">男</span><span class="rt">おとこ</span></span>の<br>たった<span class="ruby"><span class="rb">一</span><span class="rt">ひと</span></span>つの<span class="ruby"><span class="rb">勲章</span><span class="rt">くんしょう</span></span>だって<br>この<span class="ruby"><span class="rb">胸</span><span class="rt">むね</span></span>に<span class="ruby"><span class="rb">信</span><span class="rt">しん</span></span>じて<span class="ruby"><span class="rb">生</span><span class="rt">い</span></span>きてきた<br><span class="ruby"><span class="rb">泣</span><span class="rt">な</span></span>きたくなるよな<br>つらい<span class="ruby"><span class="rb">時</span><span class="rt">とき</span></span>もあるけど<br>いつも<span class="ruby"><span class="rb">俺達</span><span class="rt">おれたち</span></span>がんばってきた<br><span class="ruby"><span class="rb">時</span><span class="rt">とき</span></span>の<span class="ruby"><span class="rb">重</span><span class="rt">おも</span></span>さに <span class="ruby"><span class="rb">流</span><span class="rt">なが</span></span>されそうに<br>なった<span class="ruby"><span class="rb">時</span><span class="rt">とき</span></span>でも<br><span class="ruby"><span class="rb">歯</span><span class="rt">は</span></span>をくいしばりたえてきた<br>ガキのころ <span class="ruby"><span class="rb">路地裏</span><span class="rt">ろじうら</span></span>で<span class="ruby"><span class="rb">見</span><span class="rt">み</span></span>た<br><span class="ruby"><span class="rb">夜空</span><span class="rt">よぞら</span></span>にキラめいた<br><span class="ruby"><span class="rb">流</span><span class="rt">なが</span></span>れる<span class="ruby"><span class="rb">星</span><span class="rt">ほし</span></span>を<span class="ruby"><span class="rb">見</span><span class="rt">み</span></span>て<br><span class="ruby"><span class="rb">誓</span><span class="rt">ちか</span></span>った<span class="ruby"><span class="rb">思</span><span class="rt">おも</span></span>いを<br><span class="ruby"><span class="rb">忘</span><span class="rt">わす</span></span>れちゃいないぜ<br>つっぱることが<span class="ruby"><span class="rb">男</span><span class="rt">おとこ</span></span>の<br>たった<span class="ruby"><span class="rb">一</span><span class="rt">ひと</span></span>つの<span class="ruby"><span class="rb">勲章</span><span class="rt">くんしょう</span></span>だって<br>この<span class="ruby"><span class="rb">胸</span><span class="rt">むね</span></span>に<span class="ruby"><span class="rb">信</span><span class="rt">しん</span></span>じて<span class="ruby"><span class="rb">生</span><span class="rt">い</span></span>きてきた<br><br><span class="ruby"><span class="rb">氷</span><span class="rt">こおり</span></span>のように<span class="ruby"><span class="rb">冷</span><span class="rt">つめ</span></span>たい<br><span class="ruby"><span class="rb">世間</span><span class="rt">せけん</span></span>の<span class="ruby"><span class="rb">壁</span><span class="rt">かべ</span></span>が<br>いつもさえぎる<span class="ruby"><span class="rb">俺達</span><span class="rt">おれたち</span></span>の<span class="ruby"><span class="rb">前</span><span class="rt">まえ</span></span>を<br><span class="ruby"><span class="rb">胸</span><span class="rt">むね</span></span>にえがいた この<span class="ruby"><span class="rb">夢</span><span class="rt">ゆめ</span></span>は<br>ハンパじゃないから<br>かじかむこの<span class="ruby"><span class="rb">手</span><span class="rt">て</span></span>にぎりしめ<br>ガキのころ <span class="ruby"><span class="rb">赤</span><span class="rt">あか</span></span>トンボ<br><span class="ruby"><span class="rb">追</span><span class="rt">お</span></span>いかけてた<span class="ruby"><span class="rb">時</span><span class="rt">とき</span></span>の<br><span class="ruby"><span class="rb">燃</span><span class="rt">も</span></span>えてた<span class="ruby"><span class="rb">瞳</span><span class="rt">ひとみ</span></span>は<br><span class="ruby"><span class="rb">今</span><span class="rt">いま</span></span>でも<span class="ruby"><span class="rb">俺達</span><span class="rt">おれたち</span></span><br><span class="ruby"><span class="rb">忘</span><span class="rt">わす</span></span>れちゃいないぜ<br>つっぱることが<span class="ruby"><span class="rb">男</span><span class="rt">おとこ</span></span>の<br>たった<span class="ruby"><span class="rb">一</span><span class="rt">ひと</span></span>つの<span class="ruby"><span class="rb">勲章</span><span class="rt">くんしょう</span></span>だって<br>この<span class="ruby"><span class="rb">胸</span><span class="rt">むね</span></span>に<span class="ruby"><span class="rb">信</span><span class="rt">しん</span></span>じて<span class="ruby"><span class="rb">生</span><span class="rt">い</span></span>きてきた<br>つっぱることが<span class="ruby"><span class="rb">男</span><span class="rt">おとこ</span></span>の<br>たった<span class="ruby"><span class="rb">一</span><span class="rt">ひと</span></span>つの<span class="ruby"><span class="rb">勲章</span><span class="rt">くんしょう</span></span>だって<br>この<span class="ruby"><span class="rb">胸</span><span class="rt">むね</span></span>に<span class="ruby"><span class="rb">信</span><span class="rt">しん</span></span>じて<span class="ruby"><span class="rb">生</span><span class="rt">い</span></span>きて<span class="ruby"><span class="rb">行</span><span class="rt">ゆ</span></span>く<br>つっぱることが<span class="ruby"><span class="rb">男</span><span class="rt">おとこ</span></span>の<br>たった<span class="ruby"><span class="rb">一</span><span class="rt">ひと</span></span>つの<span class="ruby"><span class="rb">勲章</span><span class="rt">くんしょう</span></span>だって<br>この<span class="ruby"><span class="rb">胸</span><span class="rt">むね</span></span>に<span class="ruby"><span class="rb">信</span><span class="rt">しん</span></span>じて<span class="ruby"><span class="rb">生</span><span class="rt">い</span></span>きて<span class="ruby"><span class="rb">行</span><span class="rt">ゆ</span></span>く        </div>  </div></div><h1>原文地址</h1><a href="https://utaten.com/lyric/ja00002616/" target="_blank" >男の勲章 歌詞 嶋大輔</a><style>.lyricBody {    background: #fff;    padding: 10px;    user-select: none;    letter-spacing: 1px;    line-height: 2.3;}.lyricBody div.large {    font-size: 21px;}.lyricBody div.large span.ruby {    line-height: 2.6;}.lyricBody div span.ruby {    margin-bottom: 0.55em;    display: inline-table;    position: relative;    vertical-align: bottom;}.lyricBody span.ruby span.rb {    display: table-row;    position: relative;    line-height: 1.2;}.lyricBody div.large span.ruby span.rt {    font-size: 14px;}.lyricBody span.ruby span.rt {    display: table-header-group;    line-height: 1.8;    color: #999;    white-space: nowrap;    text-align: center;    letter-spacing: -0.001em;    before: '(';    after: ')';}</style>]]></content>
      
      
      <categories>
          
          <category> 日语之路 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 日语 </tag>
            
            <tag> 歌曲 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>again 歌词 YUI</title>
      <link href="/2025/04/08/%E6%AD%8C%E8%AF%8Dagain/"/>
      <url>/2025/04/08/%E6%AD%8C%E8%AF%8Dagain/</url>
      
        <content type="html"><![CDATA[<h1>again 歌词</h1><p>鋼の錬金術師 FULLMETAL ALCHEMIST OP</p><p>作词：YUI  </p><p>作曲：YUI    </p><div class="lyricBody">  <div class="large">    <div class="hiragana">          <span class="ruby"><span class="rb">夢</span><span class="rt">ゆめ</span></span>のつづき<br><span class="ruby"><span class="rb">追</span><span class="rt">お</span></span>いかけていたはずなのに<br><br><span class="ruby"><span class="rb">曲</span><span class="rt">ま</span></span>がりくねった <span class="ruby"><span class="rb">細</span><span class="rt">ほそ</span></span>い<span class="ruby"><span class="rb">道</span><span class="rt">みち</span></span><br><span class="ruby"><span class="rb">人</span><span class="rt">ひと</span></span>につまずく<br><br>あの<span class="ruby"><span class="rb">頃</span><span class="rt">ころ</span></span>みたいにって<br><span class="ruby"><span class="rb">戻</span><span class="rt">もど</span></span>りたい<span class="ruby"><span class="rb">訳</span><span class="rt">わけ</span></span>じゃないの<br><br><span class="ruby"><span class="rb">無</span><span class="rt">な</span></span>くしてきた<span class="ruby"><span class="rb">空</span><span class="rt">そら</span></span>を<br><span class="ruby"><span class="rb">探</span><span class="rt">さが</span></span>してる<br><br>わかってくれますように<br><br><span class="ruby"><span class="rb">犠牲</span><span class="rt">ぎせい</span></span>になったような<br><span class="ruby"><span class="rb">悲</span><span class="rt">かな</span></span>しい<span class="ruby"><span class="rb">顔</span><span class="rt">かお</span></span>はやめてよ<br><br><span class="ruby"><span class="rb">罪</span><span class="rt">つみ</span></span>の<span class="ruby"><span class="rb">最後</span><span class="rt">さいご</span></span>は<span class="ruby"><span class="rb">涙</span><span class="rt">なみだ</span></span>じゃないよ<br>ずっと<span class="ruby"><span class="rb">苦</span><span class="rt">くる</span></span>しく<span class="ruby"><span class="rb">背負</span><span class="rt">せお</span></span>ってくんだ<br><br><span class="ruby"><span class="rb">出口見</span><span class="rt">でぐちみ</span></span>えない<span class="ruby"><span class="rb">感情迷路</span><span class="rt">かんじょうめいろ</span></span>に<br><span class="ruby"><span class="rb">誰</span><span class="rt">だれ</span></span>を<span class="ruby"><span class="rb">待</span><span class="rt">ま</span></span>ってるの?<br><br><span class="ruby"><span class="rb">白</span><span class="rt">しろ</span></span>いノートに<span class="ruby"><span class="rb">綴</span><span class="rt">つづ</span></span>ったように<br>もっと<span class="ruby"><span class="rb">素直</span><span class="rt">すなお</span></span>に<span class="ruby"><span class="rb">吐</span><span class="rt">は</span></span>き<span class="ruby"><span class="rb">出</span><span class="rt">だ</span></span>したいよ<br><br><span class="ruby"><span class="rb">何</span><span class="rt">なに</span></span>から<br><span class="ruby"><span class="rb">逃</span><span class="rt">のが</span></span>れたいんだ<br><br>・・・<span class="ruby"><span class="rb">現実</span><span class="rt">げんじつ</span></span>ってやつ?<br><br><span class="ruby"><span class="rb">叶</span><span class="rt">かな</span></span>えるために<br><span class="ruby"><span class="rb">生</span><span class="rt">い</span></span>きてるんだって<br><br><span class="ruby"><span class="rb">忘</span><span class="rt">わす</span></span>れちゃいそうな<br><span class="ruby"><span class="rb">夜</span><span class="rt">よる</span></span>の<span class="ruby"><span class="rb">真</span><span class="rt">ま</span></span>ん<span class="ruby"><span class="rb">中</span><span class="rt">なか</span></span><br><br><span class="ruby"><span class="rb">無難</span><span class="rt">ぶなん</span></span>になんて<br>やってられないから<br><br>・・・<span class="ruby"><span class="rb">帰</span><span class="rt">かえ</span></span>る<span class="ruby"><span class="rb">場所</span><span class="rt">ばしょ</span></span>もないの<br><br>この<span class="ruby"><span class="rb">想</span><span class="rt">おも</span></span>いを <span class="ruby"><span class="rb">消</span><span class="rt">け</span></span>してしまうには<br>まだ<span class="ruby"><span class="rb">人生長</span><span class="rt">じんせいなが</span></span>いでしょ?<br><br><span class="ruby"><span class="rb">懐</span><span class="rt">なつ</span></span>かしくなる<br>こんな<span class="ruby"><span class="rb">痛</span><span class="rt">いた</span></span>みも<span class="ruby"><span class="rb">歓迎</span><span class="rt">かんげい</span></span>じゃん<br><br><span class="ruby"><span class="rb">謝</span><span class="rt">あやま</span></span>らなくちゃいけないよね<br>ah ゴメンね<br><br>うまく<span class="ruby"><span class="rb">言</span><span class="rt">い</span></span>えなくて<br><span class="ruby"><span class="rb">心配</span><span class="rt">しんぱい</span></span>かけたままだったね<br><br>あの<span class="ruby"><span class="rb">日</span><span class="rt">ひ</span></span> かかえた<span class="ruby"><span class="rb">全部</span><span class="rt">ぜんぶ</span></span><br>あした かかえる<span class="ruby"><span class="rb">全部</span><span class="rt">ぜんぶ</span></span><br><br><span class="ruby"><span class="rb">順番</span><span class="rt">じゅんばん</span></span>つけたりは<br>しないから<br><br>わかってくれますように<br><br>そっと<span class="ruby"><span class="rb">目</span><span class="rt">め</span></span>を<span class="ruby"><span class="rb">閉</span><span class="rt">と</span></span>じたんだ<br><span class="ruby"><span class="rb">見</span><span class="rt">み</span></span>たくないものまで<br><span class="ruby"><span class="rb">見</span><span class="rt">み</span></span>えんだもん<br><br>いらないウワサにちょっと<br><span class="ruby"><span class="rb">初</span><span class="rt">はじ</span></span>めて<span class="ruby"><span class="rb">聞</span><span class="rt">き</span></span>く<span class="ruby"><span class="rb">発言</span><span class="rt">はつげん</span></span>どっち?<br><br><span class="ruby"><span class="rb">2回会</span><span class="rt">にかいあ</span></span>ったら<span class="ruby"><span class="rb">友達</span><span class="rt">ともだち</span></span>だって??<br>ウソはやめてね<br><br><span class="ruby"><span class="rb">赤</span><span class="rt">あか</span></span>いハートが<span class="ruby"><span class="rb">苛立</span><span class="rt">いらだ</span></span>つように<br><span class="ruby"><span class="rb">身体</span><span class="rt">からだ</span></span>ん<span class="ruby"><span class="rb">中燃</span><span class="rt">なかも</span></span>えているんだ<br><br>ホントは<br><span class="ruby"><span class="rb">期待</span><span class="rt">きたい</span></span>してんの<br><br>・・・<span class="ruby"><span class="rb">現実</span><span class="rt">げんじつ</span></span>ってやつ?<br><br><span class="ruby"><span class="rb">叶</span><span class="rt">かな</span></span>えるために<br><span class="ruby"><span class="rb">生</span><span class="rt">い</span></span>きてるんだって<br><br><span class="ruby"><span class="rb">叫</span><span class="rt">さけ</span></span>びたくなるよ<br><span class="ruby"><span class="rb">聞</span><span class="rt">き</span></span>こえていますか?<br><br><span class="ruby"><span class="rb">無難</span><span class="rt">ぶなん</span></span>になんて<br>やってられないから<br><br>・・・<span class="ruby"><span class="rb">帰</span><span class="rt">かえ</span></span>る<span class="ruby"><span class="rb">場所</span><span class="rt">ばしょ</span></span>もないの<br><br><span class="ruby"><span class="rb">優</span><span class="rt">やさ</span></span>しさには いつも<span class="ruby"><span class="rb">感謝</span><span class="rt">かんしゃ</span></span>してる<br>だから<span class="ruby"><span class="rb">強</span><span class="rt">つよ</span></span>くなりたい<br><br><span class="ruby"><span class="rb">進</span><span class="rt">すす</span></span>むために<br><span class="ruby"><span class="rb">敵</span><span class="rt">てき</span></span>も<span class="ruby"><span class="rb">味方</span><span class="rt">みかた</span></span>も<span class="ruby"><span class="rb">歓迎</span><span class="rt">かんげい</span></span>じゃん<br><br>どうやって<span class="ruby"><span class="rb">次</span><span class="rt">つぎ</span></span>のドア<br><span class="ruby"><span class="rb">開</span><span class="rt">あ</span></span>けるんだっけ?<span class="ruby"><span class="rb">考</span><span class="rt">かんが</span></span>えてる?<br><br>もう<span class="ruby"><span class="rb">引</span><span class="rt">ひ</span></span>き<span class="ruby"><span class="rb">返</span><span class="rt">かえ</span></span>せない<br><span class="ruby"><span class="rb">物語</span><span class="rt">ものがたり</span></span> <span class="ruby"><span class="rb">始</span><span class="rt">はじ</span></span>まってるんだ<br><br><span class="ruby"><span class="rb">目</span><span class="rt">め</span></span>を<span class="ruby"><span class="rb">覚</span><span class="rt">さ</span></span>ませ <span class="ruby"><span class="rb">目</span><span class="rt">め</span></span>を<span class="ruby"><span class="rb">覚</span><span class="rt">さ</span></span>ませ<br><br>この<span class="ruby"><span class="rb">想</span><span class="rt">おも</span></span>いを<span class="ruby"><span class="rb">消</span><span class="rt">け</span></span>してしまうには<br>まだ<span class="ruby"><span class="rb">人生長</span><span class="rt">じんせいなが</span></span>いでしょ?<br><br>やり<span class="ruby"><span class="rb">残</span><span class="rt">のこ</span></span>してるコト<br>やり<span class="ruby"><span class="rb">直</span><span class="rt">なお</span></span>してみたいから<br><br>もう<span class="ruby"><span class="rb">一度</span><span class="rt">いちど</span></span>ゆこう<br><br><span class="ruby"><span class="rb">叶</span><span class="rt">かな</span></span>えるために<br><span class="ruby"><span class="rb">生</span><span class="rt">い</span></span>きてるんだって<br><br><span class="ruby"><span class="rb">叫</span><span class="rt">さけ</span></span>びたくなるよ<br><span class="ruby"><span class="rb">聞</span><span class="rt">き</span></span>こえていますか?<br><br><span class="ruby"><span class="rb">無難</span><span class="rt">ぶなん</span></span>になんて<br>やってられないから<br><br>・・・<span class="ruby"><span class="rb">帰</span><span class="rt">かえ</span></span>る<span class="ruby"><span class="rb">場所</span><span class="rt">ばしょ</span></span>もないの<br><br><span class="ruby"><span class="rb">優</span><span class="rt">やさ</span></span>しさにはいつも<span class="ruby"><span class="rb">感謝</span><span class="rt">かんしゃ</span></span>してる<br>だから<span class="ruby"><span class="rb">強</span><span class="rt">つよ</span></span>くなりたい<br><br><span class="ruby"><span class="rb">懐</span><span class="rt">なつ</span></span>かしくなる<br>こんな<span class="ruby"><span class="rb">痛</span><span class="rt">いた</span></span>みも<span class="ruby"><span class="rb">歓迎</span><span class="rt">かんげい</span></span>じゃん<br>        </div>  </div></div><h1>原文地址</h1><a href="https://utaten.com/lyric/jb10905099/" target="_blank" >again 歌詞 YUI 鋼の錬金術師 FULLMETAL ALCHEMIST OP</a><style>.lyricBody {    background: #fff;    padding: 10px;    user-select: none;    letter-spacing: 1px;    line-height: 2.3;}.lyricBody div.large {    font-size: 21px;}.lyricBody div.large span.ruby {    line-height: 2.6;}.lyricBody div span.ruby {    margin-bottom: 0.55em;    display: inline-table;    position: relative;    vertical-align: bottom;}.lyricBody span.ruby span.rb {    display: table-row;    position: relative;    line-height: 1.2;}.lyricBody div.large span.ruby span.rt {    font-size: 14px;}.lyricBody span.ruby span.rt {    display: table-header-group;    line-height: 1.8;    color: #999;    white-space: nowrap;    text-align: center;    letter-spacing: -0.001em;    before: '(';    after: ')';}</style>]]></content>
      
      
      <categories>
          
          <category> 日语之路 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 日语 </tag>
            
            <tag> 歌曲 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ubuntu20.04安装企业微信和微信</title>
      <link href="/2025/01/21/Ubuntu%E5%AE%89%E8%A3%85%E4%BC%81%E4%B8%9A%E5%BE%AE%E4%BF%A1/"/>
      <url>/2025/01/21/Ubuntu%E5%AE%89%E8%A3%85%E4%BC%81%E4%B8%9A%E5%BE%AE%E4%BF%A1/</url>
      
        <content type="html"><![CDATA[<p>在Ubuntu下的开发沟通，之前我使用的是整合的wine版微信。现在办公沟通都是在企业微信上进行了，所以也很少用这个wine版微信，而且这个wine版微信在文件传输上有bug，经常发不出去文件。</p><p>由于电脑性能有限，我现在很少在 Windows 上进行开发。相较之下，Ubuntu 在开发方面的表现更为优越，因此最近我又开始使用 Ubuntu 来进行办公。</p><h1 id="安装微信"><a href="#安装微信" class="headerlink" title="安装微信"></a>安装微信</h1><p>安装 优麒麟 提供的linux版微信，可以直接安装。</p><p><a href="https://ubuntukylin.com/applications/106-cn.html">https://ubuntukylin.com/applications/106-cn.html</a></p><blockquote><p>微信 作为一款国民级APP，已经成为我们日常生活中不可或缺的一部分。但是，目前 Linux 发行版下的微信替代方案，都与原生版本有一定的差距，极大的影响了用户的日常工作效率，以及日常影音娱乐需求。为了进一步丰富完善优麒麟用户的生态需求，提供更顺畅的沟通交流环境，麒麟软件与腾讯公司联手推动了基于Linux平台的原生微信适配工作，微信官方版2.1.1正式上线，并在麒麟软件商店上架。想要体验的用户，只需在麒麟商店搜索“微信”，一键完成安装，扫码登录即可随时畅聊。</p></blockquote><p>下载deb包后，直接命令安装</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> dpkg -i weixin_2.1.1_amd64.deb</span><br></pre></td></tr></table></figure><p>PS：微信官方也出了Linux版本：<a href="https://linux.weixin.qq.com/">https://linux.weixin.qq.com/</a></p><h1 id="企业微信"><a href="#企业微信" class="headerlink" title="企业微信"></a>企业微信</h1><p>先卸载本地的 wine，然后安装最新稳定版wine。</p><h2 id="卸载旧版-Wine（没装过wine跳过）"><a href="#卸载旧版-Wine（没装过wine跳过）" class="headerlink" title="卸载旧版 Wine（没装过wine跳过）"></a>卸载旧版 Wine（没装过wine跳过）</h2><h3 id="1-卸载-Wine-软件包"><a href="#1-卸载-Wine-软件包" class="headerlink" title="1. 卸载 Wine 软件包"></a>1. <strong>卸载 Wine 软件包</strong></h3><p>使用以下命令卸载 Wine 软件包：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> apt remove --purge wine* -y </span><br><span class="line"><span class="built_in">sudo</span> apt autoremove --purge -y </span><br><span class="line"><span class="built_in">sudo</span> apt autoclean</span><br></pre></td></tr></table></figure><hr><h3 id="2-删除-Wine-配置文件"><a href="#2-删除-Wine-配置文件" class="headerlink" title="2. 删除 Wine 配置文件"></a>2. <strong>删除 Wine 配置文件</strong></h3><p>删除用户目录下的 Wine 配置文件（如 <code>.wine</code> 文件夹）：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">rm</span> -rf ~/.wine <span class="built_in">rm</span> -rf ~/.config/wine</span><br></pre></td></tr></table></figure><hr><h3 id="3-删除与-Wine-相关的系统文件"><a href="#3-删除与-Wine-相关的系统文件" class="headerlink" title="3. 删除与 Wine 相关的系统文件"></a>3. <strong>删除与 Wine 相关的系统文件</strong></h3><p>删除 Wine 可能在系统目录中创建的其他文件和目录：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> <span class="built_in">rm</span> -rf /usr/lib/x86_64-linux-gnu/wine /usr/lib/wine /usr/share/wine /etc/wine</span><br></pre></td></tr></table></figure><hr><h3 id="4-清理注册表模拟文件"><a href="#4-清理注册表模拟文件" class="headerlink" title="4. 清理注册表模拟文件"></a>4. <strong>清理注册表模拟文件</strong></h3><p>Wine 会在用户主目录中创建 Windows 注册表模拟文件，可以一起清理掉：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">rm</span> -f ~/.local/share/applications/wine* </span><br><span class="line"><span class="built_in">rm</span> -f ~/.local/share/icons/hicolor/*/apps/wine*</span><br></pre></td></tr></table></figure><hr><h3 id="5-检查并移除残留依赖项"><a href="#5-检查并移除残留依赖项" class="headerlink" title="5. 检查并移除残留依赖项"></a>5. <strong>检查并移除残留依赖项</strong></h3><p>如果需要更加彻底地清理残留的依赖项，可以使用以下命令：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> apt autoremove --purge -y</span><br></pre></td></tr></table></figure><hr><h3 id="6-更新包列表"><a href="#6-更新包列表" class="headerlink" title="6. 更新包列表"></a>6. <strong>更新包列表</strong></h3><p>最后，更新系统包列表，确保干净：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> apt update</span><br></pre></td></tr></table></figure><hr><p>执行以上步骤后，Wine 应该已被彻底删除。</p><h2 id="安装新版-wine"><a href="#安装新版-wine" class="headerlink" title="安装新版 wine"></a>安装新版 wine</h2><h3 id="1-添加-WineHQ-仓库"><a href="#1-添加-WineHQ-仓库" class="headerlink" title="1. 添加 WineHQ 仓库"></a>1. <strong>添加 WineHQ 仓库</strong></h3><p>首先，需要添加 WineHQ 的官方软件源，以确保能够安装 Wine 的最新稳定版。</p><p>运行以下命令来添加 WineHQ 的官方仓库：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> dpkg --add-architecture i386</span><br><span class="line"><span class="built_in">sudo</span> apt update</span><br><span class="line"><span class="built_in">sudo</span> apt install wget -y</span><br><span class="line">wget -qO - https://dl.winehq.org/wine-builds/Release.key | <span class="built_in">sudo</span> apt-key add -</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>添加 WineHQ 仓库：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> add-apt-repository <span class="string">&#x27;deb https://dl.winehq.org/wine-builds/ubuntu/ focal main&#x27;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><hr><h3 id="2-安装-Wine-的最新稳定版"><a href="#2-安装-Wine-的最新稳定版" class="headerlink" title="2. 安装 Wine 的最新稳定版"></a>2. <strong>安装 Wine 的最新稳定版</strong></h3><p>更新软件包列表并安装 Wine 的稳定版：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> apt update</span><br><span class="line"><span class="built_in">sudo</span> apt install --install-recommends winehq-stable -y</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>这将会安装 Wine 的最新稳定版，包括 Wine 所需要的所有依赖项。</p><hr><h3 id="3-验证安装"><a href="#3-验证安装" class="headerlink" title="3. 验证安装"></a>3. <strong>验证安装</strong></h3><p>安装完成后，你可以通过以下命令检查 Wine 是否正确安装：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">wine --version</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>你应该会看到类似 <code>wine-9.x.x</code> 之类的输出，表示 Wine 已成功安装。</p><hr><h3 id="4-配置-Wine"><a href="#4-配置-Wine" class="headerlink" title="4. 配置 Wine"></a>4. <strong>配置 Wine</strong></h3><p>运行以下命令来设置 Wine 的配置：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">winecfg</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>这会初始化 Wine 环境并创建 Wine 的配置目录，之后你就可以通过 Wine 运行 Windows 程序了。</p><hr><h3 id="5-安装额外的依赖（如果需要）"><a href="#5-安装额外的依赖（如果需要）" class="headerlink" title="5. 安装额外的依赖（如果需要）"></a>5. <strong>安装额外的依赖（如果需要）</strong></h3><p>如果你计划运行某些 Windows 应用，可能需要额外的库或依赖项。你可以使用 <code>winetricks</code> 安装常见的库：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> apt install winetricks -y</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>然后可以使用 <code>winetricks</code> 安装各种 Windows 程序所需的库：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">winetricks &lt;库名&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="安装企业微信"><a href="#安装企业微信" class="headerlink" title="安装企业微信"></a>安装企业微信</h2><p>安装必要的依赖</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> apt install winetricks -y</span><br><span class="line">winetricks vcrun2015 vcrun2019 corefonts</span><br></pre></td></tr></table></figure><p>安装中文字体</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> apt install ttf-mscorefonts-installer fonts-wqy-zenhei fonts-wqy-microhei xfonts-intl-chinese -y</span><br><span class="line"></span><br><span class="line">winetricks cjkfonts</span><br></pre></td></tr></table></figure><p>安装企业微信</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wine WeCom_x.x.x.x.exe</span><br></pre></td></tr></table></figure><h2 id="踩坑"><a href="#踩坑" class="headerlink" title="踩坑"></a>踩坑</h2><p>注意不要安装这个版本【WeCom_4.1.32.6005.exe】</p><p>这个是从官网下载的最新版企业微信，安装成功后运行不起来，应该是兼容问题，所以在网上找了稍微旧一点的版本（不能太旧，太旧不让用）</p><p>【WeCom.4.1.28.6005.exe】，这个版本就是可以的</p><p><a href="https://mydown.yesky.com/pcsoft/413570563/versions/">https://mydown.yesky.com/pcsoft/413570563/versions/</a></p><h1 id="参考连接"><a href="#参考连接" class="headerlink" title="参考连接"></a>参考连接</h1><ul><li><a href="https://ubuntukylin.com/applications/">优麒麟应用商店</a></li><li><a href="https://mydown.yesky.com/pcsoft/413570563/versions/">企业微信历史版本</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> 技术坑记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> Ubuntu </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>たぶん 歌词 YOASOBI</title>
      <link href="/2024/11/20/%E6%AD%8C%E8%AF%8D%E3%81%9F%E3%81%B6%E3%82%93/"/>
      <url>/2024/11/20/%E6%AD%8C%E8%AF%8D%E3%81%9F%E3%81%B6%E3%82%93/</url>
      
        <content type="html"><![CDATA[<h1>たぶん 歌词</h1><p>映画「たぶん」主題歌</p><p>作词：Ayase  </p><p>作曲：Ayase  </p><div class="lyricBody">  <div class="large">    <div class="hiragana" style="display: block;">      <span class="ruby"><span class="rb">涙流</span><span class="rt">なみだなが</span></span>すことすら<span class="ruby"><span class="rb">無</span><span class="rt">な</span></span>いまま<br><span class="ruby"><span class="rb">過</span><span class="rt">す</span></span>ごした<span class="ruby"><span class="rb">日々</span><span class="rt">ひび</span></span>の<span class="ruby"><span class="rb">痕一</span><span class="rt">あとひと</span></span>つも<span class="ruby"><span class="rb">残</span><span class="rt">のこ</span></span>さずに<br>さよならだ<br><br><span class="ruby"><span class="rb">一人</span><span class="rt">ひとり</span></span>で<span class="ruby"><span class="rb">迎</span><span class="rt">むか</span></span>えた<span class="ruby"><span class="rb">朝</span><span class="rt">あさ</span></span>に<br><span class="ruby"><span class="rb">鳴</span><span class="rt">な</span></span>り<span class="ruby"><span class="rb">響</span><span class="rt">ひび</span></span>く<span class="ruby"><span class="rb">誰</span><span class="rt">だれ</span></span>かの<span class="ruby"><span class="rb">音</span><span class="rt">おと</span></span><br><span class="ruby"><span class="rb">二人</span><span class="rt">ふたり</span></span>で<span class="ruby"><span class="rb">過</span><span class="rt">す</span></span>ごした<span class="ruby"><span class="rb">部屋</span><span class="rt">へや</span></span>で<br><span class="ruby"><span class="rb">目</span><span class="rt">め</span></span>を<span class="ruby"><span class="rb">閉</span><span class="rt">と</span></span>じたまま<span class="ruby"><span class="rb">考</span><span class="rt">かんが</span></span>えてた<br><br><span class="ruby"><span class="rb">悪</span><span class="rt">わる</span></span>いのは<span class="ruby"><span class="rb">誰</span><span class="rt">だれ</span></span>だ<br><span class="ruby"><span class="rb">分</span><span class="rt">わ</span></span>かんないよ<br><span class="ruby"><span class="rb">誰</span><span class="rt">だれ</span></span>のせいでもない<br>たぶん<br><br><span class="ruby"><span class="rb">僕</span><span class="rt">ぼく</span></span>らは<span class="ruby"><span class="rb">何回</span><span class="rt">なんかい</span></span>だってきっと<br>そう<span class="ruby"><span class="rb">何年</span><span class="rt">なんねん</span></span>だってきっと<br>さよならと<span class="ruby"><span class="rb">共</span><span class="rt">とも</span></span>に<span class="ruby"><span class="rb">終</span><span class="rt">お</span></span>わるだけなんだ<br><span class="ruby"><span class="rb">仕方</span><span class="rt">しかた</span></span>がないよきっと<br>「おかえり」<br><span class="ruby"><span class="rb">思</span><span class="rt">おも</span></span>わず<span class="ruby"><span class="rb">零</span><span class="rt">こぼ</span></span>れた<span class="ruby"><span class="rb">言葉</span><span class="rt">ことば</span></span>は<br><span class="ruby"><span class="rb">違</span><span class="rt">ちが</span></span>うな<br><br><span class="ruby"><span class="rb">一人</span><span class="rt">ひとり</span></span>で<span class="ruby"><span class="rb">迎</span><span class="rt">むか</span></span>えた<span class="ruby"><span class="rb">朝</span><span class="rt">あさ</span></span>に<br>ふと<span class="ruby"><span class="rb">想</span><span class="rt">おも</span></span>う<span class="ruby"><span class="rb">誰</span><span class="rt">だれ</span></span>かのこと<br><span class="ruby"><span class="rb">二人</span><span class="rt">ふたり</span></span>で<span class="ruby"><span class="rb">過</span><span class="rt">す</span></span>ごした<span class="ruby"><span class="rb">日々</span><span class="rt">ひび</span></span>の<br><span class="ruby"><span class="rb">当</span><span class="rt">あ</span></span>たり<span class="ruby"><span class="rb">前</span><span class="rt">まえ</span></span>がまだ<span class="ruby"><span class="rb">残</span><span class="rt">のこ</span></span>っている<br><br><span class="ruby"><span class="rb">悪</span><span class="rt">わる</span></span>いのは<span class="ruby"><span class="rb">君</span><span class="rt">きみ</span></span>だ<br>そうだっけ<br><span class="ruby"><span class="rb">悪</span><span class="rt">わる</span></span>いのは<span class="ruby"><span class="rb">僕</span><span class="rt">ぼく</span></span>だ<br>たぶん<br><br>これも<span class="ruby"><span class="rb">大衆的恋愛</span><span class="rt">たいしゅうてきれんあい</span></span>でしょ<br>それは<span class="ruby"><span class="rb">最終的</span><span class="rt">さいしゅうてき</span></span>な<span class="ruby"><span class="rb">答</span><span class="rt">こた</span></span>えだよ<br><span class="ruby"><span class="rb">僕</span><span class="rt">ぼく</span></span>らだんだんとズレていったの<br>それもただよくある<span class="ruby"><span class="rb">聴</span><span class="rt">き</span></span>き<span class="ruby"><span class="rb">慣</span><span class="rt">な</span></span>れたストーリーだ<br>あんなに<span class="ruby"><span class="rb">輝</span><span class="rt">かがや</span></span>いていた<span class="ruby"><span class="rb">日々</span><span class="rt">ひび</span></span>にすら<br><span class="ruby"><span class="rb">埃</span><span class="rt">ほこり</span></span>は<span class="ruby"><span class="rb">積</span><span class="rt">つ</span></span>もっていくんだ<br><br><span class="ruby"><span class="rb">僕</span><span class="rt">ぼく</span></span>らは<span class="ruby"><span class="rb">何回</span><span class="rt">なんかい</span></span>だってきっと<br>そう<span class="ruby"><span class="rb">何年</span><span class="rt">なんねん</span></span>だってきっと<br>さよならに<span class="ruby"><span class="rb">続</span><span class="rt">つづ</span></span>く<span class="ruby"><span class="rb">道</span><span class="rt">みち</span></span>を<span class="ruby"><span class="rb">歩</span><span class="rt">ある</span></span>くんだ<br><span class="ruby"><span class="rb">仕方</span><span class="rt">しかた</span></span>がないよきっと<br>「おかえり」<br>いつもの<span class="ruby"><span class="rb">様</span><span class="rt">よう</span></span>に<br><span class="ruby"><span class="rb">零</span><span class="rt">こぼ</span></span>れ<span class="ruby"><span class="rb">落</span><span class="rt">お</span></span>ちた<br><br><span class="ruby"><span class="rb">分</span><span class="rt">わ</span></span>かり<span class="ruby"><span class="rb">合</span><span class="rt">あ</span></span>えないことなんてさ<br><span class="ruby"><span class="rb">幾</span><span class="rt">いく</span></span>らでもあるんだきっと<br><span class="ruby"><span class="rb">全</span><span class="rt">すべ</span></span>てを<span class="ruby"><span class="rb">許</span><span class="rt">ゆる</span></span>し<span class="ruby"><span class="rb">合</span><span class="rt">あ</span></span>えるわけじゃないから<br>ただ、<span class="ruby"><span class="rb">優</span><span class="rt">やさ</span></span>しさの<span class="ruby"><span class="rb">日々</span><span class="rt">ひび</span></span>を<br><span class="ruby"><span class="rb">辛</span><span class="rt">つら</span></span>い<span class="ruby"><span class="rb">日々</span><span class="rt">ひび</span></span>と<span class="ruby"><span class="rb">感</span><span class="rt">かん</span></span>じてしまったのなら<br><span class="ruby"><span class="rb">戻</span><span class="rt">もど</span></span>れないから<br><br><span class="ruby"><span class="rb">僕</span><span class="rt">ぼく</span></span>らは<span class="ruby"><span class="rb">何回</span><span class="rt">なんかい</span></span>だってきっと<br><br><span class="ruby"><span class="rb">僕</span><span class="rt">ぼく</span></span>らは<span class="ruby"><span class="rb">何回</span><span class="rt">なんかい</span></span>だってきっと<br>そう<span class="ruby"><span class="rb">何年</span><span class="rt">なんねん</span></span>だってきっと<br>さよならと<span class="ruby"><span class="rb">共</span><span class="rt">とも</span></span>に<span class="ruby"><span class="rb">終</span><span class="rt">お</span></span>わるだけなんだ<br><span class="ruby"><span class="rb">仕方</span><span class="rt">しかた</span></span>がないよきっと<br>「おかえり」<br><span class="ruby"><span class="rb">思</span><span class="rt">おも</span></span>わず<span class="ruby"><span class="rb">零</span><span class="rt">こぼ</span></span>れた<span class="ruby"><span class="rb">言葉</span><span class="rt">ことば</span></span>は<br><span class="ruby"><span class="rb">違</span><span class="rt">ちが</span></span>うな<br><br>それでも<span class="ruby"><span class="rb">何回</span><span class="rt">なんかい</span></span>だってきっと<br>そう<span class="ruby"><span class="rb">何年</span><span class="rt">なんねん</span></span>だってきっと<br><span class="ruby"><span class="rb">始</span><span class="rt">はじ</span></span>まりに<span class="ruby"><span class="rb">戻</span><span class="rt">もど</span></span>ることが<span class="ruby"><span class="rb">出来</span><span class="rt">でき</span></span>たなら<br>なんて、<span class="ruby"><span class="rb">思</span><span class="rt">おも</span></span>ってしまうよ<br>「おかえり」<br><span class="ruby"><span class="rb">届</span><span class="rt">とど</span></span>かず<span class="ruby"><span class="rb">零</span><span class="rt">こぼ</span></span>れた<span class="ruby"><span class="rb">言葉</span><span class="rt">ことば</span></span>に<br><span class="ruby"><span class="rb">笑</span><span class="rt">わら</span></span>った<br><span class="ruby"><span class="rb">少</span><span class="rt">すこ</span></span>し<span class="ruby"><span class="rb">冷</span><span class="rt">ひ</span></span>えた<span class="ruby"><span class="rb">朝</span><span class="rt">あさ</span></span>だ<br>    </div>  </div></div><h1>原文地址</h1><a href="https://utaten.com/lyric/ni20072001/" target="_blank" >たぶん 歌詞 YOASOBI</a><style>.lyricBody {    background: #fff;    padding: 10px;    user-select: none;    letter-spacing: 1px;    line-height: 2.3;}.lyricBody div.large {    font-size: 21px;}.lyricBody div.large span.ruby {    line-height: 2.6;}.lyricBody div span.ruby {    margin-bottom: 0.55em;    display: inline-table;    position: relative;    vertical-align: bottom;}.lyricBody span.ruby span.rb {    display: table-row;    position: relative;    line-height: 1.2;}.lyricBody div.large span.ruby span.rt {    font-size: 14px;}.lyricBody span.ruby span.rt {    display: table-header-group;    line-height: 1.8;    color: #999;    white-space: nowrap;    text-align: center;    letter-spacing: -0.001em;    before: '(';    after: ')';}</style>]]></content>
      
      
      <categories>
          
          <category> 日语之路 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 日语 </tag>
            
            <tag> 歌曲 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>NHK《简明日语》第09课 何時（なんじ）からですか。</title>
      <link href="/2024/09/27/NHK%E3%80%8A%E7%AE%80%E6%98%8E%E6%97%A5%E8%AF%AD%E3%80%8B%E7%AC%AC09%E8%AF%BE/"/>
      <url>/2024/09/27/NHK%E3%80%8A%E7%AE%80%E6%98%8E%E6%97%A5%E8%AF%AD%E3%80%8B%E7%AC%AC09%E8%AF%BE/</url>
      
        <content type="html"><![CDATA[<h1 id="NHK《简明日语》第09课"><a href="#NHK《简明日语》第09课" class="headerlink" title="NHK《简明日语》第09课"></a>NHK《简明日语》第09课</h1><h2 id="课程简介"><a href="#课程简介" class="headerlink" title="课程简介"></a>课程简介</h2><p>今天是铃木教授的课，好像有什么通知。</p><h2 id="教材详情"><a href="#教材详情" class="headerlink" title="教材详情"></a>教材详情</h2><h3 id="何時（なんじ）からですか。"><a href="#何時（なんじ）からですか。" class="headerlink" title="何時（なんじ）からですか。"></a><strong>何時（なんじ）からですか。</strong></h3><ul><li>先生: 明日、健康診断があります。 &#x2F;&#x2F; 明天有体检。</li><li>アンナ: 何時からですか。 &#x2F;&#x2F; 从几点开始？</li><li>先生: 午前９時から１１時までです。ここに８時半に集まって下さい。 &#x2F;&#x2F; 从上午9点到11点。请8点半在这儿集合。</li></ul><h3 id="语法要点"><a href="#语法要点" class="headerlink" title="语法要点"></a>语法要点</h3><p>何時（なんじ）</p><blockquote><p>「何」是“几”,「時」是“点”。「時」是表示时间单位的量词。</p></blockquote><table><thead><tr><th align="left">1:00</th><th>いちじ</th></tr></thead><tbody><tr><td align="left">1:30</td><td>いちじはん</td></tr><tr><td align="left">2:00</td><td>にじ</td></tr><tr><td align="left">2:30</td><td>にじはん</td></tr><tr><td align="left">3:00</td><td>さんじ</td></tr><tr><td align="left">3:30</td><td>さんじはん</td></tr><tr><td align="left">4:00</td><td>よじ</td></tr><tr><td align="left">4:30</td><td>よじはん</td></tr><tr><td align="left">5:00</td><td>ごじ</td></tr><tr><td align="left">5:30</td><td>ごじはん</td></tr><tr><td align="left">6:00</td><td>ろくじ</td></tr><tr><td align="left">6:30</td><td>ろくじはん</td></tr><tr><td align="left">7:00</td><td>しちじ</td></tr><tr><td align="left">7:30</td><td>しちじはん</td></tr><tr><td align="left">8:00</td><td>はちじ</td></tr><tr><td align="left">8:30</td><td>はちじはん</td></tr><tr><td align="left">9:00</td><td>くじ</td></tr><tr><td align="left">9:30</td><td>くじはん</td></tr><tr><td align="left">10:00</td><td>じゅうじ</td></tr><tr><td align="left">10:30</td><td>じゅうじはん</td></tr><tr><td align="left">11:00</td><td>じゅういちじ</td></tr><tr><td align="left">11:30</td><td>じゅういちじはん</td></tr><tr><td align="left">12:00</td><td>じゅうにじ</td></tr><tr><td align="left">12:30</td><td>じゅうにじはん</td></tr></tbody></table><p>像「集（あつ）まります」（集合）这样，「ます」前面的音节是<strong>「り」</strong>的时候，要把「ります」变成<strong>「って」</strong>。「集まります」变成「集まって」。「ます」前面的音节是<strong>「い」</strong>或<strong>「ち」</strong>的时候，也要变成<strong>「って」</strong>。</p><p>同样，如果「ます」前面的音节是<strong>「み」、「に」、「び」</strong>，则要变成<strong>「んで」</strong>。例如，「読（よ）みます」（读）变成「読んで」。</p><p>「ます」前面的音节是<strong>「き」</strong>的时候，要变成<strong>「いて」</strong>。「聞（き）きます」（听）变成「聞いて」。如果是<strong>「ぎ」</strong>，则变成<strong>「いで」</strong>。「急（いそ）ぎます」（抓紧）变成「急いで」。</p><blockquote><p>只有「行（い）きます」（去）是例外。变成「行って」。</p></blockquote><h3 id="单词"><a href="#单词" class="headerlink" title="单词"></a>单词</h3><table><thead><tr><th>明日</th></tr></thead><tbody><tr><td><strong>明天</strong></td></tr></tbody></table><table><thead><tr><th>今日</th></tr></thead><tbody><tr><td><strong>今天</strong></td></tr></tbody></table><table><thead><tr><th>昨日</th></tr></thead><tbody><tr><td><strong>考试</strong></td></tr></tbody></table><table><thead><tr><th>健康診断</th></tr></thead><tbody><tr><td><strong>体检</strong></td></tr><tr><td>「健康診断（けんこうしんだん）」是「健康（けんこう）」（健康）和「診断（しんだん）」（诊断）的合成词。</td></tr></tbody></table><table><thead><tr><th>時</th></tr></thead><tbody><tr><td><strong>点</strong></td></tr><tr><td>9点是「9時（くじ）」。4点是「4時（よじ）」。</td></tr></tbody></table><table><thead><tr><th>から</th></tr></thead><tbody><tr><td><strong>从</strong></td></tr><tr><td>表示时间或场所起点的助词。</td></tr></tbody></table><table><thead><tr><th>午前</th></tr></thead><tbody><tr><td><strong>上午</strong></td></tr></tbody></table><table><thead><tr><th>午後</th></tr></thead><tbody><tr><td><strong>下午</strong></td></tr></tbody></table><table><thead><tr><th>まで</th></tr></thead><tbody><tr><td><strong>到</strong></td></tr><tr><td>表示时间或场所终点的助词。</td></tr></tbody></table><table><thead><tr><th>半</th></tr></thead><tbody><tr><td><strong>半</strong></td></tr></tbody></table><table><thead><tr><th>集まります</th></tr></thead><tbody><tr><td><strong>集合</strong></td></tr></tbody></table><table><thead><tr><th>聞きます</th></tr></thead><tbody><tr><td><strong>听</strong></td></tr></tbody></table><table><thead><tr><th>急ぎます</th></tr></thead><tbody><tr><td><strong>抓紧</strong></td></tr></tbody></table><table><thead><tr><th>行きます</th></tr></thead><tbody><tr><td><strong>去</strong></td></tr></tbody></table><p>教材：<a href="https://www.nhk.or.jp/lesson/update/pdf/le9_zh_t.pdf">https://www.nhk.or.jp/lesson/update/pdf/le9_zh_t.pdf</a></p><h2 id="我的收获"><a href="#我的收获" class="headerlink" title="我的收获"></a>我的收获</h2><ul><li><strong>「い」、「ち」、「り」</strong>——<strong>「って」</strong>。</li><li><strong>「み」、「に」、「び」</strong>——<strong>「んで」</strong>。</li><li><strong>「き」</strong>——<strong>「いて」</strong></li><li><strong>「ぎ」</strong>——<strong>「いで」</strong></li><li>「行（い）きます」——「行って」</li></ul><h2 id="课程地址"><a href="#课程地址" class="headerlink" title="课程地址"></a>课程地址</h2><p><a href="https://www.nhk.or.jp/lesson/chinese/learn/list/9.html">https://www.nhk.or.jp/lesson/chinese/learn/list/9.html</a></p>]]></content>
      
      
      <categories>
          
          <category> 日语之路 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 日语 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>NHK《简明日语》第08课 もう一度（いちど）お願（ねが）いします。</title>
      <link href="/2024/09/24/NHK%E3%80%8A%E7%AE%80%E6%98%8E%E6%97%A5%E8%AF%AD%E3%80%8B%E7%AC%AC08%E8%AF%BE/"/>
      <url>/2024/09/24/NHK%E3%80%8A%E7%AE%80%E6%98%8E%E6%97%A5%E8%AF%AD%E3%80%8B%E7%AC%AC08%E8%AF%BE/</url>
      
        <content type="html"><![CDATA[<h1 id="NHK《简明日语》第08课"><a href="#NHK《简明日语》第08课" class="headerlink" title="NHK《简明日语》第08课"></a>NHK《简明日语》第08课</h1><h2 id="课程简介"><a href="#课程简介" class="headerlink" title="课程简介"></a>课程简介</h2><p>安娜正在大学里上铃木教授的日语课。</p><h2 id="教材详情"><a href="#教材详情" class="headerlink" title="教材详情"></a>教材详情</h2><h3 id="もう一度（いちど）お願（ねが）いします。"><a href="#もう一度（いちど）お願（ねが）いします。" class="headerlink" title="もう一度（いちど）お願（ねが）いします。"></a><strong>もう一度（いちど）お願（ねが）いします。</strong></h3><ul><li>先生: みなさん、これを覚えてください。試験によく出ます。 &#x2F;&#x2F; 请大家把这个记住。考试时经常会出。</li><li>学生: えっ。 &#x2F;&#x2F; 欸？</li><li>アンナ: 先生、もう一度お願いします。 &#x2F;&#x2F; 老师，请再说一遍。</li></ul><h3 id="语法要点"><a href="#语法要点" class="headerlink" title="语法要点"></a>语法要点</h3><p>动词的テ形</p><blockquote><p>在句子的中间使用动词时，也就是说，后面接续其他词的时候，要使用动词的活用形。<br>以「て」结尾的动词的活用形叫「テ形」。</p></blockquote><blockquote><p>例如：覚（おぼ）えます ⇒  覚えて</p></blockquote><table><thead><tr><th align="left">マス形</th><th>テ形</th></tr></thead><tbody><tr><td align="left">食（た）べます 吃</td><td>食べて</td></tr><tr><td align="left">覚（おぼ）えます 记</td><td>覚えて</td></tr><tr><td align="left">見（み）ます 看</td><td>見て</td></tr><tr><td align="left">来（き）ます 来</td><td>来て</td></tr><tr><td align="left">します 做</td><td>して</td></tr><tr><td align="left">勉強（べんきょう）します 学习</td><td>勉強して</td></tr></tbody></table><p><strong>动词的テ形＋ください</strong><br>请别人做某事时，可以在テ形动词后面加上「ください」（请）。动词的テ形，就是以「て」或者「で」结尾的活用形。</p><p>请别人做某事时，可以在テ形动词后面加上「ください」（请）。动词的テ形，就是以「て」或者「で」结尾的活用形。</p><p>例如，想请别人记住什么事情，就可以在「覚えます」（记）的テ形、「覚えて」后面加上「ください」，变成「覚えてください」（请记）。</p><blockquote><p>基本模式只需把「ます」变成「て」。<br>例如，「食（た）べます」（吃）的テ形是「食べて」。「食べてください」意思就是“请吃”。「見（み）ます」（看）的テ形是「見て」，「見てください」意思就是“请看”。「します」（做）的テ形是「して」，「してください」意思就是“请做”。「来（き）ます」（来）的テ形是「来て」，「来てください」意思就是“请来”。</p><p>只要把动词的「ます」变成「て」，就变成了テ形，方法很简单。像「覚えます」（记）这样，「ます」前面的音节的母音是「え」的动词，还有像「見ます」（看）这样，「ます」前面的音节的母音是「い」的动词的一部分，属于这种变换模式。</p></blockquote><h3 id="单词"><a href="#单词" class="headerlink" title="单词"></a>单词</h3><table><thead><tr><th>皆さん</th></tr></thead><tbody><tr><td><strong>大家</strong></td></tr></tbody></table><table><thead><tr><th>覚えます</th></tr></thead><tbody><tr><td><strong>记</strong></td></tr></tbody></table><table><thead><tr><th>試験</th></tr></thead><tbody><tr><td><strong>考试</strong></td></tr></tbody></table><table><thead><tr><th>よく</th></tr></thead><tbody><tr><td><strong>经常</strong></td></tr></tbody></table><table><thead><tr><th>出ます</th></tr></thead><tbody><tr><td><strong>出</strong></td></tr></tbody></table><table><thead><tr><th>えっ</th></tr></thead><tbody><tr><td><strong>欸？</strong></td></tr><tr><td>「えっ」表示吃惊。</td></tr></tbody></table><table><thead><tr><th>先生</th></tr></thead><tbody><tr><td><strong>老师</strong></td></tr></tbody></table><table><thead><tr><th>教授</th></tr></thead><tbody><tr><td><strong>教授</strong></td></tr></tbody></table><table><thead><tr><th>もう一度</th></tr></thead><tbody><tr><td><strong>再一次</strong></td></tr></tbody></table><table><thead><tr><th>お願いします</th></tr></thead><tbody><tr><td><strong>麻烦您，拜托您</strong></td></tr></tbody></table><table><thead><tr><th>食べます</th></tr></thead><tbody><tr><td><strong>吃</strong></td></tr></tbody></table><table><thead><tr><th>見ます</th></tr></thead><tbody><tr><td><strong>看</strong></td></tr></tbody></table><table><thead><tr><th>来ます</th></tr></thead><tbody><tr><td><strong>来</strong></td></tr></tbody></table><p>教材：<a href="https://www.nhk.or.jp/lesson/update/pdf/le8_zh_t.pdf">https://www.nhk.or.jp/lesson/update/pdf/le8_zh_t.pdf</a></p><h2 id="我的收获"><a href="#我的收获" class="headerlink" title="我的收获"></a>我的收获</h2><ul><li>「<strong>もう一度お願いします</strong>」在没有听清对方说话的时候可以使用</li></ul><h2 id="课程地址"><a href="#课程地址" class="headerlink" title="课程地址"></a>课程地址</h2><p><a href="https://www.nhk.or.jp/lesson/chinese/learn/list/8.html">https://www.nhk.or.jp/lesson/chinese/learn/list/8.html</a></p>]]></content>
      
      
      <categories>
          
          <category> 日语之路 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 日语 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>群青 歌词 YOASOBI</title>
      <link href="/2024/03/06/%E6%AD%8C%E8%AF%8D%E7%BE%A4%E9%9D%92/"/>
      <url>/2024/03/06/%E6%AD%8C%E8%AF%8D%E7%BE%A4%E9%9D%92/</url>
      
        <content type="html"><![CDATA[<h1>群青 歌词</h1><p>作词：Ayase  </p><p>作曲：Ayase  </p><div class="lyricBody">  <div class="large">    <div class="hiragana">      <span class="ruby"><span class="rb">嗚呼</span><span class="rt">ああ</span></span>、いつもの<span class="ruby"><span class="rb">様</span><span class="rt">よう</span></span>に<br><span class="ruby"><span class="rb">過</span><span class="rt">す</span></span>ぎる<span class="ruby"><span class="rb">日々</span><span class="rt">ひび</span></span>にあくびが<span class="ruby"><span class="rb">出</span><span class="rt">で</span></span>る<br>さんざめく<span class="ruby"><span class="rb">夜</span><span class="rt">よる</span></span>、<span class="ruby"><span class="rb">越</span><span class="rt">こ</span></span>え、<span class="ruby"><span class="rb">今日</span><span class="rt">きょう</span></span>も<br><span class="ruby"><span class="rb">渋谷</span><span class="rt">しぶや</span></span>の<span class="ruby"><span class="rb">街</span><span class="rt">まち</span></span>に<span class="ruby"><span class="rb">朝</span><span class="rt">あさ</span></span>が<span class="ruby"><span class="rb">降</span><span class="rt">ふ</span></span>る<br>どこか<span class="ruby"><span class="rb">虚</span><span class="rt">むな</span></span>しいような<br>そんな<span class="ruby"><span class="rb">気持</span><span class="rt">きも</span></span>ち<br>つまらないな<br>でもそれでいい<br>そんなもんさ<br>これでいい<br><br><span class="ruby"><span class="rb">知</span><span class="rt">し</span></span>らず<span class="ruby"><span class="rb">知</span><span class="rt">し</span></span>らず<span class="ruby"><span class="rb">隠</span><span class="rt">かく</span></span>してた<br><span class="ruby"><span class="rb">本当</span><span class="rt">ほんとう</span></span>の<span class="ruby"><span class="rb">声</span><span class="rt">こえ</span></span>を<span class="ruby"><span class="rb">響</span><span class="rt">ひび</span></span>かせてよ、ほら<br><span class="ruby"><span class="rb">見</span><span class="rt">み</span></span>ないフリしていても<br><span class="ruby"><span class="rb">確</span><span class="rt">たし</span></span>かにそこにある<br><br><span class="ruby"><span class="rb">感</span><span class="rt">かん</span></span>じたままに<span class="ruby"><span class="rb">描</span><span class="rt">えが</span></span>く<br><span class="ruby"><span class="rb">自分</span><span class="rt">じぶん</span></span>で<span class="ruby"><span class="rb">選</span><span class="rt">えら</span></span>んだその<span class="ruby"><span class="rb">色</span><span class="rt">いろ</span></span>で<br><span class="ruby"><span class="rb">眠</span><span class="rt">ねむ</span></span>い<span class="ruby"><span class="rb">空気</span><span class="rt">くうき</span></span><span class="ruby"><span class="rb">纏</span><span class="rt">まと</span></span>う<span class="ruby"><span class="rb">朝</span><span class="rt">あさ</span></span>に<br><span class="ruby"><span class="rb">訪</span><span class="rt">おとず</span></span>れた<span class="ruby"><span class="rb">青</span><span class="rt">あお</span></span>い<span class="ruby"><span class="rb">世界</span><span class="rt">せかい</span></span><br><span class="ruby"><span class="rb">好</span><span class="rt">す</span></span>きなものを<span class="ruby"><span class="rb">好</span><span class="rt">す</span></span>きだと<span class="ruby"><span class="rb">言</span><span class="rt">い</span></span>う<br><span class="ruby"><span class="rb">怖</span><span class="rt">こわ</span></span>くて<span class="ruby"><span class="rb">仕方</span><span class="rt">しかた</span></span>ないけど<br><span class="ruby"><span class="rb">本当</span><span class="rt">ほんとう</span></span>の<span class="ruby"><span class="rb">自分</span><span class="rt">じぶん</span></span><br><span class="ruby"><span class="rb">出会</span><span class="rt">であ</span></span>えた<span class="ruby"><span class="rb">気</span><span class="rt">き</span></span>がしたんだ<br><br><span class="ruby"><span class="rb">嗚呼</span><span class="rt">ああ</span></span>、<span class="ruby"><span class="rb">手</span><span class="rt">て</span></span>を<span class="ruby"><span class="rb">伸</span><span class="rt">の</span></span>ばせば<span class="ruby"><span class="rb">伸</span><span class="rt">の</span></span>ばすほどに<br><span class="ruby"><span class="rb">遠</span><span class="rt">とお</span></span>くへゆく<br><span class="ruby"><span class="rb">思</span><span class="rt">おも</span></span>うようにいかない、<span class="ruby"><span class="rb">今日</span><span class="rt">きょう</span></span>も<br>また<span class="ruby"><span class="rb">慌</span><span class="rt">あわ</span></span>ただしくもがいてる<br><span class="ruby"><span class="rb">悔</span><span class="rt">くや</span></span>しい<span class="ruby"><span class="rb">気持</span><span class="rt">きも</span></span>ちも<br>ただ<span class="ruby"><span class="rb">情</span><span class="rt">なさ</span></span>けなくて<br><span class="ruby"><span class="rb">涙</span><span class="rt">なみだ</span></span>が<span class="ruby"><span class="rb">出</span><span class="rt">で</span></span>る<br><span class="ruby"><span class="rb">踏</span><span class="rt">ふ</span></span>み<span class="ruby"><span class="rb">込</span><span class="rt">こ</span></span>むほど<br><span class="ruby"><span class="rb">苦</span><span class="rt">くる</span></span>しくなる<br><span class="ruby"><span class="rb">痛</span><span class="rt">いた</span></span>くもなる<br><br><span class="ruby"><span class="rb">感</span><span class="rt">かん</span></span>じたままに<span class="ruby"><span class="rb">進</span><span class="rt">すす</span></span>む<br><span class="ruby"><span class="rb">自分</span><span class="rt">じぶん</span></span>で<span class="ruby"><span class="rb">選</span><span class="rt">えら</span></span>んだこの<span class="ruby"><span class="rb">道</span><span class="rt">みち</span></span>を<br><span class="ruby"><span class="rb">重</span><span class="rt">おも</span></span>いまぶた<span class="ruby"><span class="rb">擦</span><span class="rt">こす</span></span>る<span class="ruby"><span class="rb">夜</span><span class="rt">よる</span></span>に<br>しがみついた<span class="ruby"><span class="rb">青</span><span class="rt">あお</span></span>い<span class="ruby"><span class="rb">誓</span><span class="rt">ちか</span></span>い<br><span class="ruby"><span class="rb">好</span><span class="rt">す</span></span>きなことを<span class="ruby"><span class="rb">続</span><span class="rt">つづ</span></span>けること<br>それは「<span class="ruby"><span class="rb">楽</span><span class="rt">たの</span></span>しい」だけじゃない<br><span class="ruby"><span class="rb">本当</span><span class="rt">ほんとう</span></span>にできる?<br><span class="ruby"><span class="rb">不安</span><span class="rt">ふあん</span></span>になるけど<br><br><span class="ruby"><span class="rb">何枚</span><span class="rt">なんまい</span></span>でも<br>ほら<span class="ruby"><span class="rb">何枚</span><span class="rt">なんまい</span></span>でも<br><span class="ruby"><span class="rb">自信</span><span class="rt">じしん</span></span>がないから<span class="ruby"><span class="rb">描</span><span class="rt">えが</span></span>いてきたんだよ<br><span class="ruby"><span class="rb">何回</span><span class="rt">なんかい</span></span>でも<br>ほら<span class="ruby"><span class="rb">何回</span><span class="rt">なんかい</span></span>でも<br><span class="ruby"><span class="rb">積</span><span class="rt">つ</span></span>み<span class="ruby"><span class="rb">上</span><span class="rt">あ</span></span>げてきたことが<span class="ruby"><span class="rb">武器</span><span class="rt">ぶき</span></span>になる<br><span class="ruby"><span class="rb">周</span><span class="rt">まわ</span></span>りを<span class="ruby"><span class="rb">見</span><span class="rt">み</span></span>たって<br><span class="ruby"><span class="rb">誰</span><span class="rt">だれ</span></span>と<span class="ruby"><span class="rb">比</span><span class="rt">くら</span></span>べたって<br><span class="ruby"><span class="rb">僕</span><span class="rt">ぼく</span></span>にしかできないことはなんだ<br><span class="ruby"><span class="rb">今</span><span class="rt">いま</span></span>でも<span class="ruby"><span class="rb">自信</span><span class="rt">じしん</span></span>なんかない<br>それでも<br><br><span class="ruby"><span class="rb">感</span><span class="rt">かん</span></span>じたことない<span class="ruby"><span class="rb">気持</span><span class="rt">きも</span></span>ち<br><span class="ruby"><span class="rb">知</span><span class="rt">し</span></span>らずにいた<span class="ruby"><span class="rb">想</span><span class="rt">おも</span></span>い<br>あの<span class="ruby"><span class="rb">日</span><span class="rt">ひ</span></span><span class="ruby"><span class="rb">踏</span><span class="rt">ふ</span></span>み<span class="ruby"><span class="rb">出</span><span class="rt">だ</span></span>して<br><span class="ruby"><span class="rb">初</span><span class="rt">はじ</span></span>めて<span class="ruby"><span class="rb">感</span><span class="rt">かん</span></span>じたこの<span class="ruby"><span class="rb">痛</span><span class="rt">いた</span></span>みも<span class="ruby"><span class="rb">全部</span><span class="rt">ぜんぶ</span></span><br><span class="ruby"><span class="rb">好</span><span class="rt">す</span></span>きなものと<span class="ruby"><span class="rb">向</span><span class="rt">む</span></span>き<span class="ruby"><span class="rb">合</span><span class="rt">あ</span></span>うことで<br><span class="ruby"><span class="rb">触</span><span class="rt">ふ</span></span>れたまだ<span class="ruby"><span class="rb">小</span><span class="rt">ちい</span></span>さな<span class="ruby"><span class="rb">光</span><span class="rt">ひかり</span></span><br><span class="ruby"><span class="rb">大丈夫</span><span class="rt">だいじょうぶ</span></span>、<span class="ruby"><span class="rb">行</span><span class="rt">い</span></span>こう、あとは<span class="ruby"><span class="rb">楽</span><span class="rt">たの</span></span>しむだけだ<br><br><span class="ruby"><span class="rb">全</span><span class="rt">すべ</span></span>てを<span class="ruby"><span class="rb">賭</span><span class="rt">か</span></span>けて<span class="ruby"><span class="rb">描</span><span class="rt">えが</span></span>く<br><span class="ruby"><span class="rb">自分</span><span class="rt">じぶん</span></span>にしか<span class="ruby"><span class="rb">出</span><span class="rt">だ</span></span>せない<span class="ruby"><span class="rb">色</span><span class="rt">いろ</span></span>で<br><span class="ruby"><span class="rb">朝</span><span class="rt">あさ</span></span>も<span class="ruby"><span class="rb">夜</span><span class="rt">よる</span></span>も<span class="ruby"><span class="rb">走</span><span class="rt">はし</span></span>り<span class="ruby"><span class="rb">続</span><span class="rt">つづ</span></span>け<br><span class="ruby"><span class="rb">見</span><span class="rt">み</span></span>つけ<span class="ruby"><span class="rb">出</span><span class="rt">だ</span></span>した<span class="ruby"><span class="rb">青</span><span class="rt">あお</span></span>い<span class="ruby"><span class="rb">光</span><span class="rt">ひかり</span></span><br><span class="ruby"><span class="rb">好</span><span class="rt">す</span></span>きなものと<span class="ruby"><span class="rb">向</span><span class="rt">む</span></span>き<span class="ruby"><span class="rb">合</span><span class="rt">あ</span></span>うこと<br><span class="ruby"><span class="rb">今</span><span class="rt">いま</span></span>だって<span class="ruby"><span class="rb">怖</span><span class="rt">こわ</span></span>いことだけど<br>もう<span class="ruby"><span class="rb">今</span><span class="rt">いま</span></span>はあの<span class="ruby"><span class="rb">日</span><span class="rt">ひ</span></span>の<span class="ruby"><span class="rb">透明</span><span class="rt">とうめい</span></span>な<span class="ruby"><span class="rb">僕</span><span class="rt">ぼく</span></span>じゃない<br>ありのままの<br>かけがえの<span class="ruby"><span class="rb">無</span><span class="rt">な</span></span>い<span class="ruby"><span class="rb">僕</span><span class="rt">ぼく</span></span>だ<br><br><span class="ruby"><span class="rb">知</span><span class="rt">し</span></span>らず<span class="ruby"><span class="rb">知</span><span class="rt">し</span></span>らず<span class="ruby"><span class="rb">隠</span><span class="rt">かく</span></span>してた<br><span class="ruby"><span class="rb">本当</span><span class="rt">ほんとう</span></span>の<span class="ruby"><span class="rb">声</span><span class="rt">こえ</span></span>を<span class="ruby"><span class="rb">響</span><span class="rt">ひび</span></span>かせてよ、ほら<br><span class="ruby"><span class="rb">見</span><span class="rt">み</span></span>ないフリしていても<br><span class="ruby"><span class="rb">確</span><span class="rt">たし</span></span>かにそこに<span class="ruby"><span class="rb">今</span><span class="rt">いま</span></span>もそこにあるよ<br><span class="ruby"><span class="rb">知</span><span class="rt">し</span></span>らず<span class="ruby"><span class="rb">知</span><span class="rt">し</span></span>らず<span class="ruby"><span class="rb">隠</span><span class="rt">かく</span></span>してた<br><span class="ruby"><span class="rb">本当</span><span class="rt">ほんとう</span></span>の<span class="ruby"><span class="rb">声</span><span class="rt">こえ</span></span>を<span class="ruby"><span class="rb">響</span><span class="rt">ひび</span></span>かせてよ、さあ<br><span class="ruby"><span class="rb">見</span><span class="rt">み</span></span>ないフリしていても<br><span class="ruby"><span class="rb">確</span><span class="rt">たし</span></span>かにそこに<span class="ruby"><span class="rb">君</span><span class="rt">きみ</span></span>の<span class="ruby"><span class="rb">中</span><span class="rt">なか</span></span>に<br>    </div>  </div></div><h1>原文地址</h1><a href="https://utaten.com/lyric/ma20090214/" target="_blank" >群青 歌詞 YOASOBI ブルボン「アルフォートミニチョコレート」CMソング</a><style>.lyricBody {    background: #fff;    padding: 10px;    user-select: none;    letter-spacing: 1px;    line-height: 2.3;}.lyricBody div.large {    font-size: 21px;}.lyricBody div.large span.ruby {    line-height: 2.6;}.lyricBody div span.ruby {    margin-bottom: 0.55em;    display: inline-table;    position: relative;    vertical-align: bottom;}.lyricBody span.ruby span.rb {    display: table-row;    position: relative;    line-height: 1.2;}.lyricBody div.large span.ruby span.rt {    font-size: 14px;}.lyricBody span.ruby span.rt {    display: table-header-group;    line-height: 1.8;    color: #999;    white-space: nowrap;    text-align: center;    letter-spacing: -0.001em;    before: '(';    after: ')';}</style>]]></content>
      
      
      <categories>
          
          <category> 日语之路 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 日语 </tag>
            
            <tag> 歌曲 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Dota2LOD人机对战配置 dota2LOD快速配置</title>
      <link href="/2023/11/09/Dota2LOD%E4%BA%BA%E6%9C%BA%E5%AF%B9%E6%88%98%E9%85%8D%E7%BD%AE/"/>
      <url>/2023/11/09/Dota2LOD%E4%BA%BA%E6%9C%BA%E5%AF%B9%E6%88%98%E9%85%8D%E7%BD%AE/</url>
      
        <content type="html"><![CDATA[<ul><li>最新版7.35b<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span><span class="attr">&quot;lodOptionBanning&quot;</span><span class="punctuation">:</span><span class="number">1</span><span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;lodOptionBanningHostBanning&quot;</span><span class="punctuation">:</span><span class="number">0</span><span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;lodOptionBanningMaxBans&quot;</span><span class="punctuation">:</span><span class="number">0</span><span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;lodOptionBanningMaxHeroBans&quot;</span><span class="punctuation">:</span><span class="number">0</span><span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;lodOptionBanningUseBanList&quot;</span><span class="punctuation">:</span><span class="number">0</span><span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;lodOptionSlots&quot;</span><span class="punctuation">:</span><span class="number">6</span><span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;lodOptionCommonMaxSlots&quot;</span><span class="punctuation">:</span><span class="number">6</span><span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;lodOptionUlts&quot;</span><span class="punctuation">:</span><span class="number">2</span><span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;lodOptionCommonMaxUlts&quot;</span><span class="punctuation">:</span><span class="number">6</span><span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;lodOptionGamemode&quot;</span><span class="punctuation">:</span><span class="number">-1</span><span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;lodOptionCommonGamemode&quot;</span><span class="punctuation">:</span><span class="number">4</span><span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;lodOptionCommonMaxSkills&quot;</span><span class="punctuation">:</span><span class="number">6</span><span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;lodOptionBanningBlockTrollCombos&quot;</span><span class="punctuation">:</span><span class="number">0</span><span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;lodOptionBanningBanInvis&quot;</span><span class="punctuation">:</span><span class="number">0</span><span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;lodOptionGameSpeedStartingLevel&quot;</span><span class="punctuation">:</span><span class="number">1</span><span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;lodOptionGameSpeedMaxLevel&quot;</span><span class="punctuation">:</span><span class="number">100</span><span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;lodOptionGameSpeedStartingGold&quot;</span><span class="punctuation">:</span><span class="number">0</span><span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;lodOptionGameSpeedGoldTickRate&quot;</span><span class="punctuation">:</span><span class="number">0</span><span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;lodOptionGameSpeedGoldModifier&quot;</span><span class="punctuation">:</span><span class="number">100</span><span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;lodOptionGameSpeedEXPModifier&quot;</span><span class="punctuation">:</span><span class="number">100</span><span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;lodOptionGameSpeedRespawnTimePercentage&quot;</span><span class="punctuation">:</span><span class="number">0</span><span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;lodOptionGameSpeedRespawnTimeConstant&quot;</span><span class="punctuation">:</span><span class="number">0</span><span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;lodOptionGameSpeedRespawnTimeMax&quot;</span><span class="punctuation">:</span><span class="number">1</span><span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;lodOptionGameSpeedBuybackCooldown&quot;</span><span class="punctuation">:</span><span class="number">0</span><span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;lodOptionGameSpeedTowersPerLane&quot;</span><span class="punctuation">:</span><span class="number">3</span><span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;lodOptionGameSpeedUpgradedUlts&quot;</span><span class="punctuation">:</span><span class="number">1</span><span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;lodOptionGameSpeedUpgradedUltsShard&quot;</span><span class="punctuation">:</span><span class="number">1</span><span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;lodOptionGameSpeedFreeCourier&quot;</span><span class="punctuation">:</span><span class="number">1</span><span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;lodOptionGameSpeedVoting&quot;</span><span class="punctuation">:</span><span class="number">0</span><span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;lodOptionBotsRadiant&quot;</span><span class="punctuation">:</span><span class="number">3</span><span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;lodOptionBotsDire&quot;</span><span class="punctuation">:</span><span class="number">10</span><span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;lodOptionBotsUnfairBalance&quot;</span><span class="punctuation">:</span><span class="number">1</span><span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;lodOptionAdvancedHeroAbilities&quot;</span><span class="punctuation">:</span><span class="number">1</span><span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;lodOptionAdvancedNeutralAbilities&quot;</span><span class="punctuation">:</span><span class="number">1</span><span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;lodOptionAdvancedNeutralWraithNight&quot;</span><span class="punctuation">:</span><span class="number">1</span><span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;lodOptionAdvancedCustomSkills&quot;</span><span class="punctuation">:</span><span class="number">1</span><span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;lodOptionAdvancedOPAbilities&quot;</span><span class="punctuation">:</span><span class="number">0</span><span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;lodOptionAdvancedHidePicks&quot;</span><span class="punctuation">:</span><span class="number">1</span><span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;lodOptionAdvancedUniqueSkills&quot;</span><span class="punctuation">:</span><span class="number">0</span><span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;lodOptionAdvancedUniqueHeroes&quot;</span><span class="punctuation">:</span><span class="number">0</span><span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;lodOptionAdvancedSelectPrimaryAttr&quot;</span><span class="punctuation">:</span><span class="number">1</span><span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;lodOptionCrazyNoCamping&quot;</span><span class="punctuation">:</span><span class="number">0</span><span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;lodOptionCrazyUniversalShop&quot;</span><span class="punctuation">:</span><span class="number">1</span><span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;lodOptionCrazyAllVision&quot;</span><span class="punctuation">:</span><span class="number">0</span><span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;lodOptionCrazyMulticast&quot;</span><span class="punctuation">:</span><span class="number">1</span><span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;lodOptionCrazyWTF&quot;</span><span class="punctuation">:</span><span class="number">0</span><span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;lodOptionIngameBuilder&quot;</span><span class="punctuation">:</span><span class="number">0</span><span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;lodOptionMirrorHeroes&quot;</span><span class="punctuation">:</span><span class="number">20</span><span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;lodOptionCommonMirrorHeroes&quot;</span><span class="punctuation">:</span><span class="number">20</span><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure></li></ul>]]></content>
      
      
      <categories>
          
          <category> 游戏世界 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 游戏 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>猫 歌词 DISH//</title>
      <link href="/2023/04/14/%E6%AD%8C%E8%AF%8D%E7%8C%AB/"/>
      <url>/2023/04/14/%E6%AD%8C%E8%AF%8D%E7%8C%AB/</url>
      
        <content type="html"><![CDATA[<h1>猫 歌词</h1><p>作词：あいみょん  </p><p>作曲：あいみょん  </p><div class="lyricBody">  <div class="large">    <div class="hiragana">    <span class="ruby"><span class="rb">夕焼</span><span class="rt">ゆうや</span></span>けが<span class="ruby"><span class="rb">燃</span><span class="rt">も</span></span>えてこの<span class="ruby"><span class="rb">街</span><span class="rt">まち</span></span>ごと<br><span class="ruby"><span class="rb">飲</span><span class="rt">の</span></span>み<span class="ruby"><span class="rb">込</span><span class="rt">こ</span></span>んでしまいそうな<span class="ruby"><span class="rb">今日</span><span class="rt">きょう</span></span>に<br><span class="ruby"><span class="rb">僕</span><span class="rt">ぼく</span></span>は<span class="ruby"><span class="rb">君</span><span class="rt">きみ</span></span>を<span class="ruby"><span class="rb">手放</span><span class="rt">てばな</span></span>してしまった<br><br><span class="ruby"><span class="rb">明日</span><span class="rt">あした</span></span>が<span class="ruby"><span class="rb">不安</span><span class="rt">ふあん</span></span>だ とても<span class="ruby"><span class="rb">嫌</span><span class="rt">いや</span></span>だ<br>だからこの<span class="ruby"><span class="rb">僕</span><span class="rt">ぼく</span></span>も<span class="ruby"><span class="rb">一緒</span><span class="rt">いっしょ</span></span>に<br><span class="ruby"><span class="rb">飲</span><span class="rt">の</span></span>み<span class="ruby"><span class="rb">込</span><span class="rt">こ</span></span>んでしまえよ<span class="ruby"><span class="rb">夕焼</span><span class="rt">ゆうや</span></span>け<br><br>だけどもそうはいかないよな<br><span class="ruby"><span class="rb">明日</span><span class="rt">あした</span></span>ってウザいほど<span class="ruby"><span class="rb">来</span><span class="rt">く</span></span>るよな<br><span class="ruby"><span class="rb">眠</span><span class="rt">ねむ</span></span>たい<span class="ruby"><span class="rb">夜</span><span class="rt">よる</span></span>になんだか<span class="ruby"><span class="rb">笑</span><span class="rt">わら</span></span>っちゃう<br><br><span class="ruby"><span class="rb">家</span><span class="rt">うち</span></span>まで<span class="ruby"><span class="rb">帰</span><span class="rt">かえ</span></span>ろう <span class="ruby"><span class="rb">1人</span><span class="rt">ひとり</span></span>で<span class="ruby"><span class="rb">帰</span><span class="rt">かえ</span></span>ろう<br><span class="ruby"><span class="rb">昨日</span><span class="rt">きのう</span></span>のことなど <span class="ruby"><span class="rb">幻</span><span class="rt">まぼろし</span></span>だと<span class="ruby"><span class="rb">思</span><span class="rt">おも</span></span>おう<br><span class="ruby"><span class="rb">君</span><span class="rt">きみ</span></span>の<span class="ruby"><span class="rb">顔</span><span class="rt">かお</span></span>なんて<span class="ruby"><span class="rb">忘</span><span class="rt">わす</span></span>れてやるさ<br><span class="ruby"><span class="rb">馬鹿馬鹿</span><span class="rt">ばかばか</span></span>しいだろ、そうだろ<br><br><span class="ruby"><span class="rb">君</span><span class="rt">きみ</span></span>がいなくなった<span class="ruby"><span class="rb">日々</span><span class="rt">ひび</span></span>も<br>このどうしようもない<span class="ruby"><span class="rb">気</span><span class="rt">け</span></span>だるさも<br><span class="ruby"><span class="rb">心</span><span class="rt">こころ</span></span>と<span class="ruby"><span class="rb">体</span><span class="rt">からだ</span></span>が<span class="ruby"><span class="rb">喧嘩</span><span class="rt">けんか</span></span>して<br><span class="ruby"><span class="rb">頼</span><span class="rt">たよ</span></span>りない<span class="ruby"><span class="rb">僕</span><span class="rt">ぼく</span></span>は<span class="ruby"><span class="rb">寝転</span><span class="rt">ねころ</span></span>んで<br><span class="ruby"><span class="rb">猫</span><span class="rt">ねこ</span></span>になったんだよな<span class="ruby"><span class="rb">君</span><span class="rt">きみ</span></span>は<br>いつかフラッと<span class="ruby"><span class="rb">現</span><span class="rt">あらわ</span></span>れてくれ<br><span class="ruby"><span class="rb">何気</span><span class="rt">なにげ</span></span>ない<span class="ruby"><span class="rb">毎日</span><span class="rt">まいにち</span></span>を<span class="ruby"><span class="rb">君色</span><span class="rt">きみいろ</span></span>に<span class="ruby"><span class="rb">染</span><span class="rt">そ</span></span>めておくれよ<br><br><span class="ruby"><span class="rb">夕焼</span><span class="rt">ゆうや</span></span>けが<span class="ruby"><span class="rb">燃</span><span class="rt">も</span></span>えてこの<span class="ruby"><span class="rb">街</span><span class="rt">まち</span></span>ごと<br><span class="ruby"><span class="rb">飲</span><span class="rt">の</span></span>み<span class="ruby"><span class="rb">込</span><span class="rt">こ</span></span>んでしまいそうな<span class="ruby"><span class="rb">今日</span><span class="rt">きょう</span></span>に<br><span class="ruby"><span class="rb">僕</span><span class="rt">ぼく</span></span>は<span class="ruby"><span class="rb">君</span><span class="rt">きみ</span></span>を<span class="ruby"><span class="rb">手放</span><span class="rt">てばな</span></span>してしまった<br><br><span class="ruby"><span class="rb">若</span><span class="rt">わか</span></span>すぎる<span class="ruby"><span class="rb">僕</span><span class="rt">ぼく</span></span>らはまた1から<br><span class="ruby"><span class="rb">出会</span><span class="rt">であ</span></span>うことは<span class="ruby"><span class="rb">可能</span><span class="rt">かのう</span></span>なのかな<br><span class="ruby"><span class="rb">願</span><span class="rt">ねが</span></span>うだけ<span class="ruby"><span class="rb">無駄</span><span class="rt">むだ</span></span>ならもうダメだ<br><br><span class="ruby"><span class="rb">家</span><span class="rt">うち</span></span>までつくのが こんなにも<span class="ruby"><span class="rb">嫌</span><span class="rt">いや</span></span>だ<br><span class="ruby"><span class="rb">歩</span><span class="rt">ある</span></span>くスピードは<br><span class="ruby"><span class="rb">君</span><span class="rt">きみ</span></span>が<span class="ruby"><span class="rb">隣</span><span class="rt">となり</span></span>にいる<span class="ruby"><span class="rb">時</span><span class="rt">とき</span></span>のまんま<br><span class="ruby"><span class="rb">想</span><span class="rt">おも</span></span>い<span class="ruby"><span class="rb">出</span><span class="rt">で</span></span><span class="ruby"><span class="rb">巡</span><span class="rt">めぐ</span></span>らせ<br>がんじがらめのため<span class="ruby"><span class="rb">息</span><span class="rt">いき</span></span>ばっか<br><span class="ruby"><span class="rb">馬鹿</span><span class="rt">ばか</span></span>にしろよ、<span class="ruby"><span class="rb">笑</span><span class="rt">わら</span></span>えよ<br><br><span class="ruby"><span class="rb">君</span><span class="rt">きみ</span></span>がいなくなった<span class="ruby"><span class="rb">日々</span><span class="rt">ひび</span></span>は<br><span class="ruby"><span class="rb">面白</span><span class="rt">おもしろ</span></span>いくらいにつまらない<br><span class="ruby"><span class="rb">全力</span><span class="rt">ぜんりょく</span></span>で<span class="ruby"><span class="rb">忘</span><span class="rt">わす</span></span>れようとするけど<br><span class="ruby"><span class="rb">全身</span><span class="rt">ぜんしん</span></span>で<span class="ruby"><span class="rb">君</span><span class="rt">きみ</span></span>を<span class="ruby"><span class="rb">求</span><span class="rt">もと</span></span>めてる<br><span class="ruby"><span class="rb">猫</span><span class="rt">ねこ</span></span>になったんだよな<span class="ruby"><span class="rb">君</span><span class="rt">きみ</span></span>は<br>いつかまたあの<span class="ruby"><span class="rb">声</span><span class="rt">こえ</span></span>を<span class="ruby"><span class="rb">聞</span><span class="rt">き</span></span>かせてよ<br><span class="ruby"><span class="rb">矛盾</span><span class="rt">むじゅん</span></span>ばっかで<span class="ruby"><span class="rb">無茶苦茶</span><span class="rt">むちゃくちゃ</span></span>な<span class="ruby"><span class="rb">僕</span><span class="rt">ぼく</span></span>を<br><span class="ruby"><span class="rb">慰</span><span class="rt">なぐさ</span></span>めてほしい<br><br><span class="ruby"><span class="rb">君</span><span class="rt">きみ</span></span>がいなくなった<span class="ruby"><span class="rb">日々</span><span class="rt">ひび</span></span>も<br>このどうしようもない<span class="ruby"><span class="rb">気</span><span class="rt">け</span></span>だるさも<br><span class="ruby"><span class="rb">心</span><span class="rt">こころ</span></span>と<span class="ruby"><span class="rb">体</span><span class="rt">からだ</span></span>が<span class="ruby"><span class="rb">喧嘩</span><span class="rt">けんか</span></span>して<br><span class="ruby"><span class="rb">頼</span><span class="rt">たよ</span></span>りない<span class="ruby"><span class="rb">僕</span><span class="rt">ぼく</span></span>は<span class="ruby"><span class="rb">寝転</span><span class="rt">ねころ</span></span>んで<br><span class="ruby"><span class="rb">猫</span><span class="rt">ねこ</span></span>になったんだよな<span class="ruby"><span class="rb">君</span><span class="rt">きみ</span></span>は<br>いつかフラッと<span class="ruby"><span class="rb">現</span><span class="rt">あらわ</span></span>れてくれ<br><span class="ruby"><span class="rb">何気</span><span class="rt">なにげ</span></span>ない<span class="ruby"><span class="rb">毎日</span><span class="rt">まいにち</span></span>を<span class="ruby"><span class="rb">君色</span><span class="rt">きみいろ</span></span>に<span class="ruby"><span class="rb">染</span><span class="rt">そ</span></span>めておくれよ<br><br><span class="ruby"><span class="rb">君</span><span class="rt">きみ</span></span>がもし<span class="ruby"><span class="rb">捨</span><span class="rt">す</span></span>て<span class="ruby"><span class="rb">猫</span><span class="rt">ねこ</span></span>だったら<br>この<span class="ruby"><span class="rb">腕</span><span class="rt">うで</span></span>の<span class="ruby"><span class="rb">中</span><span class="rt">なか</span></span>で<span class="ruby"><span class="rb">抱</span><span class="rt">だ</span></span>きしめるよ<br>ケガしてるならその<span class="ruby"><span class="rb">傷</span><span class="rt">きず</span></span><span class="ruby"><span class="rb">拭</span><span class="rt">ぬぐ</span></span>うし<br><span class="ruby"><span class="rb">精一杯</span><span class="rt">せいいっぱい</span></span>の<span class="ruby"><span class="rb">温</span><span class="rt">ぬく</span></span>もりをあげる<br><span class="ruby"><span class="rb">会</span><span class="rt">あ</span></span>いたいんだ<span class="ruby"><span class="rb">忘</span><span class="rt">わす</span></span>れられない<br><span class="ruby"><span class="rb">猫</span><span class="rt">ねこ</span></span>になってでも<span class="ruby"><span class="rb">現</span><span class="rt">あらわ</span></span>れてほしい<br>いつか<span class="ruby"><span class="rb">君</span><span class="rt">きみ</span></span>がフラッと<span class="ruby"><span class="rb">現</span><span class="rt">あらわ</span></span>れて<br><span class="ruby"><span class="rb">僕</span><span class="rt">ぼく</span></span>はまた、<span class="ruby"><span class="rb">幸</span><span class="rt">しあわ</span></span>せで<br>  </div>  </div></div><h1>原文地址</h1><a href="https://utaten.com/lyric/ya17081607/" target="_blank" >猫 歌詞 DISH// ふりがな付</a><style>.lyricBody {    background: #fff;    padding: 10px;    user-select: none;    letter-spacing: 1px;    line-height: 2.3;}.lyricBody div.large {    font-size: 21px;}.lyricBody div.large span.ruby {    line-height: 2.6;}.lyricBody div span.ruby {    margin-bottom: 0.55em;    display: inline-table;    position: relative;    vertical-align: bottom;}.lyricBody span.ruby span.rb {    display: table-row;    position: relative;    line-height: 1.2;}.lyricBody div.large span.ruby span.rt {    font-size: 14px;}.lyricBody span.ruby span.rt {    display: table-header-group;    line-height: 1.8;    color: #999;    white-space: nowrap;    text-align: center;    letter-spacing: -0.001em;    before: '(';    after: ')';}</style>]]></content>
      
      
      <categories>
          
          <category> 日语之路 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 日语 </tag>
            
            <tag> 歌曲 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>宝可梦属性相克关系表</title>
      <link href="/2022/10/13/%E5%AE%9D%E5%8F%AF%E6%A2%A6%E5%B1%9E%E6%80%A7%E7%9B%B8%E5%85%8B%E5%85%B3%E7%B3%BB%E8%A1%A8/"/>
      <url>/2022/10/13/%E5%AE%9D%E5%8F%AF%E6%A2%A6%E5%B1%9E%E6%80%A7%E7%9B%B8%E5%85%8B%E5%85%B3%E7%B3%BB%E8%A1%A8/</url>
      
        <content type="html"><![CDATA[<h1 id="第六世代起"><a href="#第六世代起" class="headerlink" title="第六世代起"></a>第六世代起</h1><ul><li>抵抗是 X0.5，粗体就是免疫 X0</li><li>弱点是 X2</li></ul><table><thead><tr><th>属性</th><th>弱点</th><th>抵抗</th></tr></thead><tbody><tr><td>一般</td><td>格斗</td><td><strong>幽灵</strong></td></tr><tr><td>格斗</td><td>飞行｜超能力｜妖精</td><td>岩石｜虫｜恶</td></tr><tr><td>飞行</td><td>岩石｜电｜冰</td><td><strong>地面</strong>｜格斗｜虫｜草</td></tr><tr><td>毒</td><td>地面｜超能力</td><td>格斗｜毒｜虫｜草｜妖精</td></tr><tr><td>地面</td><td>水｜草｜冰</td><td>毒｜岩石｜<strong>电</strong></td></tr><tr><td>岩石</td><td>格斗｜地面｜钢｜水｜草</td><td>一般｜飞行｜毒｜火</td></tr><tr><td>虫</td><td>飞行｜岩石｜火</td><td>格斗｜地面｜草</td></tr><tr><td>幽灵</td><td>幽灵｜恶</td><td><strong>一般｜格斗</strong>｜毒｜虫</td></tr><tr><td>钢</td><td>格斗｜地面｜火</td><td><strong>毒</strong>｜【除了水｜电之外的其他】</td></tr><tr><td>火</td><td>地面｜岩石｜水</td><td>虫｜钢｜火｜草｜冰｜妖精</td></tr><tr><td>水</td><td>草｜电</td><td>钢｜火｜水｜冰</td></tr><tr><td>草</td><td>飞行｜毒｜虫｜火｜冰</td><td>地面｜水｜草｜电</td></tr><tr><td>电</td><td>地面</td><td>飞行｜幽灵｜草</td></tr><tr><td>超能力</td><td>虫｜幽灵｜恶</td><td>格斗｜超能力</td></tr><tr><td>冰</td><td>格斗｜岩石｜钢｜火</td><td>冰</td></tr><tr><td>龙</td><td>冰｜龙｜妖精</td><td>火｜水｜草｜电</td></tr><tr><td>恶</td><td>格斗｜虫｜妖精</td><td>幽灵｜<strong>超能力</strong>｜恶</td></tr><tr><td>妖精</td><td>毒｜钢</td><td>格斗｜虫｜恶｜<strong>龙</strong></td></tr></tbody></table><h1 id="第二世代至第五世代"><a href="#第二世代至第五世代" class="headerlink" title="第二世代至第五世代"></a>第二世代至第五世代</h1><table><thead><tr><th>属性</th><th>弱点</th><th>抵抗</th></tr></thead><tbody><tr><td>一般</td><td>格斗</td><td><strong>幽灵</strong></td></tr><tr><td>格斗</td><td>飞行｜超能力</td><td>岩石｜虫｜恶</td></tr><tr><td>飞行</td><td>岩石｜电｜冰</td><td><strong>地面</strong>｜格斗｜虫｜草</td></tr><tr><td>毒</td><td>地面｜超能力</td><td>格斗｜毒｜虫｜草</td></tr><tr><td>地面</td><td>水｜草｜冰</td><td>毒｜岩石｜<strong>电</strong></td></tr><tr><td>岩石</td><td>格斗｜地面｜钢｜水｜草</td><td>一般｜飞行｜毒｜火</td></tr><tr><td>虫</td><td>飞行｜岩石｜火</td><td>格斗｜地面｜草</td></tr><tr><td>幽灵</td><td>幽灵｜恶</td><td><strong>一般｜格斗</strong>｜毒｜虫</td></tr><tr><td>钢</td><td>格斗｜地面｜火</td><td><strong>毒</strong>｜【除了水｜电之外的其他】</td></tr><tr><td>火</td><td>地面｜岩石｜水</td><td>虫｜钢｜火｜草｜冰</td></tr><tr><td>水</td><td>草｜电</td><td>钢｜火｜水｜冰</td></tr><tr><td>草</td><td>飞行｜毒｜虫｜火｜冰</td><td>地面｜水｜草｜电</td></tr><tr><td>电</td><td>地面</td><td>飞行｜幽灵｜草</td></tr><tr><td>超能力</td><td>虫｜幽灵｜恶</td><td>格斗｜超能力</td></tr><tr><td>冰</td><td>格斗｜岩石｜钢｜火</td><td>冰</td></tr><tr><td>龙</td><td>冰｜龙</td><td>火｜水｜草｜电</td></tr><tr><td>恶</td><td>格斗｜虫</td><td>幽灵｜<strong>超能力</strong>｜恶</td></tr></tbody></table><h1 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h1><ul><li><a href="https://wiki.52poke.com/zh-hans/%E5%B1%9E%E6%80%A7%E7%9B%B8%E5%85%8B%E8%A1%A8">属性相克表</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> 游戏世界 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 游戏 </tag>
            
            <tag> 宝可梦 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Docker安装SQLserver CentOS 下安装 SQLserver2017 并导入 bak 备份</title>
      <link href="/2022/10/09/Docker%E5%AE%89%E8%A3%85SQLserver/"/>
      <url>/2022/10/09/Docker%E5%AE%89%E8%A3%85SQLserver/</url>
      
        <content type="html"><![CDATA[<p>在 Linux 服务器上安装运行 SQLserver2017，并导入 bak 格式备份。</p><h1 id="CentOS-安装-docker"><a href="#CentOS-安装-docker" class="headerlink" title="CentOS 安装 docker"></a>CentOS 安装 docker</h1><p>使用官方脚本自动安装</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl -fsSL https://get.docker.com | bash -s docker --mirror Aliyun</span><br></pre></td></tr></table></figure><p>启动服务</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">service docker start</span><br></pre></td></tr></table></figure><h1 id="docker-安装-SQLserver2017"><a href="#docker-安装-SQLserver2017" class="headerlink" title="docker 安装 SQLserver2017"></a>docker 安装 SQLserver2017</h1><p>从 Microsoft 容器注册表中请求 SQL Server 2017 (14.x) Linux 容器映像。</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker pull mcr.microsoft.com/mssql/server:2017-latest</span><br></pre></td></tr></table></figure><p>查看镜像</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker images</span><br></pre></td></tr></table></figure><p>运行容器</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">示例</span></span><br><span class="line">docker run -e &quot;ACCEPT_EULA=Y&quot; -e &quot;MSSQL_SA_PASSWORD=&lt;YourStrong@Passw0rd&gt;&quot; `</span><br><span class="line">   -p 1433:1433 --name sql1 --hostname sql1 `</span><br><span class="line">   -d `</span><br><span class="line">   mcr.microsoft.com/mssql/server:2017-latest</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">密码应符合 SQL Server 默认密码策略，否则容器无法设置 SQL Server，将停止工作。 默认情况下，密码必须为至少八个字符且包含以下四种字符中的三种：大写字母、小写字母、十进制数字、符号。</span>   </span><br></pre></td></tr></table></figure><p>可以不使用后台运行，使用screen，只在用的时候打开它。</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">screen -S mssql</span><br><span class="line"></span><br><span class="line">vim mssql.sh</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>编写脚本</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">!/bin/bash</span></span><br><span class="line">docker run -e &quot;ACCEPT_EULA=Y&quot; -e &quot;MSSQL_SA_PASSWORD=&lt;密码&gt;&quot; -p &lt;端口号&gt;:1433 --name sql1 --hostname sql1 mcr.microsoft.com/mssql/server:2017-latest</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">密码必须为至少八个字符且包含以下四种字符中的三种：大写字母、小写字母、十进制数字、符号。</span>  </span><br></pre></td></tr></table></figure><p>给予执行权限</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">chmod +x mssql.sh</span><br><span class="line"></span><br><span class="line">./mssql.sh</span><br><span class="line"></span><br><span class="line">ctrl + a, ctrl + d</span><br></pre></td></tr></table></figure><p>关闭 SQLserver</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">screen -r mssql</span><br><span class="line"></span><br><span class="line">ctrl + c, ctrl + a, ctrl + d</span><br><span class="line"></span><br><span class="line">或者直接 ctrl + c, ctrl + d</span><br></pre></td></tr></table></figure><h1 id="连接到-SQLserver"><a href="#连接到-SQLserver" class="headerlink" title="连接到 SQLserver"></a>连接到 SQLserver</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">docker exec -it sql1 &quot;bash&quot;</span><br><span class="line"></span><br><span class="line">/opt/mssql-tools/bin/sqlcmd -S localhost -U SA -P &quot;&lt;密码&gt;&quot;</span><br><span class="line"># 或者</span><br><span class="line">/opt/mssql-tools/bin/sqlcmd -S localhost -U SA</span><br></pre></td></tr></table></figure><h1 id="创建数据库"><a href="#创建数据库" class="headerlink" title="创建数据库"></a>创建数据库</h1><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> DATABASE TestDB;</span><br><span class="line"><span class="keyword">SELECT</span> Name <span class="keyword">from</span> sys.databases;</span><br><span class="line">GO</span><br></pre></td></tr></table></figure><h1 id="还原-bak"><a href="#还原-bak" class="headerlink" title="还原 bak"></a>还原 bak</h1><ul><li><a href="https://blog.csdn.net/u010667011/article/details/118569150">Navicat导入SqlServer备份的bak文件(超详细)</a></li></ul><h1 id="服务器"><a href="#服务器" class="headerlink" title="服务器"></a>服务器</h1><ul><li>CentOS 7.6 2c4g</li></ul><h1 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h1><ul><li><a href="https://learn.microsoft.com/zh-cn/sql/linux/quickstart-install-connect-docker?view=sql-server-2017&pivots=cs1-cmd">快速入门：使用 Docker 运行 SQL Server Linux 容器映像</a></li><li><a href="https://blog.csdn.net/u010667011/article/details/118569150">Navicat导入SqlServer备份的bak文件(超详细)</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> 技术坑记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> docker </tag>
            
            <tag> 数据库 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Ant-Design-Vue-Pro多语言切换不同CSS 不同语言使用不同的CSS</title>
      <link href="/2022/09/07/Ant-Design-Vue-Pro%E5%A4%9A%E8%AF%AD%E8%A8%80%E5%88%87%E6%8D%A2%E4%B8%8D%E5%90%8CCSS/"/>
      <url>/2022/09/07/Ant-Design-Vue-Pro%E5%A4%9A%E8%AF%AD%E8%A8%80%E5%88%87%E6%8D%A2%E4%B8%8D%E5%90%8CCSS/</url>
      
        <content type="html"><![CDATA[<p>在使用 locales 切换多语言时，英文有时候需要换行，就需要手动修改对应的CSS，而中文下不需要换行的样式，怎样做到根据语言选择的不同应用不同的样式呢？</p><h1 id="为英文版本设置特定的CSS"><a href="#为英文版本设置特定的CSS" class="headerlink" title="为英文版本设置特定的CSS"></a>为英文版本设置特定的CSS</h1><p>label设置自动换行：</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; <span class="selector-class">.ant-form-item-label</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: inline-block;</span><br><span class="line">  <span class="attribute">overflow</span>: hidden;</span><br><span class="line">  <span class="attribute">line-height</span>: <span class="number">18px</span>;</span><br><span class="line">  <span class="attribute">white-space</span>: normal;</span><br><span class="line">  <span class="attribute">text-align</span>: right;</span><br><span class="line">  <span class="attribute">vertical-align</span>: middle;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>仅在英文版本下，label自动换行：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">a-form</span> <span class="attr">:form</span>=<span class="string">&quot;form&quot;</span> <span class="attr">:lang</span>=<span class="string">&quot;$i18n.locale&quot;</span>&gt;</span></span><br><span class="line">    ...</span><br><span class="line">  <span class="tag">&lt;/<span class="name">a-form</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line">  ...</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">scoped</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="selector-pseudo">:lang</span>(en-US) &gt;&gt;&gt; <span class="selector-class">.ant-form-item-label</span> &#123;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">display</span>: inline-block;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">overflow</span>: hidden;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">line-height</span>: <span class="number">18px</span>;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">padding-right</span>: <span class="number">8px</span>;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">white-space</span>: normal;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">text-align</span>: right;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">vertical-align</span>: middle;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure><h1 id="软件版本：vue-antd-pro-3-0-2"><a href="#软件版本：vue-antd-pro-3-0-2" class="headerlink" title="软件版本：vue-antd-pro 3.0.2"></a>软件版本：vue-antd-pro 3.0.2</h1><ul><li>“ant-design-vue”: “^1.7.6”</li><li>“vue”: “^2.6.0”,</li></ul><h1 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h1><ul><li><a href="https://blog.csdn.net/MAIMIHO/article/details/121152696">VUE 不同语言使用不同 CSS</a></li><li><a href="https://developer.mozilla.org/zh-CN/docs/Web/CSS/:lang">Web 开发技术 CSS（层叠样式表）lang</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> 技术坑记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> vue </tag>
            
            <tag> antd </tag>
            
            <tag> 前端 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>在iPhone系统邮箱中添加腾讯企业邮箱账号 使用苹果手机默认邮箱应用收发腾讯企业邮箱邮件</title>
      <link href="/2022/07/04/%E5%9C%A8iPhone%E7%B3%BB%E7%BB%9F%E9%82%AE%E7%AE%B1%E4%B8%AD%E6%B7%BB%E5%8A%A0%E8%85%BE%E8%AE%AF%E4%BC%81%E4%B8%9A%E9%82%AE%E7%AE%B1%E8%B4%A6%E5%8F%B7/"/>
      <url>/2022/07/04/%E5%9C%A8iPhone%E7%B3%BB%E7%BB%9F%E9%82%AE%E7%AE%B1%E4%B8%AD%E6%B7%BB%E5%8A%A0%E8%85%BE%E8%AE%AF%E4%BC%81%E4%B8%9A%E9%82%AE%E7%AE%B1%E8%B4%A6%E5%8F%B7/</url>
      
        <content type="html"><![CDATA[<h1 id="1-在-iPhone-上如何添加邮箱账号"><a href="#1-在-iPhone-上如何添加邮箱账号" class="headerlink" title="1 在 iPhone 上如何添加邮箱账号"></a>1 在 iPhone 上如何添加邮箱账号</h1><p>iPhone 在系统 ios15 及 ios16 上，添加邮箱账号，需要在系统设置中，找到邮件；</p><img src="/2022/07/04/%E5%9C%A8iPhone%E7%B3%BB%E7%BB%9F%E9%82%AE%E7%AE%B1%E4%B8%AD%E6%B7%BB%E5%8A%A0%E8%85%BE%E8%AE%AF%E4%BC%81%E4%B8%9A%E9%82%AE%E7%AE%B1%E8%B4%A6%E5%8F%B7/iphone-1.jpeg" class=""><p>进入后选择账户 &#x3D;&gt; 添加账户</p><img src="/2022/07/04/%E5%9C%A8iPhone%E7%B3%BB%E7%BB%9F%E9%82%AE%E7%AE%B1%E4%B8%AD%E6%B7%BB%E5%8A%A0%E8%85%BE%E8%AE%AF%E4%BC%81%E4%B8%9A%E9%82%AE%E7%AE%B1%E8%B4%A6%E5%8F%B7/iphone-2.jpeg" class=""><p>选择【其他】，开始新增邮箱</p><img src="/2022/07/04/%E5%9C%A8iPhone%E7%B3%BB%E7%BB%9F%E9%82%AE%E7%AE%B1%E4%B8%AD%E6%B7%BB%E5%8A%A0%E8%85%BE%E8%AE%AF%E4%BC%81%E4%B8%9A%E9%82%AE%E7%AE%B1%E8%B4%A6%E5%8F%B7/iphone-3.png" class=""><h1 id="2-腾讯企业邮箱的收发信服务器配置"><a href="#2-腾讯企业邮箱的收发信服务器配置" class="headerlink" title="2 腾讯企业邮箱的收发信服务器配置"></a>2 腾讯企业邮箱的收发信服务器配置</h1><p>输入自己的企业邮箱地址，可以是自定义邮箱地址，也可以是<code>exmail.qq.com</code>的地址。</p><img src="/2022/07/04/%E5%9C%A8iPhone%E7%B3%BB%E7%BB%9F%E9%82%AE%E7%AE%B1%E4%B8%AD%E6%B7%BB%E5%8A%A0%E8%85%BE%E8%AE%AF%E4%BC%81%E4%B8%9A%E9%82%AE%E7%AE%B1%E8%B4%A6%E5%8F%B7/iphone-4.png" class=""><p>选择 IMAP 类型，分别填写收件服务器和发件服务器的主机名，同时填写自己邮箱地址和密码。</p><img src="/2022/07/04/%E5%9C%A8iPhone%E7%B3%BB%E7%BB%9F%E9%82%AE%E7%AE%B1%E4%B8%AD%E6%B7%BB%E5%8A%A0%E8%85%BE%E8%AE%AF%E4%BC%81%E4%B8%9A%E9%82%AE%E7%AE%B1%E8%B4%A6%E5%8F%B7/iphone-5.png" class=""><p>保存就可以在邮箱应用中收发邮件了。</p><p>可以在【高级】中，打开SSL。采用SSL方式时，<strong>如果使用POP协议，使用SSL，端口号为995，如果是IMAP协议，使用SSL，端口号为993。</strong> 这里使用 iPhone 默认端口设置即可，不用手动修改。</p><h1 id="3-腾讯-imap-与-pop-配置参考"><a href="#3-腾讯-imap-与-pop-配置参考" class="headerlink" title="3 腾讯 imap 与 pop 配置参考"></a>3 腾讯 imap 与 pop 配置参考</h1><h2 id="3-1-IMAP"><a href="#3-1-IMAP" class="headerlink" title="3.1 IMAP"></a>3.1 IMAP</h2><p><strong>收信服务器</strong>：imap.exmail.qq.com</p><p><strong>用户名</strong>：填写完整邮箱地址</p><p><strong>密码</strong>：填写帐号密码</p><p><strong>发信服务器</strong>：smtp.exmail.qq.com</p><p><strong>用户名</strong>：填写完整邮箱地址</p><p><strong>密码</strong>：填写帐号密码</p><p>海外用户可使用以下服务器</p><p>接收邮件服务器：hwimap.exmail.qq.com</p><p>发送邮件服务器：hwsmtp.exmail.qq.com</p><h2 id="3-2-POP"><a href="#3-2-POP" class="headerlink" title="3.2 POP"></a>3.2 POP</h2><p><strong>收信服务器</strong>：pop.exmail.qq.com</p><p><strong>用户名</strong>：填写完整邮箱地址</p><p><strong>密码</strong>：填写帐号密码</p><p><strong>发信服务器</strong>：smtp.exmail.qq.com</p><p><strong>用户名</strong>：填写完整邮箱地址</p><p><strong>密码</strong>：填写帐号密码</p><p>海外用户可使用以下服务器</p><p>接收邮件服务器：hwpop.exmail.qq.com</p><p>发送邮件服务器：hwsmtp.exmail.qq.com</p><h1 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h1><ul><li><a href="https://service.exmail.qq.com/cgi-bin/help?subtype=1&id=28&no=1000583">如何使用iPhone自带的邮件客户端管理企业邮箱？</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> 技术坑记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> IOS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>NAS中使用frp实现互联网访问 群晖配置内网穿透</title>
      <link href="/2022/07/01/NAS%E4%B8%AD%E4%BD%BF%E7%94%A8frp%E5%AE%9E%E7%8E%B0%E4%BA%92%E8%81%94%E7%BD%91%E8%AE%BF%E9%97%AE/"/>
      <url>/2022/07/01/NAS%E4%B8%AD%E4%BD%BF%E7%94%A8frp%E5%AE%9E%E7%8E%B0%E4%BA%92%E8%81%94%E7%BD%91%E8%AE%BF%E9%97%AE/</url>
      
        <content type="html"><![CDATA[<h1 id="黑群晖实现互联网访问"><a href="#黑群晖实现互联网访问" class="headerlink" title="黑群晖实现互联网访问"></a>黑群晖实现互联网访问</h1><p>2013年购买的联想Y510P笔记本电脑，在2017年退役了。它的经历也挺丰富的：</p><ul><li>刚买回来自带 win8 系统，觉得不好用</li><li>重新安装 win7 系统，两年后，慢慢地不那么流畅了</li><li>增加内存条续命</li><li>安装 win7 &amp; Ubuntu 双系统</li><li>升级 win7 到 win10 系统，比 win7 好一点，但也很卡</li><li>双系统中，Ubuntu 成为主力操作系统，工作两年后被 小米pro取代，一直吃灰</li></ul><p>而在2021年10月，吃灰4年后的它，被我想起。决定用它做一个黑群晖系统。于是在2021年10月10日，它又以全新的面貌——NAS，继续发光发热。</p><p>黑群晖安装成功后，我开始研究如何让他互联网可以访问到。终于，找到了一套方案，很适合我的方案。</p><p>准备工作：</p><ul><li>一台互联网云服务器（Linux系统）</li><li>一个个人域名</li></ul><p>云服务器我使用的是腾讯云服务器，安装系统 CentOS 7.6。</p><p>这个是我在2021年腾讯云618活动，以 74元&#x2F;年 的价格购买的</p><ul><li>2核4G</li><li>80G硬盘</li><li>8M带宽（1200G&#x2F;月）</li></ul><p>的轻量云服务器，很划算，跑 frps 很够用 。</p><p>当然，今年腾讯云618，我在6月30日又买了一台（新用户，认证一下家人朋友的身份证），128元&#x2F;年 没有去年划算，但也是超值，</p><ul><li>2核4G</li><li>60G硬盘</li><li>6M带宽（1000G&#x2F;月）</li></ul><p>活动地址：<a href="https://cloud.tencent.com/act/pro/618season?cps_key=2583216d4824b110a9a8c6a48659a874&from=618season">https://cloud.tencent.com/act/pro/618season?cps_key&#x3D;2583216d4824b110a9a8c6a48659a874&amp;from&#x3D;618season</a></p><p>域名是在阿里云买的，好像并没有什么优惠。</p><h1 id="1-域名配置"><a href="#1-域名配置" class="headerlink" title="1 域名配置"></a>1 域名配置</h1><p>在域名服务商解析域名到云服务器IP。</p><p>注意：防火墙端口打开【5000,5001,7000】，后面会用到。</p><h1 id="2-服务器上安装-frps"><a href="#2-服务器上安装-frps" class="headerlink" title="2 服务器上安装 frps"></a>2 服务器上安装 frps</h1><p>远程到云服务器上，执行</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">wget https://github.com/fatedier/frp/releases/download/v0.37.1/frp_0.37.1_linux_amd64.tar.gz</span><br><span class="line"></span><br><span class="line">tar -zxvf frp_0.37.1_linux_amd64.tar.gz</span><br></pre></td></tr></table></figure><p>然后进入解压目录中，编辑 frps.ini<br>(这里只写 bind_port 和 token 就行，vhost_http_port 和 vhost_https_port 好像没有作用的，要看客户端怎么配置)</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[common]</span><br><span class="line">bind_port = 7000</span><br><span class="line">vhost_http_port = 5000</span><br><span class="line">vhost_https_port = 5001</span><br><span class="line">token = my.token.is</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>在 <code>/usr/lib/systemd/system/</code> 下，创建或编辑 <code>frps.service</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">[Unit]</span><br><span class="line"></span><br><span class="line">Description=fraps service</span><br><span class="line"></span><br><span class="line">After=network.target syslog.target</span><br><span class="line"></span><br><span class="line">Wants=network.target</span><br><span class="line"></span><br><span class="line">[Service]</span><br><span class="line"></span><br><span class="line">Type=simple</span><br><span class="line"></span><br><span class="line">ExecStart=/root/frp_0.37.1_linux_amd64/frps -c /root/frp_0.37.1_linux_amd64/frps.ini</span><br><span class="line"></span><br><span class="line">[Install]</span><br><span class="line"></span><br><span class="line">WantedBy=multi-user.target</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>然后可以使用 systemctl 运行或停止 frps 了。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">systemctl start frps</span><br><span class="line"></span><br><span class="line">systemctl stop frps</span><br><span class="line"></span><br></pre></td></tr></table></figure><h1 id="3-黑群晖上安装frpc"><a href="#3-黑群晖上安装frpc" class="headerlink" title="3 黑群晖上安装frpc"></a>3 黑群晖上安装frpc</h1><p>在群晖上，安装并打开 docker，安装 frpc。</p><p>使用项目：<a href="https://registry.hub.docker.com/r/stilleshan/frpc/">https://registry.hub.docker.com/r/stilleshan/frpc/</a></p><img src="/2022/07/01/NAS%E4%B8%AD%E4%BD%BF%E7%94%A8frp%E5%AE%9E%E7%8E%B0%E4%BA%92%E8%81%94%E7%BD%91%E8%AE%BF%E9%97%AE/post-nas-frps.jpg" class=""><p>docker &#x3D;&gt; 映像（镜像） &#x3D;&gt; 新增 &#x3D;&gt; 从 URL 添加 &#x3D;&gt; 【Hub 页面或储存库 URL：<a href="https://registry.hub.docker.com/r/stilleshan/frpc/%E3%80%91">https://registry.hub.docker.com/r/stilleshan/frpc/】</a> &#x3D;&gt; 新增 &#x3D;&gt; 0.37.1 版本(与服务器端frps一致)</p><p>编辑 frpc.ini 配置文件</p><img src="/2022/07/01/NAS%E4%B8%AD%E4%BD%BF%E7%94%A8frp%E5%AE%9E%E7%8E%B0%E4%BA%92%E8%81%94%E7%BD%91%E8%AE%BF%E9%97%AE/post-nas-frps-1.jpg" class=""><p>参考配置：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">[common]</span><br><span class="line">server_addr = www.xtongs.com</span><br><span class="line">server_port = 7000</span><br><span class="line">token = my.token.is</span><br><span class="line"></span><br><span class="line">[http.xtongs]</span><br><span class="line">type = http</span><br><span class="line">local_ip = 127.0.0.1</span><br><span class="line">local_port = 5000</span><br><span class="line">remote_port = 5000</span><br><span class="line">custom_domains = www.xtongs.com</span><br><span class="line"></span><br><span class="line">[https.xtongs]</span><br><span class="line">type = https</span><br><span class="line">local_ip = 127.0.0.1</span><br><span class="line">local_port = 5001</span><br><span class="line">remote_port = 5001</span><br><span class="line">custom_domains = www.xtongs.com</span><br><span class="line"></span><br><span class="line">;这个是 webdav 的配置参考</span><br><span class="line">[https.webdav]</span><br><span class="line">type = tcp</span><br><span class="line">local_ip = 127.0.0.1</span><br><span class="line">local_port = 5006</span><br><span class="line">remote_port = 5006</span><br><span class="line">custom_domains = www.xtongs.com</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>创建并启动容器</p><img src="/2022/07/01/NAS%E4%B8%AD%E4%BD%BF%E7%94%A8frp%E5%AE%9E%E7%8E%B0%E4%BA%92%E8%81%94%E7%BD%91%E8%AE%BF%E9%97%AE/post-nas-frps-2.jpg" class=""><ul><li><input checked="" disabled="" type="checkbox"> 使用高权限执行容器</li><li>高级设置<ul><li>卷<ul><li>添加文件，文件路径: <code>docker/frp/frpc.ini</code>, 装载路径: <code>/frp/frpc.ini</code></li></ul></li><li>网络<ul><li><input checked="" disabled="" type="checkbox"> 使用与 Docker Host 相同的网络</li></ul></li></ul></li></ul><p>设置完成后，运行容器。</p><hr><p>然后就可以通过 https:&#x2F;&#x2F;{域名}:5001 来访问你的 NAS 了。</p><h1 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h1><ul><li><a href="https://www.ioiox.com/archives/26.html">群晖NAS使用Docker安装配置frpc内网穿透教程</a></li><li><a href="https://registry.hub.docker.com/r/stilleshan/frpc/">基于原版 frp 内网穿透客户端 frpc 的一键安装卸载脚本和 docker 镜像.支持群晖NAS,Linux 服务器和 docker 等多种环境安装部署</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> 技术坑记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> NAS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Laravel笔记-创建文件夹</title>
      <link href="/2022/06/13/Laravel%E7%AC%94%E8%AE%B0-%E5%88%9B%E5%BB%BA%E6%96%87%E4%BB%B6%E5%A4%B9/"/>
      <url>/2022/06/13/Laravel%E7%AC%94%E8%AE%B0-%E5%88%9B%E5%BB%BA%E6%96%87%E4%BB%B6%E5%A4%B9/</url>
      
        <content type="html"><![CDATA[<h2 id="创建文件夹"><a href="#创建文件夹" class="headerlink" title="创建文件夹"></a>创建文件夹</h2><ul><li>可以使用 php 的 mkdir 直接创建文件夹，默认权限：777</li></ul><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">// mkdir(</span></span><br><span class="line"><span class="comment">//     string $pathname,</span></span><br><span class="line"><span class="comment">//     int $mode = 0777,</span></span><br><span class="line"><span class="comment">//     bool $recursive = false,</span></span><br><span class="line"><span class="comment">//     resource $context = ?</span></span><br><span class="line"><span class="comment">// ): bool</span></span><br><span class="line"><span class="title function_ invoke__">mkdir</span>(<span class="string">&quot;/path/to/my/dir&quot;</span>, <span class="number">0700</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment"># 目录已存在时，产生 E_WARNING错误。</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 如果因为权限问题无法创建目录，导致 E_WARNING错误。</span></span><br></pre></td></tr></table></figure><ul><li>使用 laravel 框架中提供的方法，默认权限：755</li></ul><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">use</span> <span class="title">Illuminate</span>\<span class="title">Support</span>\<span class="title">Facades</span>\<span class="title">Storage</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (!<span class="title class_">Storage</span>::<span class="title function_ invoke__">exists</span>(<span class="string">&quot;/export&quot;</span>)) &#123;</span><br><span class="line"><span class="title class_">Storage</span>::<span class="title function_ invoke__">makeDirectory</span>(<span class="string">&quot;/export&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>export 目录会创建在 <code>项目目录/storage/app/</code> 下。</p><p>如果要下载这个目录下的文件，可以使用 laravel 提供的 <code>storage_path()</code> 函数。</p><p>这里 <code>storage_path</code> 参数路径，默认是 <code>storage</code> 下，需要加上 <code>./app</code> 这层路径</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">return</span> <span class="title function_ invoke__">response</span>()-&gt;<span class="title function_ invoke__">download</span>(<span class="title function_ invoke__">storage_path</span>(<span class="string">&quot;./app/export/<span class="subst">&#123;$filename&#125;</span>.xlsx&quot;</span>));</span><br></pre></td></tr></table></figure><h2 id="软件版本：laravel-8-54"><a href="#软件版本：laravel-8-54" class="headerlink" title="软件版本：laravel 8.54"></a>软件版本：laravel 8.54</h2><h2 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h2><ul><li><a href="https://learnku.com/docs/laravel/5.7/filesystem/2281#directories">Laravel filesystem directories</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> 技术坑记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> laravel </tag>
            
            <tag> php </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Python简易爬虫实现 使用 urllib、bs4 爬取图片网站</title>
      <link href="/2022/05/12/Python%E7%AE%80%E6%98%93%E7%88%AC%E8%99%AB%E5%AE%9E%E7%8E%B0/"/>
      <url>/2022/05/12/Python%E7%AE%80%E6%98%93%E7%88%AC%E8%99%AB%E5%AE%9E%E7%8E%B0/</url>
      
        <content type="html"><![CDATA[<h1 id="准备工作"><a href="#准备工作" class="headerlink" title="准备工作"></a>准备工作</h1><p>使用 python3 环境，用 pip3 安装需要用到的 modules</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 安装 pip3</span></span><br><span class="line">curl https://bootstrap.pypa.io/get-pip.py -o get-pip.py</span><br><span class="line">python3 get-pip.py</span><br><span class="line">pip3 -v</span><br><span class="line"></span><br><span class="line"><span class="comment"># 安装 modules</span></span><br><span class="line">pip3 install bs4 xlwt</span><br><span class="line"></span><br></pre></td></tr></table></figure><h1 id="爬取思路"><a href="#爬取思路" class="headerlink" title="爬取思路"></a>爬取思路</h1><ul><li>打开需要爬取的网站，一般来说，图片网站都会有：分类、图集、页码，在浏览器中找到这些元素</li><li>第一步：获取全部图集信息<ul><li>图集名称、图集编号、图集地址、图集封面</li></ul></li><li>第二步：将图集信息储存在数据库中或Excel中</li><li>第三步：从数据库中获取 url，对图集下的图片进行爬取下载，图集下载成功后标记数据库图集为已爬取状态</li></ul><h1 id="代码实现"><a href="#代码实现" class="headerlink" title="代码实现"></a>代码实现</h1><ul><li>引入 modules</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">import</span> sqlite3</span><br><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"><span class="keyword">import</span> urllib.request</span><br><span class="line"><span class="keyword">import</span> re</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> xlwt</span><br><span class="line"><span class="keyword">from</span> bs4 <span class="keyword">import</span> BeautifulSoup</span><br><span class="line"></span><br></pre></td></tr></table></figure><ul><li>请求头设置</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 浏览器请求头</span></span><br><span class="line">head = &#123;</span><br><span class="line">    <span class="string">&quot;User-Agent&quot;</span>: <span class="string">&quot;Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/88.0.4324.96 Safari/537.36&quot;</span>,</span><br><span class="line">    <span class="comment"># &quot;Referer&quot;: &quot;https://www.xtongs.com/&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment"># 图片下载请求头</span></span><br><span class="line">img_header = [</span><br><span class="line">    (<span class="string">&#x27;User-Agent&#x27;</span>,</span><br><span class="line">     <span class="string">&#x27;Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/88.0.4324.96 Safari/537.36&#x27;</span>),</span><br><span class="line">    (<span class="string">&#x27;Referer&#x27;</span>, <span class="string">&#x27;https://xtongs.com/&#x27;</span>)</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 获取页面内容</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">get_page_content</span>(<span class="params">url</span>):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;获取页面内容:%s&#x27;</span> % url)</span><br><span class="line">    request = urllib.request.Request(url, headers=head)</span><br><span class="line">    html = <span class="string">&#x27;&#x27;</span></span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        response = urllib.request.urlopen(request, timeout=<span class="number">5</span>)</span><br><span class="line">        html = response.read().decode()</span><br><span class="line">    <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">        <span class="built_in">print</span>(e)</span><br><span class="line">    <span class="keyword">return</span> BeautifulSoup(html, <span class="string">&quot;html.parser&quot;</span>)</span><br></pre></td></tr></table></figure><ul><li><p>获取网站专辑总页数，这个可以浏览器里看一眼总页数，不麻烦</p></li><li><p>保存专辑信息到本地</p></li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 专辑数据爬取到本地</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">album_to_local</span>():</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;开始&#x27;</span>)</span><br><span class="line">    <span class="comment"># 爬取地址</span></span><br><span class="line">    baseurl = <span class="string">&#x27;https://xtongs.com/&#x27;</span></span><br><span class="line">    save_path = <span class="string">&#x27;专辑.xls&#x27;</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;爬取地址：%s&#x27;</span> % baseurl)</span><br><span class="line">    <span class="comment"># 总页数</span></span><br><span class="line">    <span class="comment"># total_page = get_album_total_page(baseurl)</span></span><br><span class="line">    <span class="comment"># 这个自己上网站上看一眼就行</span></span><br><span class="line">    total_page = <span class="number">58</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;专辑总页数：%d&#x27;</span> % total_page)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;要从第几页开始？请输入数字：&#x27;</span>)</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        page = <span class="built_in">int</span>(<span class="built_in">input</span>())</span><br><span class="line">    <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">        <span class="built_in">print</span>(e)</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;页码必须是大于0的整数，不要超过最大页码&#x27;</span>)</span><br><span class="line">        sys.exit()</span><br><span class="line">    <span class="keyword">if</span> page &lt; <span class="number">1</span>:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;页码从1开始&#x27;</span>)</span><br><span class="line">        page = <span class="number">1</span></span><br><span class="line">    <span class="comment"># 爬取专辑信息</span></span><br><span class="line">    save_album_list(baseurl, total_page, page)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment"># 爬取保存专辑信息</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">save_album_list</span>(<span class="params">baseurl, total_page, page</span>):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;获取图集信息&#x27;</span>)</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(page - <span class="number">1</span>, <span class="built_in">int</span>(total_page)):</span><br><span class="line">        data_list = []</span><br><span class="line">        <span class="built_in">print</span>(i + <span class="number">1</span>)</span><br><span class="line">        <span class="comment"># 修改专辑地址</span></span><br><span class="line">        url = baseurl + <span class="string">&#x27;page_&#x27;</span> + <span class="built_in">str</span>(i + <span class="number">1</span>) + <span class="string">&#x27;.html&#x27;</span></span><br><span class="line">        soup = get_page_content(url)</span><br><span class="line">        <span class="comment"># 修改专辑信息获取 find_all_next</span></span><br><span class="line">        <span class="keyword">for</span> item <span class="keyword">in</span> soup.find(class_=<span class="string">&quot;main&quot;</span>).find_all(class_=<span class="string">&#x27;thumbmm&#x27;</span>):</span><br><span class="line">            item = <span class="built_in">str</span>(item)</span><br><span class="line">            <span class="built_in">print</span>(item)</span><br><span class="line">            <span class="comment"># &lt;a href=&quot;https://xtongs.com/web/1001.html&quot; target=&quot;_blank&quot; title=&quot;自然风景之美丽夕阳&quot;&gt;&lt;img src=&quot;https://xtongs.com/static/24/03/db/aHR0cHM6Ly9udXlvdTguY2MvemJfdXNlcnMvdXBsb2FkLzIwMjIvMDQvMjAyMjA0MjQxNjUwNzY2MzgzMzcwNDgxLmpwZw-190-285-index-a.jpg&quot;/&gt;&lt;/a&gt;</span></span><br><span class="line">            data = []</span><br><span class="line">            album_id = re.findall(re_album_id, item)[<span class="number">0</span>]</span><br><span class="line">            album_name = re.findall(re_album_name, item)[<span class="number">0</span>]</span><br><span class="line">            album_link = re.findall(re_album_link, item)[<span class="number">0</span>]</span><br><span class="line">            cover_link = re.findall(re_cover_link, item)[<span class="number">0</span>]</span><br><span class="line">            data.append(album_id)</span><br><span class="line">            data.append(album_name)</span><br><span class="line">            data.append(album_link)</span><br><span class="line">            data.append(cover_link)</span><br><span class="line">            data.append(<span class="string">&#x27;0&#x27;</span>)</span><br><span class="line">            data_list.append(data)</span><br><span class="line">        <span class="comment"># 每页的图集保存到数据</span></span><br><span class="line">        save_to_db(data_list)</span><br><span class="line">    <span class="comment"># 所有的图集保存到 Excel    </span></span><br><span class="line">    <span class="comment"># save_to_excel(data_list, &#x27;test.xlsx&#x27;)</span></span><br><span class="line">    <span class="keyword">return</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 保存到excel测试</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">save_to_excel</span>(<span class="params">data_list, save_path</span>):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;保存execl&#x27;</span>)</span><br><span class="line">    book = xlwt.Workbook(encoding=<span class="string">&quot;utf-8&quot;</span>, style_compression=<span class="number">0</span>)</span><br><span class="line">    sheet = book.add_sheet(<span class="string">&#x27;专辑&#x27;</span>, cell_overwrite_ok=<span class="literal">True</span>)</span><br><span class="line">    col = (<span class="string">&#x27;专辑id&#x27;</span>, <span class="string">&#x27;专辑名称&#x27;</span>, <span class="string">&#x27;专辑地址&#x27;</span>, <span class="string">&#x27;专辑封面&#x27;</span>)</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">0</span>, <span class="number">4</span>):</span><br><span class="line">        sheet.write(<span class="number">0</span>, i, col[i])</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">0</span>, <span class="built_in">len</span>(data_list)):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;第%d条&quot;</span> % i)</span><br><span class="line">        data = data_list[i]</span><br><span class="line">        <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">0</span>, <span class="number">4</span>):</span><br><span class="line">            sheet.write(i + <span class="number">1</span>, j, data[j])</span><br><span class="line">    book.save(save_path)</span><br></pre></td></tr></table></figure><ul><li>专辑信息正则与图片正则</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># &lt;a href=&quot;https://xtongs.com/web/1001.html&quot; target=&quot;_blank&quot; title=&quot;自然风景之美丽夕阳&quot;&gt;&lt;img src=&quot;https://xtongs.com/static/24/03/db/aHR0cHM6Ly9udXlvdTguY2MvemJfdXNlcnMvdXBsb2FkLzIwMjIvMDQvMjAyMjA0MjQxNjUwNzY2MzgzMzcwNDgxLmpwZw-190-285-index-a.jpg&quot;/&gt;&lt;/a&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 专辑 ID</span></span><br><span class="line">re_album_id = re.<span class="built_in">compile</span>(<span class="string">r&#x27;.*\/(.*?)\.html&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 专辑标题</span></span><br><span class="line">re_album_name = re.<span class="built_in">compile</span>(<span class="string">r&#x27;title=&quot;(.*)&quot;&gt;&lt;img&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 专辑链接地址</span></span><br><span class="line">re_album_link = re.<span class="built_in">compile</span>(<span class="string">r&#x27;href=&quot;(.*)&quot; target=&quot;_blank&quot; title&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 专辑封面图片</span></span><br><span class="line">re_cover_link = re.<span class="built_in">compile</span>(<span class="string">r&#x27;src=&quot;(.*?)&quot;&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># ##########################################</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 图片地址</span></span><br><span class="line">re_image_src = re.<span class="built_in">compile</span>(<span class="string">r&#x27;src=&quot;(.*?)&quot;&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 图片 ID</span></span><br><span class="line">re_image_id = re.<span class="built_in">compile</span>(<span class="string">r&#x27;.*\/(.*?)\.jpg&#x27;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 数据库储存地址</span></span><br><span class="line">db_path = <span class="string">&#x27;spider2022.db&#x27;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><ul><li>创建 sqlite 数据库 spider2022.db</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- auto-generated definition</span></span><br><span class="line"><span class="keyword">create table</span> album</span><br><span class="line">(</span><br><span class="line">    id         <span class="type">integer</span> <span class="keyword">not null</span></span><br><span class="line">        <span class="keyword">constraint</span> album_pk</span><br><span class="line">            <span class="keyword">primary key</span> autoincrement,</span><br><span class="line">    album_id   <span class="type">integer</span>,</span><br><span class="line">    album_name text,</span><br><span class="line">    album_link text,</span><br><span class="line">    cover_link text,</span><br><span class="line">    status     <span class="type">integer</span></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">unique</span> index album_id_index</span><br><span class="line">    <span class="keyword">on</span> album (id);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- auto-generated definition</span></span><br><span class="line"><span class="keyword">create table</span> failed</span><br><span class="line">(</span><br><span class="line">    url string <span class="keyword">not null</span></span><br><span class="line">);</span><br><span class="line"></span><br></pre></td></tr></table></figure><ul><li>专辑保存到数据库</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 保存专辑信息到数据库</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">save_to_db</span>(<span class="params">data_list</span>):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;保存到数据库&#x27;</span>)</span><br><span class="line">    conn = sqlite3.connect(db_path)</span><br><span class="line">    cur = conn.cursor()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> data <span class="keyword">in</span> data_list:</span><br><span class="line">        data[<span class="number">1</span>] = data[<span class="number">1</span>].replace(<span class="string">&quot;&#x27;&quot;</span>, <span class="string">&#x27;&quot;&#x27;</span>)</span><br><span class="line">        data[<span class="number">1</span>] = <span class="string">&quot;&#x27;&quot;</span> + data[<span class="number">1</span>] + <span class="string">&quot;&#x27;&quot;</span></span><br><span class="line">        data[<span class="number">2</span>] = <span class="string">&quot;&#x27;&quot;</span> + data[<span class="number">2</span>] + <span class="string">&quot;&#x27;&quot;</span></span><br><span class="line">        data[<span class="number">3</span>] = <span class="string">&quot;&#x27;&quot;</span> + data[<span class="number">3</span>] + <span class="string">&quot;&#x27;&quot;</span></span><br><span class="line">        sql = <span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">            insert into album (</span></span><br><span class="line"><span class="string">               album_id, album_name, album_link, cover_link, status</span></span><br><span class="line"><span class="string">            ) values (%s)</span></span><br><span class="line"><span class="string">        &#x27;&#x27;&#x27;</span> % <span class="string">&quot;,&quot;</span>.join(data)</span><br><span class="line">        <span class="built_in">print</span>(sql)</span><br><span class="line">        cur.execute(sql)</span><br><span class="line">        conn.commit()</span><br><span class="line">    cur.close()</span><br><span class="line">    conn.close()</span><br></pre></td></tr></table></figure><ul><li>下载图片</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 获取当爬取队列</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">get_album</span>():</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;获取当爬取队列&#x27;</span>)</span><br><span class="line">    conn = sqlite3.connect(db_path)</span><br><span class="line">    cur = conn.cursor()</span><br><span class="line">    sql = <span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">        select * from album where status = 0 limit 1</span></span><br><span class="line"><span class="string">    &#x27;&#x27;&#x27;</span></span><br><span class="line">    cur.execute(sql)</span><br><span class="line">    res = cur.fetchall()</span><br><span class="line">    cur.close()</span><br><span class="line">    conn.close()</span><br><span class="line">    <span class="keyword">return</span> res</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 获取专辑内总页数</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">get_total_page</span>(<span class="params">url</span>):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;获取页数&#x27;</span>)</span><br><span class="line">    soup = get_page_content(url)</span><br><span class="line">    <span class="comment"># 需要修改正则</span></span><br><span class="line">    <span class="comment"># res = soup.find_all(&#x27;a&#x27;, class_=&quot;page-numbers&quot;)</span></span><br><span class="line">    res = soup.find_all(<span class="string">&#x27;ul&#x27;</span>, <span class="built_in">id</span>=<span class="string">&quot;dm-fy&quot;</span>)</span><br><span class="line">    <span class="built_in">print</span>(res)</span><br><span class="line">    <span class="built_in">breakpoint</span>()</span><br><span class="line">    <span class="keyword">return</span> res[-<span class="number">2</span>].text</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 更新当爬取队列信息</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">update_album</span>(<span class="params"><span class="built_in">id</span></span>):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;更新当爬取队列:%d&#x27;</span> % <span class="built_in">id</span>)</span><br><span class="line">    conn = sqlite3.connect(db_path)</span><br><span class="line">    cur = conn.cursor()</span><br><span class="line">    sql = <span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">        update album set status = 1 where id = %d</span></span><br><span class="line"><span class="string">    &#x27;&#x27;&#x27;</span> % <span class="built_in">id</span></span><br><span class="line">    cur.execute(sql)</span><br><span class="line">    conn.commit()</span><br><span class="line">    conn.close()</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;更新成功！&#x27;</span>)</span><br><span class="line">    <span class="keyword">return</span>    </span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 下载失败 URL 储存到数据库</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">failed_to_db</span>(<span class="params">img_page_url</span>):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;失败 url 保存到数据库&#x27;</span>)</span><br><span class="line">    conn = sqlite3.connect(db_path)</span><br><span class="line">    cur = conn.cursor()</span><br><span class="line">    sql = <span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">        insert into failed (</span></span><br><span class="line"><span class="string">           url</span></span><br><span class="line"><span class="string">        ) values (&#x27;%s&#x27;)</span></span><br><span class="line"><span class="string">    &#x27;&#x27;&#x27;</span> % img_page_url</span><br><span class="line">    <span class="built_in">print</span>(sql)</span><br><span class="line">    cur.execute(sql)</span><br><span class="line">    conn.commit()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 获取下载失败的队列</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">get_failed</span>():</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;获取失败队列&#x27;</span>)</span><br><span class="line">    conn = sqlite3.connect(db_path)</span><br><span class="line">    cur = conn.cursor()</span><br><span class="line">    sql = <span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">        select * from failed limit 1</span></span><br><span class="line"><span class="string">    &#x27;&#x27;&#x27;</span></span><br><span class="line">    cur.execute(sql)</span><br><span class="line">    res = cur.fetchall()</span><br><span class="line">    cur.close()</span><br><span class="line">    conn.close()</span><br><span class="line">    <span class="keyword">return</span> res    </span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 下载成功后移除 URL</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">failed_remove</span>(<span class="params">url</span>):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;删除下载成功的 url&#x27;</span>)</span><br><span class="line">    conn = sqlite3.connect(db_path)</span><br><span class="line">    cur = conn.cursor()</span><br><span class="line">    sql = <span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">        delete from failed where url = &#x27;%s&#x27;</span></span><br><span class="line"><span class="string">    &#x27;&#x27;&#x27;</span> % url</span><br><span class="line">    <span class="built_in">print</span>(sql)</span><br><span class="line">    cur.execute(sql)</span><br><span class="line">    conn.commit()</span><br><span class="line"></span><br></pre></td></tr></table></figure><blockquote><p>下载图片方法可以拆出来下载方法 和 图片地址获取方法，但是这里我很懒不想搞了，熬夜不好，早点睡了</p></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 下载图片</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">download_images</span>():</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;下载图片&#x27;</span>)</span><br><span class="line">    <span class="keyword">while</span> <span class="number">1</span>:</span><br><span class="line">        album = get_album()</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> album:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&#x27;全部完成！&#x27;</span>)</span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line">        album_id = album[<span class="number">0</span>][<span class="number">1</span>]</span><br><span class="line">        album_name = album[<span class="number">0</span>][<span class="number">2</span>]</span><br><span class="line">        url = album[<span class="number">0</span>][<span class="number">3</span>]</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            soup = get_page_content(url)</span><br><span class="line"></span><br><span class="line">            <span class="comment"># 获取页数</span></span><br><span class="line">            <span class="comment"># res_page = soup.select(&#x27;.pagenavi &gt; a &gt; span&#x27;)</span></span><br><span class="line">            res_page = soup.select(<span class="string">&#x27;#dm-fy &gt; li &gt; a&#x27;</span>)</span><br><span class="line">            <span class="comment"># album_page = res_page[-2].text</span></span><br><span class="line">            <span class="comment"># 根据网站实际情况，这里最后一页是广告，取倒数第二页为总页数</span></span><br><span class="line">            album_page = res_page[-<span class="number">3</span>].text</span><br><span class="line">            <span class="comment"># 文件夹名称</span></span><br><span class="line">            folder_path = <span class="string">&#x27;./pic/%d_%s/&#x27;</span> % (album_id, album_name)</span><br><span class="line">        <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&#x27;出错了！继续下次循环！&#x27;</span>)</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&#x27;=&#x27;</span> * <span class="number">30</span>)</span><br><span class="line">            <span class="keyword">continue</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">0</span>, <span class="built_in">int</span>(album_page)):</span><br><span class="line">            <span class="comment"># 需要修改地址</span></span><br><span class="line">            img_page_url = url + <span class="string">&#x27;?page=&#x27;</span> + <span class="built_in">str</span>(i + <span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">            soup = get_page_content(img_page_url)</span><br><span class="line">            <span class="comment"># 修改图片所在主题元素</span></span><br><span class="line">            res = <span class="built_in">str</span>(soup.find(class_=<span class="string">&quot;entry&quot;</span>))</span><br><span class="line"></span><br><span class="line">            <span class="keyword">try</span>:</span><br><span class="line">                image_src = <span class="built_in">str</span>(re.findall(re_image_src, res)[<span class="number">0</span>])</span><br><span class="line">                <span class="comment"># print(image_src)</span></span><br><span class="line">                <span class="keyword">if</span> <span class="keyword">not</span> os.path.exists(folder_path):</span><br><span class="line">                    os.makedirs(folder_path)</span><br><span class="line">                filepath = folder_path + <span class="string">&#x27;%s.jpg&#x27;</span> % re.findall(re_image_id, image_src)[<span class="number">0</span>]</span><br><span class="line"></span><br><span class="line">                opener = urllib.request.build_opener()</span><br><span class="line">                opener.addheaders = img_header</span><br><span class="line">                urllib.request.install_opener(opener)</span><br><span class="line"></span><br><span class="line">                urllib.request.urlretrieve(image_src, filepath)</span><br><span class="line">            <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">                <span class="built_in">print</span>(e)</span><br><span class="line">                <span class="built_in">print</span>(<span class="string">&#x27;出现错误，跳过本次，重新爬取整个专辑&#x27;</span>)</span><br><span class="line">                <span class="built_in">print</span>(album_id, album_name)</span><br><span class="line">                <span class="built_in">print</span>(<span class="string">&#x27;-&#x27;</span> * <span class="number">30</span>)</span><br><span class="line">                <span class="comment"># 将出错的 img_page_url 放到数据库 下次再爬</span></span><br><span class="line">                failed_to_db(img_page_url)</span><br><span class="line">                <span class="keyword">continue</span></span><br><span class="line"></span><br><span class="line">        update_album(album[<span class="number">0</span>][<span class="number">0</span>])</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span> <span class="number">1</span>:</span><br><span class="line">        failed = get_failed()</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> failed:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&#x27;全部完成！&#x27;</span>)</span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line"></span><br><span class="line">        <span class="built_in">print</span>(failed)</span><br><span class="line">        url = album[<span class="number">0</span>][<span class="number">0</span>]</span><br><span class="line"></span><br><span class="line">        soup = get_page_content(url)</span><br><span class="line">        <span class="comment"># 修改图片所在主题元素</span></span><br><span class="line">        res = <span class="built_in">str</span>(soup.find(class_=<span class="string">&quot;entry&quot;</span>))</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            image_src = <span class="built_in">str</span>(re.findall(re_image_src, res)[<span class="number">0</span>])</span><br><span class="line">            <span class="built_in">print</span>(image_src)</span><br><span class="line">            <span class="keyword">if</span> <span class="keyword">not</span> os.path.exists(folder_path):</span><br><span class="line">                os.makedirs(folder_path)</span><br><span class="line">            filepath = folder_path + <span class="string">&#x27;%s.jpg&#x27;</span> % re.findall(re_image_id, image_src)[<span class="number">0</span>]</span><br><span class="line"></span><br><span class="line">            opener = urllib.request.build_opener()</span><br><span class="line">            opener.addheaders = img_header</span><br><span class="line">            urllib.request.install_opener(opener)</span><br><span class="line"></span><br><span class="line">            urllib.request.urlretrieve(image_src, filepath)</span><br><span class="line">        <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">            <span class="built_in">print</span>(e)</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&#x27;出现错误，跳过本次，重新爬取整个专辑&#x27;</span>)</span><br><span class="line">            <span class="built_in">print</span>(album_id, album_name)</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&#x27;-&#x27;</span> * <span class="number">30</span>)</span><br><span class="line">            <span class="comment"># 将出错的 img_page_url 放到数据库 下次再爬</span></span><br><span class="line">            failed_to_db(img_page_url)</span><br><span class="line">            <span class="keyword">continue</span></span><br><span class="line"></span><br><span class="line">        <span class="comment"># 删除 failed 队列</span></span><br><span class="line">        failed_remove(url)</span><br><span class="line"></span><br></pre></td></tr></table></figure><ul><li>主程序</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">main</span>():</span><br><span class="line">    <span class="comment"># 专辑数据爬取到本地</span></span><br><span class="line">    album_to_local()</span><br><span class="line">    <span class="comment"># 下载图片</span></span><br><span class="line">    download_images()</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    main()</span><br></pre></td></tr></table></figure><h1 id="豆瓣电影-top250-爬取"><a href="#豆瓣电影-top250-爬取" class="headerlink" title="豆瓣电影 top250 爬取"></a>豆瓣电影 top250 爬取</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Author:Xtongs</span></span><br><span class="line"><span class="comment"># -*- coding = utf-8 -*-</span></span><br><span class="line"><span class="comment"># @Time: 2023/3/2 下午7:14</span></span><br><span class="line"><span class="comment"># @Author: xtong</span></span><br><span class="line"><span class="comment"># @File: main.py</span></span><br><span class="line"><span class="comment"># @Software: VScode</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 爬取地址:https://movie.douban.com/top250</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> urllib.request</span><br><span class="line"><span class="keyword">import</span> re</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> xlwt</span><br><span class="line"><span class="keyword">from</span> bs4 <span class="keyword">import</span> BeautifulSoup</span><br><span class="line"></span><br><span class="line"><span class="comment"># 浏览器请求头</span></span><br><span class="line">head = &#123;</span><br><span class="line">    <span class="string">&quot;User-Agent&quot;</span>: <span class="string">&quot;Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/88.0.4324.96 Safari/537.36&quot;</span>,</span><br><span class="line">    <span class="comment"># &quot;Referer&quot;: &quot;https://movie.douban.com/&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 需要修改的地方，注意正则要与网站对应</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 电影排名</span></span><br><span class="line">re_movie_rank = re.<span class="built_in">compile</span>(<span class="string">r&#x27;&lt;em class=&quot;&quot;&gt;(.*?)&lt;/em&gt;&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 电影标题</span></span><br><span class="line"><span class="comment"># re_album_name = re.compile(r&#x27;.*&gt;(.*)&lt;/a&gt;&lt;/span&gt;&#x27;)</span></span><br><span class="line">re_album_name = re.<span class="built_in">compile</span>(<span class="string">r&#x27;&lt;span class=&quot;title&quot;&gt;(.*?)&lt;/span&gt;&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 电影链接地址</span></span><br><span class="line"><span class="comment"># re_album_link = re.compile(r&#x27;href=&quot;(.*)&quot; target=&quot;_blank&quot;&gt;&lt;img&#x27;)</span></span><br><span class="line">re_album_link = re.<span class="built_in">compile</span>(<span class="string">r&#x27;&lt;a href=&quot;(.*)&quot;&gt;&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 电影封面图片</span></span><br><span class="line"><span class="comment"># re_cover_link = re.compile(r&#x27;data-original=&quot;(.*?)&quot;&#x27;)</span></span><br><span class="line">re_cover_link = re.<span class="built_in">compile</span>(<span class="string">r&#x27;src=&quot;(.*?)&quot;&#x27;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">main</span>():</span><br><span class="line">    <span class="comment"># 电影数据爬取到本地</span></span><br><span class="line">    album_to_local()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 电影数据爬取到本地</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">album_to_local</span>():</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;开始&#x27;</span>)</span><br><span class="line">    <span class="comment"># 爬取地址</span></span><br><span class="line">    baseurl = <span class="string">&#x27;https://movie.douban.com/top250&#x27;</span></span><br><span class="line">    save_path = <span class="string">&#x27;豆瓣250.xls&#x27;</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;爬取地址：%s&#x27;</span> % baseurl)</span><br><span class="line">    <span class="comment"># 爬取电影信息</span></span><br><span class="line">    save_movie_list(baseurl, <span class="number">10</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 获取页面内容</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">get_page_content</span>(<span class="params">url</span>):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;获取页面内容:%s&#x27;</span> % url)</span><br><span class="line">    request = urllib.request.Request(url, headers=head)</span><br><span class="line">    html = <span class="string">&#x27;&#x27;</span></span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        response = urllib.request.urlopen(request, timeout=<span class="number">5</span>)</span><br><span class="line">        html = response.read().decode()</span><br><span class="line">    <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">        <span class="built_in">print</span>(e)</span><br><span class="line">    <span class="keyword">return</span> BeautifulSoup(html, <span class="string">&quot;html.parser&quot;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 爬取保存电影信息</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">save_movie_list</span>(<span class="params">baseurl, total_page</span>):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;获取电影信息&#x27;</span>)</span><br><span class="line">    all_data = []</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">0</span>, <span class="built_in">int</span>(total_page)):</span><br><span class="line">        data_list = []</span><br><span class="line">        <span class="comment"># 修改电影地址</span></span><br><span class="line">        url = baseurl + <span class="string">&#x27;?start=&#x27;</span> + <span class="built_in">str</span>((i)*<span class="number">25</span>)</span><br><span class="line">        soup = get_page_content(url)</span><br><span class="line">        <span class="comment"># 修改电影信息获取 find_all_next</span></span><br><span class="line">        <span class="keyword">for</span> item <span class="keyword">in</span> soup.find(<span class="built_in">id</span>=<span class="string">&quot;content&quot;</span>).find_all(class_=<span class="string">&#x27;item&#x27;</span>):</span><br><span class="line">            item = <span class="built_in">str</span>(item)</span><br><span class="line">            <span class="comment"># print(item)</span></span><br><span class="line">            data = []</span><br><span class="line">            movie_rank = re.findall(re_movie_rank, item)[<span class="number">0</span>]</span><br><span class="line">            <span class="comment"># print(re.findall(re_album_name, item))</span></span><br><span class="line">            album_name = re.findall(re_album_name, item)[<span class="number">0</span>]</span><br><span class="line">            <span class="comment"># print(album_name)</span></span><br><span class="line">            album_link = re.findall(re_album_link, item)[<span class="number">0</span>]</span><br><span class="line">            <span class="comment"># print(album_link)</span></span><br><span class="line">            cover_link = re.findall(re_cover_link, item)[<span class="number">0</span>]</span><br><span class="line">            <span class="comment"># print(cover_link)</span></span><br><span class="line">            data.append(movie_rank)</span><br><span class="line">            data.append(album_name)</span><br><span class="line">            data.append(album_link)</span><br><span class="line">            data.append(cover_link)</span><br><span class="line">            data_list.append(data)</span><br><span class="line">            <span class="comment"># print(data)</span></span><br><span class="line">            <span class="comment"># print(data_list)</span></span><br><span class="line">            <span class="comment"># break</span></span><br><span class="line">        <span class="comment"># break</span></span><br><span class="line">        <span class="comment"># print(data_list)</span></span><br><span class="line">        <span class="comment"># break</span></span><br><span class="line">        <span class="comment"># save_to_db(data_list)</span></span><br><span class="line">        all_data.extend(data_list)</span><br><span class="line">    <span class="built_in">print</span>(all_data)</span><br><span class="line">    save_to_excel(all_data, <span class="string">&#x27;movie.xls&#x27;</span>)</span><br><span class="line">    <span class="keyword">return</span> data_list</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 保存到excel测试</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">save_to_excel</span>(<span class="params">data_list, save_path</span>):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;保存execl&#x27;</span>)</span><br><span class="line">    book = xlwt.Workbook(encoding=<span class="string">&quot;utf-8&quot;</span>, style_compression=<span class="number">0</span>)</span><br><span class="line">    sheet = book.add_sheet(<span class="string">&#x27;电影&#x27;</span>, cell_overwrite_ok=<span class="literal">True</span>)</span><br><span class="line">    col = (<span class="string">&#x27;电影排名&#x27;</span>, <span class="string">&#x27;电影名称&#x27;</span>, <span class="string">&#x27;介绍地址&#x27;</span>, <span class="string">&#x27;电影海报&#x27;</span>)</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">0</span>, <span class="number">4</span>):</span><br><span class="line">        sheet.write(<span class="number">0</span>, i, col[i])</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">0</span>, <span class="built_in">len</span>(data_list)):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;第%d条&quot;</span> % i)</span><br><span class="line">        data = data_list[i]</span><br><span class="line">        <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">0</span>, <span class="number">4</span>):</span><br><span class="line">            sheet.write(i + <span class="number">1</span>, j, data[j])</span><br><span class="line">    book.save(save_path)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    main()</span><br></pre></td></tr></table></figure><h1 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h1><ul><li><a href="https://www.python.org/">Python 官网</a></li></ul><style>header.intro-header {    background-blend-mode: multiply;}</style>]]></content>
      
      
      <categories>
          
          <category> 技术坑记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> python </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Ant-Design-Vue-Pro列表展示数据总数</title>
      <link href="/2022/05/11/Ant-Design-Vue-Pro%E5%88%97%E8%A1%A8%E5%B1%95%E7%A4%BA%E6%95%B0%E6%8D%AE%E6%80%BB%E6%95%B0/"/>
      <url>/2022/05/11/Ant-Design-Vue-Pro%E5%88%97%E8%A1%A8%E5%B1%95%E7%A4%BA%E6%95%B0%E6%8D%AE%E6%80%BB%E6%95%B0/</url>
      
        <content type="html"><![CDATA[<h1 id="antd-vue-的官方文档"><a href="#antd-vue-的官方文档" class="headerlink" title="antd vue 的官方文档"></a>antd vue 的官方文档</h1><ul><li><a href="https://antdv.com/components/table#API">antd vue: Table</a></li><li><a href="https://antdv.com/components/pagination#components-pagination-demo-total">antd vue: Pagination</a></li></ul><h1 id="s-table-增加自定义页码跳转的支持"><a href="#s-table-增加自定义页码跳转的支持" class="headerlink" title="s-table 增加自定义页码跳转的支持"></a>s-table 增加自定义页码跳转的支持</h1><ul><li>src&#x2F;components&#x2F;Table&#x2F;index.js</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 在 props 中增加 showQuickJumper</span></span><br><span class="line">...</span><br><span class="line"><span class="attr">showSizeChanger</span>: &#123;</span><br><span class="line">  <span class="attr">type</span>: <span class="title class_">Boolean</span>,</span><br><span class="line">  <span class="attr">default</span>: <span class="literal">true</span></span><br><span class="line">&#125;,</span><br><span class="line">+ <span class="attr">showQuickJumper</span>: &#123;</span><br><span class="line">+   <span class="attr">type</span>: <span class="title class_">Boolean</span>,</span><br><span class="line">+   <span class="attr">default</span>: <span class="literal">false</span></span><br><span class="line">+ &#125;,</span><br><span class="line">...</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 在 loadData 方法的 Pagination 配置，增加对 showQuickJumper 配置</span></span><br><span class="line">...</span><br><span class="line"><span class="variable language_">this</span>.<span class="property">localPagination</span> = <span class="variable language_">this</span>.<span class="property">showPagination</span> &amp;&amp; <span class="title class_">Object</span>.<span class="title function_">assign</span>(&#123;&#125;, <span class="variable language_">this</span>.<span class="property">localPagination</span>, &#123;</span><br><span class="line">  <span class="attr">current</span>: r.<span class="property">pageNo</span>, <span class="comment">// 返回结果中的当前分页数</span></span><br><span class="line">  <span class="attr">total</span>: r.<span class="property">totalCount</span>, <span class="comment">// 返回结果中的总记录数</span></span><br><span class="line">  <span class="attr">showSizeChanger</span>: <span class="variable language_">this</span>.<span class="property">showSizeChanger</span>,</span><br><span class="line">+   <span class="attr">showQuickJumper</span>: <span class="variable language_">this</span>.<span class="property">showQuickJumper</span>,</span><br><span class="line">  <span class="attr">pageSize</span>: (pagination &amp;&amp; pagination.<span class="property">pageSize</span>) ||</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">localPagination</span>.<span class="property">pageSize</span></span><br><span class="line">&#125;) || <span class="literal">false</span></span><br><span class="line">...</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>如果在 props 中设置了默认 <code>false</code>，则在 s-table 组件调用时可以配置 <code>show-quick-jumper</code> 来开启自定义页码跳转</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">s-table</span></span></span><br><span class="line"><span class="tag">  <span class="attr">ref</span>=<span class="string">&quot;table&quot;</span></span></span><br><span class="line"><span class="tag">+   <span class="attr">show-quick-jumper</span></span></span><br><span class="line"><span class="tag">  <span class="attr">:columns</span>=<span class="string">&quot;columns&quot;</span></span></span><br><span class="line"><span class="tag">  <span class="attr">:data</span>=<span class="string">&quot;loadData&quot;</span></span></span><br><span class="line"><span class="tag">  <span class="attr">:alert</span>=<span class="string">&quot;options.alert&quot;</span></span></span><br><span class="line"><span class="tag">  <span class="attr">:rowKey</span>=<span class="string">&quot;(record) =&gt; record.id&quot;</span></span></span><br><span class="line"><span class="tag">  <span class="attr">:rowSelection</span>=<span class="string">&quot;options.rowSelection&quot;</span></span></span><br><span class="line"><span class="tag">&gt;</span></span><br></pre></td></tr></table></figure><h1 id="s-table-增加数据总数-total-显示"><a href="#s-table-增加数据总数-total-显示" class="headerlink" title="s-table 增加数据总数 total 显示"></a>s-table 增加数据总数 total 显示</h1><p>与改造 s-table 组件，支持自定义页码跳转类似，我们只需把原 antd vue table 组件中的 showTotal 封装进 s-table 组件中即可。</p><ul><li>src&#x2F;components&#x2F;Table&#x2F;index.js</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 在 props 中增加 showTotal</span></span><br><span class="line">...</span><br><span class="line"><span class="attr">showSizeChanger</span>: &#123;</span><br><span class="line">  <span class="attr">type</span>: <span class="title class_">Boolean</span>,</span><br><span class="line">  <span class="attr">default</span>: <span class="literal">true</span></span><br><span class="line">&#125;,</span><br><span class="line"><span class="attr">showQuickJumper</span>: &#123;</span><br><span class="line">  <span class="attr">type</span>: <span class="title class_">Boolean</span>,</span><br><span class="line">  <span class="attr">default</span>: <span class="literal">false</span></span><br><span class="line">&#125;,</span><br><span class="line">+ <span class="attr">showTotal</span>: &#123;</span><br><span class="line">+   <span class="attr">type</span>: <span class="title class_">Boolean</span>,</span><br><span class="line">+   <span class="attr">default</span>: <span class="literal">true</span></span><br><span class="line">+ &#125;,</span><br><span class="line">...</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 在 loadData 方法的 Pagination 配置，增加对 showTotal 配置</span></span><br><span class="line">...</span><br><span class="line"><span class="variable language_">this</span>.<span class="property">localPagination</span> = <span class="variable language_">this</span>.<span class="property">showPagination</span> &amp;&amp; <span class="title class_">Object</span>.<span class="title function_">assign</span>(&#123;&#125;, <span class="variable language_">this</span>.<span class="property">localPagination</span>, &#123;</span><br><span class="line">  <span class="attr">current</span>: r.<span class="property">pageNo</span>, <span class="comment">// 返回结果中的当前分页数</span></span><br><span class="line">  <span class="attr">total</span>: r.<span class="property">totalCount</span>, <span class="comment">// 返回结果中的总记录数</span></span><br><span class="line">  <span class="attr">showSizeChanger</span>: <span class="variable language_">this</span>.<span class="property">showSizeChanger</span>,</span><br><span class="line">  <span class="attr">showQuickJumper</span>: <span class="variable language_">this</span>.<span class="property">showQuickJumper</span>,</span><br><span class="line">+   <span class="attr">showTotal</span>: <span class="variable language_">this</span>.<span class="property">showTotal</span> ? <span class="function">(<span class="params">total</span>) =&gt;</span> <span class="string">`共 <span class="subst">$&#123;total&#125;</span> 条`</span> : <span class="literal">false</span>,</span><br><span class="line">  <span class="attr">pageSize</span>: (pagination &amp;&amp; pagination.<span class="property">pageSize</span>) ||</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">localPagination</span>.<span class="property">pageSize</span></span><br><span class="line">&#125;) || <span class="literal">false</span></span><br><span class="line">...</span><br><span class="line"></span><br></pre></td></tr></table></figure><h1 id="软件版本：vue-antd-pro-3-0-2"><a href="#软件版本：vue-antd-pro-3-0-2" class="headerlink" title="软件版本：vue-antd-pro 3.0.2"></a>软件版本：vue-antd-pro 3.0.2</h1><ul><li>“ant-design-vue”: “^1.7.6”</li><li>“vue”: “^2.6.0”,</li></ul><h1 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h1><ul><li><a href="https://blog.csdn.net/weixin_39429253/article/details/102683264">ant design vue pro表格分页栏添加查询数据总数</a></li><li><a href="https://blog.csdn.net/qq_44741558/article/details/118577068">antd s-table 分页时显示 total 当前总数据条数</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> 技术坑记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> vue </tag>
            
            <tag> antd </tag>
            
            <tag> 前端 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>PHP好用的内建函数推荐 常用函数的使用场景</title>
      <link href="/2022/05/07/PHP%E5%A5%BD%E7%94%A8%E7%9A%84%E5%86%85%E5%BB%BA%E5%87%BD%E6%95%B0%E6%8E%A8%E8%8D%90/"/>
      <url>/2022/05/07/PHP%E5%A5%BD%E7%94%A8%E7%9A%84%E5%86%85%E5%BB%BA%E5%87%BD%E6%95%B0%E6%8E%A8%E8%8D%90/</url>
      
        <content type="html"><![CDATA[<h1 id="in-array-—-检查数组中是否存在某个值"><a href="#in-array-—-检查数组中是否存在某个值" class="headerlink" title="in_array — 检查数组中是否存在某个值"></a>in_array — 检查数组中是否存在某个值</h1><p>文档：<a href="https://www.php.net/manual/zh/function.in-array">https://www.php.net/manual/zh/function.in-array</a></p><p>常用在一些简单验证上，如：</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 用户权限范围数组</span></span><br><span class="line"><span class="variable">$user_auth</span> = [<span class="number">1</span>,<span class="number">3</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>];</span><br><span class="line"><span class="comment">// 查阅当前数据所需权限</span></span><br><span class="line"><span class="variable">$need_auth</span> = <span class="number">9</span>;</span><br><span class="line"><span class="comment">// 判断当前用户查看权限</span></span><br><span class="line"><span class="keyword">if</span>(!<span class="title function_ invoke__">in_array</span>(<span class="variable">$need_auth</span>, <span class="variable">$user_auth</span>))&#123;</span><br><span class="line">  <span class="title function_ invoke__">err</span>(<span class="string">&#x27;无权查看！&#x27;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="explode-—-使用一个字符串分割另一个字符串"><a href="#explode-—-使用一个字符串分割另一个字符串" class="headerlink" title="explode — 使用一个字符串分割另一个字符串"></a>explode — 使用一个字符串分割另一个字符串</h1><p>文档：<a href="https://www.php.net/manual/zh/function.explode.php">https://www.php.net/manual/zh/function.explode.php</a></p><p>数据库经常会在一个字段中储存用逗号’,’（或其他字符）分割的一组数据，用 explode 可以方便地将其转换为数组，同时可以配合 in_array 进行数据验证，如：</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 修改当前部门的父级部门时，判断父级部门是否合法</span></span><br><span class="line"><span class="comment">// （本部门的）父部门不能是（本部门的）子部门</span></span><br><span class="line"><span class="keyword">if</span>(<span class="title function_ invoke__">in_array</span>(<span class="variable">$id</span>, <span class="title function_ invoke__">explode</span>(<span class="string">&#x27;,&#x27;</span>, <span class="variable">$parent</span>-&gt;parent_ids))) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">$this</span>-&gt;<span class="title function_ invoke__">err</span>(<span class="title class_">Errors</span>::<span class="variable constant_">DEPT_PARENT_CANT_BE_CHILDREN</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>explode</code> 对应的相反操作是 <code>implode</code>。implode 可以将数组转换成字符串进行存储。</p><p>前端提交来的附件id数组，我们可以转成逗号分割的字符串储存到数据库字段中。</p><h1 id="array-column-—-返回输入数组中指定列的值"><a href="#array-column-—-返回输入数组中指定列的值" class="headerlink" title="array_column — 返回输入数组中指定列的值"></a>array_column — 返回输入数组中指定列的值</h1><p>文档：<a href="https://www.php.net/manual/zh/function.array-column.php">https://www.php.net/manual/zh/function.array-column.php</a></p><p>当要从二维数组中获取某一个 key 的所有值组成一个数组时，就可以使用这个函数。</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 班级学生信息</span></span><br><span class="line"><span class="variable">$students</span> = [</span><br><span class="line">  [</span><br><span class="line">    <span class="string">&#x27;id&#x27;</span> =&gt; <span class="number">1</span>,</span><br><span class="line">    <span class="string">&#x27;name&#x27;</span> =&gt; <span class="string">&#x27;张三&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;age&#x27;</span> =&gt; <span class="number">14</span>,</span><br><span class="line">  ],</span><br><span class="line">  [</span><br><span class="line">    <span class="string">&#x27;id&#x27;</span> =&gt; <span class="number">4</span>,</span><br><span class="line">    <span class="string">&#x27;name&#x27;</span> =&gt; <span class="string">&#x27;李四&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;age&#x27;</span> =&gt; <span class="number">12</span>,</span><br><span class="line">  ],</span><br><span class="line">  [</span><br><span class="line">    <span class="string">&#x27;id&#x27;</span> =&gt; <span class="number">34</span>,</span><br><span class="line">    <span class="string">&#x27;name&#x27;</span> =&gt; <span class="string">&#x27;王五&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;age&#x27;</span> =&gt; <span class="number">13</span>,</span><br><span class="line">  ],</span><br><span class="line">  [</span><br><span class="line">    <span class="string">&#x27;id&#x27;</span> =&gt; <span class="number">55</span>,</span><br><span class="line">    <span class="string">&#x27;name&#x27;</span> =&gt; <span class="string">&#x27;赵六&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;age&#x27;</span> =&gt; <span class="number">14</span>,</span><br><span class="line">  ],</span><br><span class="line">];</span><br><span class="line"><span class="comment">// 获取学生名单的数组</span></span><br><span class="line"><span class="variable">$student_names</span> = <span class="title function_ invoke__">array_column</span>(<span class="variable">$students</span>, <span class="string">&#x27;name&#x27;</span>);</span><br><span class="line"><span class="comment">// 新学生是否和班里的其他学生重名</span></span><br><span class="line"><span class="variable">$new_student</span> = [</span><br><span class="line">  <span class="string">&#x27;name&#x27;</span> =&gt; <span class="string">&#x27;李三&#x27;</span>,</span><br><span class="line">  <span class="string">&#x27;age&#x27;</span> =&gt; <span class="number">15</span>,</span><br><span class="line">];</span><br><span class="line"><span class="keyword">if</span>(<span class="title function_ invoke__">in_array</span>(<span class="variable">$new_student</span>[<span class="string">&#x27;name&#x27;</span>], <span class="variable">$student_names</span>)) &#123;</span><br><span class="line">  <span class="keyword">echo</span> <span class="string">&#x27;巧了，本班也有一名同学叫：&#x27;</span> . <span class="variable">$new_student</span>[<span class="string">&#x27;name&#x27;</span>];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="array-values-—-返回数组中所有的值"><a href="#array-values-—-返回数组中所有的值" class="headerlink" title="array_values — 返回数组中所有的值"></a>array_values — 返回数组中所有的值</h1><p>文档：<a href="https://www.php.net/manual/zh/function.array-values">https://www.php.net/manual/zh/function.array-values</a></p><p>通常在遍历处理数组内容时，使用 <code>unset()</code> 去除不需要的元素后，会导致数组的索引不连续，写接口返回给前端就会变成对象；要避免这种情况，可以在这里使用 <code>array_values</code> 进行索引重建。</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_ invoke__">print_r</span>(<span class="variable">$list</span>);</span><br><span class="line"></span><br><span class="line"><span class="title function_ invoke__">Array</span>(</span><br><span class="line">  [<span class="number">0</span>] =&gt; <span class="string">&#x27;apple&#x27;</span></span><br><span class="line">  [<span class="number">4</span>] =&gt; <span class="string">&#x27;car&#x27;</span></span><br><span class="line">  [<span class="number">5</span>] =&gt; <span class="string">&#x27;google&#x27;</span></span><br><span class="line">  [<span class="number">7</span>] =&gt; <span class="string">&#x27;youtube&#x27;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment">// array_values() 返回 input 数组中所有的值并给其建立数字索引。</span></span><br><span class="line"><span class="variable">$list</span> = <span class="title function_ invoke__">array_values</span>(<span class="variable">$list</span>);</span><br><span class="line"></span><br><span class="line"><span class="title function_ invoke__">Array</span>(</span><br><span class="line">  [<span class="number">0</span>] =&gt; <span class="string">&#x27;apple&#x27;</span></span><br><span class="line">  [<span class="number">1</span>] =&gt; <span class="string">&#x27;car&#x27;</span></span><br><span class="line">  [<span class="number">2</span>] =&gt; <span class="string">&#x27;google&#x27;</span></span><br><span class="line">  [<span class="number">3</span>] =&gt; <span class="string">&#x27;youtube&#x27;</span></span><br><span class="line">)</span><br><span class="line"></span><br></pre></td></tr></table></figure><h1 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h1><ul><li><a href="https://www.php.net/">PHP 官方手册</a></li></ul><style>header.intro-header {    background-blend-mode: multiply;}</style>]]></content>
      
      
      <categories>
          
          <category> 技术坑记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> php </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>PHP脚本批量视频转码 使用ffmpeg工具</title>
      <link href="/2022/05/07/PHP%E8%84%9A%E6%9C%AC%E6%89%B9%E9%87%8F%E8%A7%86%E9%A2%91%E8%BD%AC%E7%A0%81/"/>
      <url>/2022/05/07/PHP%E8%84%9A%E6%9C%AC%E6%89%B9%E9%87%8F%E8%A7%86%E9%A2%91%E8%BD%AC%E7%A0%81/</url>
      
        <content type="html"><![CDATA[<p>有给视频转码的需求，但是视频很多，一个一个转太累，所以写一个脚本来转码。</p><p>又因为熟悉php，就直接写php脚本了。</p><h1 id="1-准备工作"><a href="#1-准备工作" class="headerlink" title="1 准备工作"></a>1 准备工作</h1><p>使用php，当然需要php环境了，还有转码的软件ffmpeg。</p><h2 id="1-1-PHP运行环境下载"><a href="#1-1-PHP运行环境下载" class="headerlink" title="1.1 PHP运行环境下载"></a>1.1 PHP运行环境下载</h2><p>在php官网上下载php7.4的windows版：</p><p><a href="https://www.php.net/releases/">https://www.php.net/releases/</a></p><blockquote><p>php-7.4.33-nts-Win32-vc15-x64.zip</p></blockquote><h2 id="1-2-ffmpeg下载"><a href="#1-2-ffmpeg下载" class="headerlink" title="1.2 ffmpeg下载"></a>1.2 ffmpeg下载</h2><p>在ffmpeg官网下载最新的Windows版：</p><p><a href="https://ffmpeg.org/download.html">https://ffmpeg.org/download.html</a></p><blockquote><p>ffmpeg-master-latest-win64-gpl.zip</p></blockquote><h1 id="2-环境配置"><a href="#2-环境配置" class="headerlink" title="2 环境配置"></a>2 环境配置</h1><ul><li>将php-7.4.33-nts-Win32-vc15-x64.zip解压，并将 php-7.4.33-nts-Win32-vc15-x64 目录添加到环境变量 PATH中</li></ul><p>在cmd 或 powershell 中 执行 php -v，显示</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">PHP 7.4.33 (cli) (built: Nov  2 2022 15:06:48) ( NTS Visual C++ 2017 x64 )</span><br><span class="line">Copyright (c) The PHP Group</span><br><span class="line">Zend Engine v3.4.0, Copyright (c) Zend Technologies</span><br></pre></td></tr></table></figure><ul><li>将ffmpeg-master-latest-win64-gpl.zip解压，并将 ffmpeg-master-latest-win64-gpl\bin 目录添加到环境变量PATH中</li></ul><p>在 cmd 或 powershell 中执行 ffmpeg -version，显示</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">ffmpeg version N-110402-ge3143703e9-20230427 Copyright (c) 2000-2023 the FFmpeg developers</span><br><span class="line">...</span><br><span class="line">...</span><br><span class="line">libpostproc    57.  2.100 / 57.  2.100</span><br></pre></td></tr></table></figure><h1 id="3-脚本编写"><a href="#3-脚本编写" class="headerlink" title="3 脚本编写"></a>3 脚本编写</h1><p>新建 run.php</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="title function_ invoke__">error_reporting</span>(E_ALL);</span><br><span class="line"><span class="title function_ invoke__">ini_set</span>(<span class="string">&#x27;display_errors&#x27;</span>, <span class="string">&#x27;On&#x27;</span>);</span><br><span class="line"><span class="title function_ invoke__">ini_set</span>(<span class="string">&#x27;memory_limit&#x27;</span>, <span class="string">&#x27;1024m&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 原来的目录（当前目录）</span></span><br><span class="line"><span class="variable">$fileDir</span> = <span class="string">&#x27;.&#x27;</span>;</span><br><span class="line"><span class="comment">// 新的目录</span></span><br><span class="line"><span class="variable">$fileOutput</span> = <span class="string">&#x27;.&#x27;</span> . DIRECTORY_SEPARATOR . <span class="string">&#x27;Videos&#x27;</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="variable">$mp4Files</span> = [];</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 目录下是否有mp4</span></span><br><span class="line"><span class="variable">$files</span> = <span class="title function_ invoke__">scandir</span>(<span class="variable">$fileDir</span>);</span><br><span class="line"><span class="keyword">foreach</span> (<span class="variable">$files</span> <span class="keyword">as</span> <span class="variable">$file</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="string">&#x27;mp4&#x27;</span> === <span class="title function_ invoke__">strtolower</span>(<span class="title function_ invoke__">pathinfo</span>(<span class="variable">$file</span>, PATHINFO_EXTENSION))) &#123;</span><br><span class="line">        <span class="variable">$mp4Files</span>[] = <span class="variable">$fileDir</span> . DIRECTORY_SEPARATOR . <span class="variable">$file</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable">$videoCount</span> = <span class="title function_ invoke__">count</span>(<span class="variable">$mp4Files</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">foreach</span> (<span class="variable">$mp4Files</span> <span class="keyword">as</span> <span class="variable">$i</span> =&gt; <span class="variable">$mp4</span>) &#123;</span><br><span class="line">    <span class="variable">$outPath</span> = <span class="variable">$fileOutput</span> . DIRECTORY_SEPARATOR . <span class="title function_ invoke__">substr</span>(<span class="variable">$mp4</span>, <span class="number">2</span>);</span><br><span class="line">    <span class="variable">$cmd</span> = <span class="string">&quot;ffmpeg -i <span class="subst">$mp4</span> -b:v 1M <span class="subst">$outPath</span> -loglevel quiet&quot;</span>;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&#x27;current:&#x27;</span> . (<span class="variable">$i</span> + <span class="number">1</span>) . <span class="string">&#x27;/ total: &#x27;</span> . <span class="variable">$videoCount</span> . PHP_EOL;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&quot;Starting ffmpeg...\n\n&quot;</span>;</span><br><span class="line">    <span class="keyword">echo</span> <span class="title function_ invoke__">shell_exec</span>(<span class="variable">$cmd</span>);</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&quot;Done.\n&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><h1 id="4-执行脚本"><a href="#4-执行脚本" class="headerlink" title="4 执行脚本"></a>4 执行脚本</h1><p>进入脚本存放的目录（转码视频目录）<br>在 cmd 或 powershell 中直接执行</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">php run.php</span><br></pre></td></tr></table></figure><ul><li>核心内容就是：使用php的 <code>shell_exec</code> 直接执行拼接好的命令。</li></ul><h1 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h1><ul><li><a href="https://php.net/">php官网</a></li><li><a href="https://ffmpeg.org/ffmpeg.html">ffmpeg官方文档</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> 技术坑记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> php </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Ant-Design-Vue-Pro图片点击预览 老版本通过引入 v-viewer 实现</title>
      <link href="/2022/05/07/Ant-Design-Vue-Pro%E5%9B%BE%E7%89%87%E7%82%B9%E5%87%BB%E9%A2%84%E8%A7%88/"/>
      <url>/2022/05/07/Ant-Design-Vue-Pro%E5%9B%BE%E7%89%87%E7%82%B9%E5%87%BB%E9%A2%84%E8%A7%88/</url>
      
        <content type="html"><![CDATA[<h1 id="官方-a-image-组件"><a href="#官方-a-image-组件" class="headerlink" title="官方 a-image 组件"></a>官方 a-image 组件</h1><p>组件文档：<a href="https://2x.antdv.com/components/image-cn">https://2x.antdv.com/components/image-cn</a></p><p>因为vue版本和antdv版本的关系，在 <code>vue-antd-pro 3.0.2</code> 的环境下（<strong><a href="mailto:&#x61;&#x6e;&#x74;&#45;&#x64;&#101;&#115;&#x69;&#x67;&#x6e;&#x2d;&#118;&#x75;&#x65;&#x40;&#x31;&#46;&#55;&#x2e;&#54;">&#x61;&#x6e;&#x74;&#45;&#x64;&#101;&#115;&#x69;&#x67;&#x6e;&#x2d;&#118;&#x75;&#x65;&#x40;&#x31;&#46;&#55;&#x2e;&#54;</a>、<a href="mailto:&#118;&#x75;&#101;&#64;&#x32;&#x2e;&#54;&#x2e;&#x30;">&#118;&#x75;&#101;&#64;&#x32;&#x2e;&#54;&#x2e;&#x30;</a></strong>）无法直接使用，但我们可以选择第三方的组件（v-viewer）来实现类似的效果。当然，如果你使用的是最新版的 antdv，应该是可以直接使用官方组件的，但或许你在实际项目中 antdv 的版本已经锁定老版本，且不便升级，使用第三方预览组件是更好的选择。</p><h1 id="引入-118-x2d-118-x69-x65-x77-x65-114-x40-49-x2e-53-46-x31"><a href="#引入-118-x2d-118-x69-x65-x77-x65-114-x40-49-x2e-53-46-x31" class="headerlink" title="引入 &#118;&#x2d;&#118;&#x69;&#x65;&#x77;&#x65;&#114;&#x40;&#49;&#x2e;&#53;&#46;&#x31;"></a>引入 <a href="mailto:&#118;&#x2d;&#118;&#x69;&#x65;&#x77;&#x65;&#114;&#x40;&#49;&#x2e;&#53;&#46;&#x31;">&#118;&#x2d;&#118;&#x69;&#x65;&#x77;&#x65;&#114;&#x40;&#49;&#x2e;&#53;&#46;&#x31;</a></h1><p>在 antdv 中引入 v-viewer（注意版本：1.5.1）<br>v-viewer：<a href="https://www.npmjs.com/package/v-viewer">https://www.npmjs.com/package/v-viewer</a></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yarn add v-viewer@1.5.1</span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">➜  antd-demo git:(main) yarn add v-viewer@1.5.1</span><br><span class="line">yarn add v1.22.17</span><br><span class="line">[1/4] 🔍  Resolving packages...</span><br><span class="line">[2/4] 🚚  Fetching packages...</span><br><span class="line">[3/4] 🔗  Linking dependencies...</span><br><span class="line">[4/4] 🔨  Building fresh packages...</span><br><span class="line">success Saved lockfile.</span><br><span class="line">success Saved 3 new dependencies.</span><br><span class="line">info Direct dependencies</span><br><span class="line">└─ v-viewer@1.5.1</span><br><span class="line">info All dependencies</span><br><span class="line">├─ throttle-debounce@2.3.0</span><br><span class="line">├─ v-viewer@1.5.1</span><br><span class="line">└─ viewerjs@1.10.5</span><br><span class="line">✨  Done in 6.96s.</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>在<code>src/main.js</code>中引入 v-viewer</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 图片预览 注意版本 1.5.1</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;viewerjs/dist/viewer.css&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Viewer</span> <span class="keyword">from</span> <span class="string">&#x27;v-viewer&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 引入图片预览</span></span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">use</span>(<span class="title class_">Viewer</span>, &#123; <span class="attr">name</span>: <span class="string">&#x27;v-viewer&#x27;</span> &#125;)</span><br></pre></td></tr></table></figure><p>文件中的位置参考：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ...</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;./global.less&#x27;</span> <span class="comment">// global style</span></span><br><span class="line"></span><br><span class="line">+ <span class="comment">// 图片预览</span></span><br><span class="line">+ <span class="keyword">import</span> <span class="string">&#x27;viewerjs/dist/viewer.css&#x27;</span></span><br><span class="line">+ <span class="keyword">import</span> <span class="title class_">Viewer</span> <span class="keyword">from</span> <span class="string">&#x27;v-viewer&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="title class_">Vue</span>.<span class="property">config</span>.<span class="property">productionTip</span> = <span class="literal">false</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// mount axios to `Vue.$http` and `this.$http`</span></span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">use</span>(<span class="title class_">VueAxios</span>)</span><br><span class="line">+ <span class="comment">// 引入图片预览</span></span><br><span class="line">+ <span class="title class_">Vue</span>.<span class="title function_">use</span>(<span class="title class_">Viewer</span>, &#123; <span class="attr">name</span>: <span class="string">&#x27;v-viewer&#x27;</span> &#125;)</span><br><span class="line"><span class="comment">// ...</span></span><br></pre></td></tr></table></figure><p>在页面中直接使用</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">viewer</span> <span class="attr">v-viewer</span>=<span class="string">&quot;&#123;toolbar: false&#125;&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;~@/assets/car.png&quot;</span> <span class="attr">class</span>=<span class="string">&quot;car-img&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;car&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">viewer</span>&gt;</span></span><br></pre></td></tr></table></figure><h1 id="在-github-antd-demo-中查看"><a href="#在-github-antd-demo-中查看" class="headerlink" title="在 github antd-demo 中查看"></a>在 github antd-demo 中查看</h1><p><a href="https://github.com/tongg112/antd-demo/commit/eeb9822c4e9244fa8f62ab0753422276f67e6268">GitHub 本次 Commit</a></p><h1 id="软件版本：vue-antd-pro-3-0-2"><a href="#软件版本：vue-antd-pro-3-0-2" class="headerlink" title="软件版本：vue-antd-pro 3.0.2"></a>软件版本：vue-antd-pro 3.0.2</h1><ul><li>“ant-design-vue”: “^1.7.6”</li><li>“vue”: “^2.6.0”,</li></ul><h1 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h1><ul><li><a href="https://www.npmjs.com/package/v-viewer">v-viewer npm</a></li><li><a href="https://mirari.cc/2017/08/27/Vue%E5%9B%BE%E7%89%87%E6%B5%8F%E8%A7%88%E7%BB%84%E4%BB%B6v-viewer%EF%BC%8C%E6%94%AF%E6%8C%81%E6%97%8B%E8%BD%AC%E3%80%81%E7%BC%A9%E6%94%BE%E3%80%81%E7%BF%BB%E8%BD%AC%E7%AD%89%E6%93%8D%E4%BD%9C/">v-viewer 中文文档</a></li><li><a href="https://github.com/tongg112/antd-demo/commit/eeb9822c4e9244fa8f62ab0753422276f67e6268">antd-demo 引入 v-viewer 的 commit</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> 技术坑记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> vue </tag>
            
            <tag> antd </tag>
            
            <tag> 前端 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Laravel笔记-日志打印 API业务打印事务中的异常</title>
      <link href="/2022/03/28/Laravel%E7%AC%94%E8%AE%B0-%E6%97%A5%E5%BF%97%E6%89%93%E5%8D%B0/"/>
      <url>/2022/03/28/Laravel%E7%AC%94%E8%AE%B0-%E6%97%A5%E5%BF%97%E6%89%93%E5%8D%B0/</url>
      
        <content type="html"><![CDATA[<h2 id="错误打印"><a href="#错误打印" class="headerlink" title="错误打印"></a>错误打印</h2><ul><li>php版本：7.4 &#x2F; 8.0</li><li>laravel版本：8.54</li></ul><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="title class_">\Illuminate\Support\Facades\Log</span>::<span class="title function_ invoke__">error</span>(<span class="variable">$e</span>);</span><br></pre></td></tr></table></figure><p>在业务场景中使用</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">DB::<span class="title function_ invoke__">beginTransaction</span>();</span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="comment">// do sth.</span></span><br><span class="line"></span><br><span class="line">    DB::<span class="title function_ invoke__">commit</span>();</span><br><span class="line">&#125; <span class="keyword">catch</span> (\<span class="built_in">Exception</span> <span class="variable">$e</span>)&#123;</span><br><span class="line">    DB::<span class="title function_ invoke__">rollBack</span>();</span><br><span class="line">    <span class="comment">// 打印错误信息（可以字符串拼接）</span></span><br><span class="line">    <span class="title class_">\Illuminate\Support\Facades\Log</span>::<span class="title function_ invoke__">error</span>(<span class="string">&#x27;Err-010101：数据库事务异常：&#x27;</span> . <span class="variable">$e</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">$this</span>-&gt;<span class="title function_ invoke__">err</span>(<span class="title class_">Errors</span>::<span class="variable constant_">DB_ROLLBACK</span>);</span><br><span class="line">&#125;</span><br><span class="line">```        </span><br><span class="line"></span><br><span class="line">可以打印</span><br><span class="line">```php</span><br><span class="line"><span class="keyword">use</span> <span class="title">Illuminate</span>\<span class="title">Support</span>\<span class="title">Facades</span>\<span class="title">Log</span>;</span><br><span class="line"></span><br><span class="line"><span class="title class_">Log</span>::<span class="title function_ invoke__">emergency</span>(<span class="variable">$message</span>);</span><br><span class="line"><span class="title class_">Log</span>::<span class="title function_ invoke__">alert</span>(<span class="variable">$message</span>);</span><br><span class="line"><span class="title class_">Log</span>::<span class="title function_ invoke__">critical</span>(<span class="variable">$message</span>);</span><br><span class="line"><span class="title class_">Log</span>::<span class="title function_ invoke__">error</span>(<span class="variable">$message</span>);</span><br><span class="line"><span class="title class_">Log</span>::<span class="title function_ invoke__">warning</span>(<span class="variable">$message</span>);</span><br><span class="line"><span class="title class_">Log</span>::<span class="title function_ invoke__">notice</span>(<span class="variable">$message</span>);</span><br><span class="line"><span class="title class_">Log</span>::<span class="title function_ invoke__">info</span>(<span class="variable">$message</span>);</span><br><span class="line"><span class="title class_">Log</span>::<span class="title function_ invoke__">debug</span>(<span class="variable">$message</span>);</span><br></pre></td></tr></table></figure><p>参考官方文档。</p><h2 id="sql打印"><a href="#sql打印" class="headerlink" title="sql打印"></a>sql打印</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">DB::enableQueryLog();</span><br><span class="line"></span><br><span class="line">// 查询数据库 业务代码</span><br><span class="line">$list = User::select(DB::raw(&#x27;count(*) as total, dept&#x27;))-&gt;groupBy(&#x27;is_true&#x27;)-&gt;get();</span><br><span class="line"></span><br><span class="line">\Illuminate\Support\Facades\Log::error(DB::getQueryLog());</span><br><span class="line"></span><br></pre></td></tr></table></figure><h1 id="软件版本：laravel-8-54"><a href="#软件版本：laravel-8-54" class="headerlink" title="软件版本：laravel 8.54"></a>软件版本：laravel 8.54</h1><h1 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h1><ul><li><a href="https://laravel.com/docs/9.x/logging#logging-deprecation-warnings">Laravel 官方文档</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> 技术坑记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> laravel </tag>
            
            <tag> php </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>[转]代码贡献提交规范</title>
      <link href="/2022/02/16/%E8%BD%AC-%E4%BB%A3%E7%A0%81%E8%B4%A1%E7%8C%AE%E6%8F%90%E4%BA%A4%E8%A7%84%E8%8C%83/"/>
      <url>/2022/02/16/%E8%BD%AC-%E4%BB%A3%E7%A0%81%E8%B4%A1%E7%8C%AE%E6%8F%90%E4%BA%A4%E8%A7%84%E8%8C%83/</url>
      
        <content type="html"><![CDATA[<p>学习 Angular、Vue 等成熟前端框架 的 git commit 的提交规范</p><h1 id="代码贡献规范"><a href="#代码贡献规范" class="headerlink" title="代码贡献规范"></a>代码贡献规范</h1><p>有任何疑问，欢迎提交 <a href="https://github.com/eggjs/egg/issues">issue</a>， 或者直接修改提交 <a href="https://github.com/eggjs/egg/pulls">PR</a>!</p><h2 id="提交-issue"><a href="#提交-issue" class="headerlink" title="提交 issue"></a>提交 issue</h2><ul><li>请确定 issue 的类型。</li><li>请避免提交重复的 issue，在提交之前搜索现有的 issue。</li><li>在标签(分类参考<strong>标签分类</strong>), 标题 或者内容中体现明确的意图。</li></ul><p>随后 egg 负责人会确认 issue 意图，更新合适的标签，关联 milestone，指派开发者。</p><p>标签可分为两类，type 和 scope</p><ul><li>type: issue 的类型，如 <code>feature</code>, <code>bug</code>, <code>documentation</code>, <code>performance</code>, <code>support</code> …</li><li>scope: 修改文件的范围，如 <code>core: xx</code>，<code>plugin: xx</code>，<code>deps: xx</code></li></ul><h3 id="常用标签说明"><a href="#常用标签说明" class="headerlink" title="常用标签说明"></a>常用标签说明</h3><ul><li><code>support</code>: issue 提出的问题需要开发者协作排查，咨询，调试等等日常技术支持。</li><li><code>bug</code>: 一旦发现可能是 bug 的问题，请打上 bug，然后等待确认，一旦确认是 bug，此 issue 会被再打上 confirmed。<br>此时 issue 会被非常高的优先级进行处理。<br>如果此 bug 是正在影响线上应用正常运行，会再打上 critical，代表是最高优先级，需要马上立刻处理！<br>bug 会在最低需要修复的版本进行修复，如是在 0.9.x 要修复的，而当前最新版本是 1.1.x， 那么此 issue 还会被打上 0.9，0.10，1.0，1.1，代表需要修复到这些版本。</li><li><code>core: xx</code>: 代表 issue 跟 core 内核相关，如 <code>core: antx</code> 代表跟 <code>antx</code> 配置相关。</li><li><code>plugin: xx</code>: 代表 issue 跟插件相关，如 <code>deps: session</code> 代表跟 <code>session</code> 插件相关。</li><li><code>deps: xx</code>: 代表 issue 跟 <code>dependencies</code> 模块相关，如 <code>deps: egg-cors</code> 代表跟 <code>egg-cors</code> 模块相关。</li><li><code>chore: documentation</code>: 代表发现了文档相关问题，需要修复文档说明。</li><li><code>cbd</code>: 代表跟服务器部署相关</li></ul><h2 id="编写文档"><a href="#编写文档" class="headerlink" title="编写文档"></a>编写文档</h2><p>所有功能点必须提交配套文档，文档须满足以下要求</p><ul><li>必须说清楚问题的几个方面：what（是什么），why（为什么），how（怎么做），可根据问题的特性有所侧重。</li><li>how 部分必须包含详尽完整的操作步骤，必要时附上 <strong>足够简单，可运行</strong> 的范例代码， 所有范例代码放在 <a href="https://github.com/eggjs/examples">eggjs&#x2F;examples</a> 库中。</li><li>提供必要的链接，如申请流程，术语解释和参考文档等。</li><li>同步修改中英文文档，或者在 PR 里面说明。</li></ul><h2 id="提交代码"><a href="#提交代码" class="headerlink" title="提交代码"></a>提交代码</h2><h3 id="提交-Pull-Request"><a href="#提交-Pull-Request" class="headerlink" title="提交 Pull Request"></a>提交 Pull Request</h3><p>如果你有仓库的开发者权限，而且希望贡献代码，那么你可以创建分支修改代码提交 PR，egg 开发团队会 review 代码合并到主干。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 先创建开发分支开发，分支名应该有含义，避免使用 update、tmp 之类的</span></span><br><span class="line">$ git checkout -b branch-name</span><br><span class="line"></span><br><span class="line"><span class="comment"># 开发完成后跑下测试是否通过，必要时需要新增或修改测试用例</span></span><br><span class="line">$ npm <span class="built_in">test</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 测试通过后，提交代码，message 见下面的规范</span></span><br><span class="line"></span><br><span class="line">$ git add . <span class="comment"># git add -u 删除文件</span></span><br><span class="line">$ git commit -m <span class="string">&quot;fix(role): role.use must xxx&quot;</span></span><br><span class="line">$ git push origin branch-name</span><br></pre></td></tr></table></figure><p>由于谁也无法保证过了多久之后还记得多少，为了后期回溯历史的方便，请在提交 MR 时确保提供了以下信息。</p><ol><li>需求点（一般关联 issue 或者注释都算）</li><li>升级原因（不同于 issue，可以简要描述下为什么要处理）</li><li>框架测试点（可以关联到测试文件，不用详细描述，关键点即可）</li><li>关注点（针对用户而言，可以没有，一般是不兼容更新等，需要额外提示）</li></ol><h3 id="代码风格"><a href="#代码风格" class="headerlink" title="代码风格"></a>代码风格</h3><p>你的代码风格必须通过 eslint，你可以运行 <code>$ npm run lint</code> 本地测试。</p><h3 id="Commit-提交规范"><a href="#Commit-提交规范" class="headerlink" title="Commit 提交规范"></a>Commit 提交规范</h3><p>根据 <a href="https://github.com/angular/angular.js/blob/master/CONTRIBUTING.md#commit-message-format">angular 规范</a>提交 commit， 这样 history 看起来更加清晰，还可以自动生成 changelog。</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">type</span>&gt;</span>(<span class="tag">&lt;<span class="name">scope</span>&gt;</span>): <span class="tag">&lt;<span class="name">subject</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">BLANK</span> <span class="attr">LINE</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">BLANK</span> <span class="attr">LINE</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">footer</span>&gt;</span></span><br></pre></td></tr></table></figure><p>（1）type</p><p>提交 commit 的类型，包括以下几种</p><ul><li>feat: 新功能</li><li>fix: 修复问题</li><li>docs: 修改文档</li><li>style: 修改代码格式，不影响代码逻辑</li><li>refactor: 重构代码，理论上不影响现有功能</li><li>perf: 提升性能</li><li>test: 增加修改测试用例</li><li>chore: 修改工具相关（包括但不限于文档、代码生成等）</li><li>deps: 升级依赖</li></ul><p>（2）scope</p><p>修改文件的范围（包括但不限于 doc, middleware, core, config, plugin）</p><p>（3）subject</p><p>用一句话清楚的描述这次提交做了什么</p><p>（4）body</p><p>补充 subject，适当增加原因、目的等相关因素，也可不写。</p><p>（5）footer</p><ul><li><strong>当有非兼容修改(Breaking Change)时必须在这里描述清楚</strong></li><li>关联相关 issue，如 <code>Closes #1, Closes #2, #3</code></li><li>如果功能点有新增或修改的，还需要关联文档 <code>doc</code> 和 <code>egg-core</code> 的 PR，如 <code>eggjs/egg-core#123</code></li></ul><p>示例</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">fix(<span class="variable">$compile</span>): [BREAKING_CHANGE] couple of unit tests <span class="keyword">for</span> IE9</span><br><span class="line"></span><br><span class="line">Older IEs serialize html uppercased, but IE9 does not...</span><br><span class="line">Would be better to expect <span class="keyword">case</span> insensitive, unfortunately jasmine does</span><br><span class="line">not allow to user regexps <span class="keyword">for</span> throw expectations.</span><br><span class="line"></span><br><span class="line">Document change on eggjs/egg#123</span><br><span class="line"></span><br><span class="line">Closes <span class="comment">#392</span></span><br><span class="line"></span><br><span class="line">BREAKING CHANGE:</span><br><span class="line"></span><br><span class="line">  Breaks foo.bar api, foo.baz should be used instead</span><br></pre></td></tr></table></figure><p>详情请查看具体<a href="https://docs.google.com/document/d/1QrDFcIiPjSLDn3EL15IJygNPiHORgU1_OOAqWjiDU5Y/edit">文档</a>。</p><h3 id="英语翻译规范"><a href="#英语翻译规范" class="headerlink" title="英语翻译规范"></a>英语翻译规范</h3><p>英语正文按照一般英语语法规律书写即可，但标题比较特殊，应该按照以下规范进行书写：</p><ul><li>名词、动词、代词、形容词、副词等首字母大写，介词、冠词、连词、感叹词和助词首字母小写，<em>标题第一个单词、最后一个单词无论词性首字母应该大写</em>。</li><li>专有名词（如直接引用某个变量，或者某个插件名称等），必须使用反单引号（键盘上 Esc 正下方）进行引用，并保持原来大小写。</li><li>超过5个字母的介词首字母应该大写，否则一律小写。</li><li>如果是重要提示性标题，或者是专有名称标题（例如 Http 请求方法：GET，POST，PUT，DELETE），可以全部字母都用大写（慎重考虑）。</li><li>如果标题属于“动宾”性质的短语（如“配置管理”），尽量翻译成“宾+动词名词”的形式（Configuration Management），或者是“动名词+宾语”的形式（Managing Configuration）。</li><li>如果标题被当做一个完整的英语句子，请按照英语句子的语法格式大小写（如：常见问题 FAQ 中每一个标题都是一个英语句子）。</li></ul><p>有关详情，可以参考<a href="https://headlinecapitalization.com/">英语标题大小写</a>。</p><h2 id="发布管理"><a href="#发布管理" class="headerlink" title="发布管理"></a>发布管理</h2><p>egg 基于 <a href="https://semver.org/lang/zh-CN/">semver</a> 语义化版本号进行发布。</p><h3 id="分支策略"><a href="#分支策略" class="headerlink" title="分支策略"></a>分支策略</h3><p><code>master</code> 分支为当前稳定发布的版本，<code>next</code> 分支为下一个开发中的大版本。</p><ul><li>只维护两个版本，除非有安全问题，否则修复只会 patch 到 <code>master</code> 和 <code>next</code> 分支，其他更新推动上层框架升级到稳定大版本的最新版本。</li><li>所有 API 的废弃都需要在当前的稳定版本上 <code>deprecate</code> 提示，并保证在当前的稳定版本上一直兼容到新版本的发布。</li><li><code>master</code> 分支不设置 publish tag，上层框架基于 semver 依赖稳定版本。</li><li><code>next</code> 分支设置 tag 为 <code>next</code>，上层框架可以通过 <code>egg@next</code> 引用开发中的版本进行测试。</li><li>egg 持续维护的版本以 Milestone 为准，只要是开着的版本都会进行修复。</li></ul><h3 id="发布策略"><a href="#发布策略" class="headerlink" title="发布策略"></a>发布策略</h3><p>每个大版本都有一个发布经理管理（PM），他&#x2F;她要做的事情</p><h4 id="准备工作："><a href="#准备工作：" class="headerlink" title="准备工作："></a>准备工作：</h4><ul><li>建立 milestone，确认需求关联 milestone，指派和更新 issues，如 <a href="https://github.com/eggjs/egg/milestone/1">1.x milestone</a>。</li><li>从 <code>master</code> 分支新建 <code>next</code> 分支，并设置 tag 为 <code>next</code>。</li></ul><h4 id="发布前："><a href="#发布前：" class="headerlink" title="发布前："></a>发布前：</h4><ul><li><p>确认当前 Milestone 所有的 issue 都已关闭或可延期，完成性能测试。</p></li><li><p>发起一个新的 <a href="https://github.com/nodejs/node/pull/4181">Release Proposal MR</a>，按照 <a href="https://github.com/nodejs/node/blob/master/CHANGELOG.md">node CHANGELOG</a> 进行 <code>History</code> 的编写，修正文档中与版本相关的内容，commits 可以自动生成。</p></li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm run commits</span><br></pre></td></tr></table></figure><ul><li>指定下一个大版本的 PM。</li></ul><h4 id="发布时："><a href="#发布时：" class="headerlink" title="发布时："></a>发布时：</h4><ul><li>将老的稳定版本（master）备份到以当前大版本为名字的分支上（例如 <code>1.x</code>），并设置 tag 为 <code>release-&#123;v&#125;.x</code>（ v 为当前版本，例如 <code>release-1.x</code>）。</li><li>将 <code>next</code> 分支推送到 <code>master</code>，成为新的稳定版本分支，并去除 <code>next</code> tag，修改 README 中与分支相关的内容。</li><li>发布新的稳定版本到 <a href="http://npmjs.com/">npm</a>，并通知上层框架进行更新。</li><li><code>npm publish</code> 之前，请先阅读 <a href="https://fengmk2.com/blog/2016/how-i-publish-a-npm-package">我是如何发布一个 npm 包的</a>。</li></ul><p>上述描述中所有的设置 tag 都是指在 <code>package.json</code> 中设置 npm 的 tag。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;publishConfig&quot;</span>: &#123;</span><br><span class="line">  <span class="string">&quot;tag&quot;</span>: <span class="string">&quot;next&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><table><thead><tr><th>类型</th><th>描述</th></tr></thead><tbody><tr><td>feat</td><td>新增 feature</td></tr><tr><td>fix</td><td>修复 bug</td></tr><tr><td>docs</td><td>仅仅修改了文档，比如 README，CHANGELOG，CONTRIBUTE等等</td></tr><tr><td>style</td><td>修改代码格式（空格、缩进等），不影响代码逻辑</td></tr><tr><td>refactor</td><td>重构代码，理论上不影响现有功能，没有新功能或bug</td></tr><tr><td>perf</td><td>优化相关，性能提升</td></tr><tr><td>test</td><td>增加修改测试用例</td></tr><tr><td>chore</td><td>修改工具相关（包括但不限于文档、代码生成等）</td></tr><tr><td>deps</td><td>升级依赖</td></tr><tr><td>revert</td><td>版本回滚</td></tr></tbody></table><h2 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h2><ul><li><a href="https://www.eggjs.org/zh-CN/community/contributing">【原文】Egg JS 代码贡献规范</a></li><li><a href="https://www.cnblogs.com/wubaiqing/p/10307605.html">Git Commit 标准化</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> 技术坑记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 阅读 </tag>
            
            <tag> git </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Lemon 歌词 米津玄师</title>
      <link href="/2021/11/29/%E6%AD%8C%E8%AF%8DLemon/"/>
      <url>/2021/11/29/%E6%AD%8C%E8%AF%8DLemon/</url>
      
        <content type="html"><![CDATA[<h1>Lemon 歌词</h1><p>作词：米津玄师  </p><p>作曲：米津玄师  </p><div class="lyricBody">  <div class="large">    <div class="hiragana" style="display: block;">      <span class="ruby"><span class="rb">夢</span><span class="rt">ゆめ</span></span>ならばどれほどよかったでしょう<br><span class="ruby"><span class="rb">未</span><span class="rt">いま</span></span>だにあなたのことを<span class="ruby"><span class="rb">夢</span><span class="rt">ゆめ</span></span>にみる<br><span class="ruby"><span class="rb">忘</span><span class="rt">わす</span></span>れた<span class="ruby"><span class="rb">物</span><span class="rt">もの</span></span>を<span class="ruby"><span class="rb">取</span><span class="rt">と</span></span>りに<span class="ruby"><span class="rb">帰</span><span class="rt">かえ</span></span>るように<br><span class="ruby"><span class="rb">古</span><span class="rt">ふる</span></span>びた<span class="ruby"><span class="rb">思</span><span class="rt">おも</span></span>い<span class="ruby"><span class="rb">出</span><span class="rt">で</span></span>の<span class="ruby"><span class="rb">埃</span><span class="rt">ほこり</span></span>を<span class="ruby"><span class="rb">払</span><span class="rt">はら</span></span>う<br><br><span class="ruby"><span class="rb">戻</span><span class="rt">もど</span></span>らない<span class="ruby"><span class="rb">幸</span><span class="rt">しあわ</span></span>せがあることを<br><span class="ruby"><span class="rb">最後</span><span class="rt">さいご</span></span>にあなたが<span class="ruby"><span class="rb">教</span><span class="rt">おし</span></span>えてくれた<br><span class="ruby"><span class="rb">言</span><span class="rt">い</span></span>えずに<span class="ruby"><span class="rb">隠</span><span class="rt">かく</span></span>してた<span class="ruby"><span class="rb">昏</span><span class="rt">くら</span></span>い<span class="ruby"><span class="rb">過去</span><span class="rt">かこ</span></span>も<br>あなたがいなきゃ<span class="ruby"><span class="rb">永遠</span><span class="rt">えいえん</span></span>に<span class="ruby"><span class="rb">昏</span><span class="rt">くら</span></span>いまま<br><br>きっともうこれ<span class="ruby"><span class="rb">以上</span><span class="rt">いじょう</span></span> <span class="ruby"><span class="rb">傷</span><span class="rt">きず</span></span>つくことなど<br>ありはしないとわかっている<br><br>あの<span class="ruby"><span class="rb">日</span><span class="rt">ひ</span></span>の<span class="ruby"><span class="rb">悲</span><span class="rt">かな</span></span>しみさえ あの<span class="ruby"><span class="rb">日</span><span class="rt">ひ</span></span>の<span class="ruby"><span class="rb">苦</span><span class="rt">くる</span></span>しみさえ<br>そのすべてを<span class="ruby"><span class="rb">愛</span><span class="rt">あい</span></span>してた あなたとともに<br><span class="ruby"><span class="rb">胸</span><span class="rt">むね</span></span>に<span class="ruby"><span class="rb">残</span><span class="rt">のこ</span></span>り<span class="ruby"><span class="rb">離</span><span class="rt">はな</span></span>れない <span class="ruby"><span class="rb">苦</span><span class="rt">にが</span></span>いレモンの<span class="ruby"><span class="rb">匂</span><span class="rt">にお</span></span>い<br><span class="ruby"><span class="rb">雨</span><span class="rt">あめ</span></span>が<span class="ruby"><span class="rb">降</span><span class="rt">ふ</span></span>り<span class="ruby"><span class="rb">止</span><span class="rt">や</span></span>むまでは<span class="ruby"><span class="rb">帰</span><span class="rt">かえ</span></span>れない<br><span class="ruby"><span class="rb">今</span><span class="rt">いま</span></span>でもあなたはわたしの<span class="ruby"><span class="rb">光</span><span class="rt">ひかり</span></span><br><br><span class="ruby"><span class="rb">暗闇</span><span class="rt">くらやみ</span></span>であなたの<span class="ruby"><span class="rb">背</span><span class="rt">せ</span></span>をなぞった<br>その<span class="ruby"><span class="rb">輪郭</span><span class="rt">りんかく</span></span>を<span class="ruby"><span class="rb">鮮明</span><span class="rt">せんめい</span></span>に<span class="ruby"><span class="rb">覚</span><span class="rt">おぼ</span></span>えている<br><span class="ruby"><span class="rb">受</span><span class="rt">う</span></span>け<span class="ruby"><span class="rb">止</span><span class="rt">と</span></span>めきれないものと<span class="ruby"><span class="rb">出会</span><span class="rt">であ</span></span>うたび<br><span class="ruby"><span class="rb">溢</span><span class="rt">あふ</span></span>れてやまないのは<span class="ruby"><span class="rb">涙</span><span class="rt">なみだ</span></span>だけ<br><br><span class="ruby"><span class="rb">何</span><span class="rt">なに</span></span>をしていたの <span class="ruby"><span class="rb">何</span><span class="rt">なに</span></span>を<span class="ruby"><span class="rb">見</span><span class="rt">み</span></span>ていたの<br>わたしの<span class="ruby"><span class="rb">知</span><span class="rt">し</span></span>らない<span class="ruby"><span class="rb">横顔</span><span class="rt">よこがお</span></span>で<br><br>どこかであなたが<span class="ruby"><span class="rb">今</span><span class="rt">いま</span></span> わたしと<span class="ruby"><span class="rb">同</span><span class="rt">おな</span></span>じ<span class="ruby"><span class="rb">様</span><span class="rt">よう</span></span>な<br><span class="ruby"><span class="rb">涙</span><span class="rt">なみだ</span></span>にくれ <span class="ruby"><span class="rb">淋</span><span class="rt">さび</span></span>しさの<span class="ruby"><span class="rb">中</span><span class="rt">なか</span></span>にいるなら<br>わたしのことなどどうか <span class="ruby"><span class="rb">忘</span><span class="rt">わす</span></span>れてください<br>そんなことを<span class="ruby"><span class="rb">心</span><span class="rt">こころ</span></span>から<span class="ruby"><span class="rb">願</span><span class="rt">ねが</span></span>うほどに<br><span class="ruby"><span class="rb">今</span><span class="rt">いま</span></span>でもあなたはわたしの<span class="ruby"><span class="rb">光</span><span class="rt">ひかり</span></span><br><br><span class="ruby"><span class="rb">自分</span><span class="rt">じぶん</span></span>が<span class="ruby"><span class="rb">思</span><span class="rt">おも</span></span>うより<br><span class="ruby"><span class="rb">恋</span><span class="rt">こい</span></span>をしていたあなたに<br>あれから<span class="ruby"><span class="rb">思</span><span class="rt">おも</span></span>うように<br><span class="ruby"><span class="rb">息</span><span class="rt">いき</span></span>ができない<br>あんなに<span class="ruby"><span class="rb">側</span><span class="rt">そば</span></span>にいたのに<br>まるで<span class="ruby"><span class="rb">嘘</span><span class="rt">うそ</span></span>みたい<br>とても<span class="ruby"><span class="rb">忘</span><span class="rt">わす</span></span>れられない<br>それだけが<span class="ruby"><span class="rb">確</span><span class="rt">たし</span></span>か<br><br>あの<span class="ruby"><span class="rb">日</span><span class="rt">ひ</span></span>の<span class="ruby"><span class="rb">悲</span><span class="rt">かな</span></span>しみさえあの<span class="ruby"><span class="rb">日</span><span class="rt">ひ</span></span>の<span class="ruby"><span class="rb">苦</span><span class="rt">くる</span></span>しみさえ<br>そのすべてを<span class="ruby"><span class="rb">愛</span><span class="rt">あい</span></span>してた あなたとともに<br><span class="ruby"><span class="rb">胸</span><span class="rt">むね</span></span>に<span class="ruby"><span class="rb">残</span><span class="rt">のこ</span></span>り<span class="ruby"><span class="rb">離</span><span class="rt">はな</span></span>れない <span class="ruby"><span class="rb">苦</span><span class="rt">にが</span></span>いレモンの<span class="ruby"><span class="rb">匂</span><span class="rt">にお</span></span>い<br><span class="ruby"><span class="rb">雨</span><span class="rt">あめ</span></span>が<span class="ruby"><span class="rb">降</span><span class="rt">ふ</span></span>り<span class="ruby"><span class="rb">止</span><span class="rt">や</span></span>むまでは<span class="ruby"><span class="rb">帰</span><span class="rt">かえ</span></span>れない<br><span class="ruby"><span class="rb">切</span><span class="rt">き</span></span>り<span class="ruby"><span class="rb">分</span><span class="rt">わ</span></span>けた<span class="ruby"><span class="rb">果実</span><span class="rt">かじつ</span></span>の<span class="ruby"><span class="rb">片方</span><span class="rt">かたほう</span></span>の<span class="ruby"><span class="rb">様</span><span class="rt">よう</span></span>に<br><span class="ruby"><span class="rb">今</span><span class="rt">いま</span></span>でもあなたはわたしの<span class="ruby"><span class="rb">光</span><span class="rt">ひかり</span></span><br>    </div>  </div></div><hr /><h1>原文地址</h1><a href="https://utaten.com/lyric/sa18020902/" target="_blank" >Lemon 歌詞「米津玄師」ふりがな付</a><style>.lyricBody {    background: #fff;    padding: 10px;    user-select: none;    letter-spacing: 1px;    line-height: 2.3;}.lyricBody div.large {    font-size: 21px;}.lyricBody div.large span.ruby {    line-height: 2.6;}.lyricBody div span.ruby {    margin-bottom: 0.55em;    display: inline-table;    position: relative;    vertical-align: bottom;}.lyricBody span.ruby span.rb {    display: table-row;    position: relative;    line-height: 1.2;}.lyricBody div.large span.ruby span.rt {    font-size: 14px;}.lyricBody span.ruby span.rt {    display: table-header-group;    line-height: 1.8;    color: #999;    white-space: nowrap;    text-align: center;    letter-spacing: -0.001em;    before: '(';    after: ')';}</style>]]></content>
      
      
      <categories>
          
          <category> 日语之路 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 日语 </tag>
            
            <tag> 歌曲 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Chrome浏览器下dev域名自动跳转https</title>
      <link href="/2021/11/08/Chrome%E6%B5%8F%E8%A7%88%E5%99%A8%E4%B8%8Bdev%E5%9F%9F%E5%90%8D%E8%87%AA%E5%8A%A8%E8%B7%B3%E8%BD%AChttps/"/>
      <url>/2021/11/08/Chrome%E6%B5%8F%E8%A7%88%E5%99%A8%E4%B8%8Bdev%E5%9F%9F%E5%90%8D%E8%87%AA%E5%8A%A8%E8%B7%B3%E8%BD%AChttps/</url>
      
        <content type="html"><![CDATA[<h2 id="使用-local-作为本地开发域名"><a href="#使用-local-作为本地开发域名" class="headerlink" title="使用 *.local 作为本地开发域名"></a>使用 *.local 作为本地开发域名</h2><p>之前一直使用 xxx.test 作为项目的本地开发域名，今天创建新项目时，觉得本地应该用 xxx.dev，把 xxx.test 让给测试环境才对。</p><p>于是修改了本地的开发域名，并配置好了 hosts。然而，奇怪的是在 chrome 浏览器中，开发域名 xxx.dev 会自动加上 https，这导致了项目在使用 dev 域名时无法顺利运行的问题。</p><p>在网上找到了答案：</p><blockquote><p>由于今天 Chrome 升级了浏览器版本到 63，现在所有的 .dev 和 .app 都将会自动将 HTTP 转到 HTTPS 上，原因是谷歌已经拿下了 .dev 的顶级域名；在9月份的报告中已经对 .dev 即将带来的问题进行了说明。目前唯一的方法就是修改你的 .dev 或者 .app 域名了，或者换成火狐浏览器开发；建议将你的域名改成 .test 或者 .localhost</p></blockquote><blockquote><p>Starting today, Google Chrome is rolling out v63 that now forces all .dev domains to use HTTPS. There is no workaround and they are apparently not changing this. Back in September Mattias Geniar wrote a post warning every one of the changes, and his post is a great primer on what the Chrome team has done.  </p><p>This will affect everyone using .dev and if you are using Valet the recommended fix is to switch to a new unused extension like .test. To change this in valet you can run the following:</p><p>valet domain test<br>Based on this article by Danny Wahl he recommends you use one of the following: “.localhost”, “.invalid”, “.test”, or “.example”.</p><p>If all this sounds like too much trouble another viable option is to switch to Firefox as your development browser. It’s fast, has comfortable dev tools, and has really made a ton of improvements over the past few years.</p></blockquote><h2 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h2><ul><li><a href="https://www.google.com/search?q=.dev+%E5%9F%9F%E5%90%8D+chrome+%E8%87%AA%E5%8A%A8+https&newwindow=1&sxsrf=AOaemvIVwOxt1nve41X3UTQlPmRcqosx4Q:1636352584978&ei=SMKIYYuQO8TK-gSfyquADg&oq=.dev+%E5%9F%9F%E5%90%8D+chrome+%E8%87%AA%E5%8A%A8+https&gs_lcp=Cgdnd3Mtd2l6EAMyBQghEKABMgUIIRCgATIFCCEQoAEyBQghEKABOgUIABCABDoFCC4QgAQ6BQgAEMsBOgkIIRAKEKABECo6BwghEAoQoAFKBAhBGABQAFixYWCqZGgGcAB4B4ABpQ2IAexokgERMS4wLjQuNC41LjIuNC4yLjGYAQCgAQHAAQE&sclient=gws-wiz&ved=0ahUKEwiL1Le0kIj0AhVEpZ4KHR_lCuAQ4dUDCA8&uact=5">.dev 域名 chrome 自动 https</a></li><li><a href="https://segmentfault.com/q/1010000012339191">本地配置的 <em>.dev,</em>.app域名 在谷歌浏览器中总是自动转跳到https上，导致不能访问？</a></li><li><a href="https://laravel-news.com/chrome-63-now-forces-dev-domains-https">Chrome 63 now forces .dev domains to HTTPS</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> 技术坑记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> chrome </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>NHK《简明日语》第07课 シュークリームはありますか。</title>
      <link href="/2021/11/02/NHK%E3%80%8A%E7%AE%80%E6%98%8E%E6%97%A5%E8%AF%AD%E3%80%8B%E7%AC%AC07%E8%AF%BE/"/>
      <url>/2021/11/02/NHK%E3%80%8A%E7%AE%80%E6%98%8E%E6%97%A5%E8%AF%AD%E3%80%8B%E7%AC%AC07%E8%AF%BE/</url>
      
        <content type="html"><![CDATA[<h1 id="NHK《简明日语》第07课"><a href="#NHK《简明日语》第07课" class="headerlink" title="NHK《简明日语》第07课"></a>NHK《简明日语》第07课</h1><h2 id="课程简介"><a href="#课程简介" class="headerlink" title="课程简介"></a>课程简介</h2><p>安娜和小樱一起来到了一家蛋糕店。</p><h2 id="教材详情"><a href="#教材详情" class="headerlink" title="教材详情"></a>教材详情</h2><h3 id="シュークリームはありますか。"><a href="#シュークリームはありますか。" class="headerlink" title="シュークリームはありますか。"></a>シュークリームはありますか。</h3><ul><li>アンナ: ケーキがいっぱいありますね。 &#x2F;&#x2F; 有好多蛋糕啊。</li><li>さくら: すみません、シュークリームはありますか。 &#x2F;&#x2F; 请问，有奶油泡芙吗？</li><li>店員: はい、こちらです。 &#x2F;&#x2F; 有，在这边。</li><li>さくら: シュークリームを２つください。 &#x2F;&#x2F; 请给我两个奶油泡芙。</li></ul><h3 id="语法要点"><a href="#语法要点" class="headerlink" title="语法要点"></a>语法要点</h3><p>量词「つ」</p><blockquote><p>从1到10的数法，后续量词「つ」之后会发生变化。</p></blockquote><p>后续量词「つ」之后，从1到10的数法会发生变化。<br>10后面不加「つ」，读作「とお」。</p><table><thead><tr><th align="left">1つ</th><th>ひとつ</th></tr></thead><tbody><tr><td align="left">2つ</td><td>ふたつ</td></tr><tr><td align="left">3つ</td><td>みっつ</td></tr><tr><td align="left">4つ</td><td>よっつ</td></tr><tr><td align="left">5つ</td><td>いつつ</td></tr><tr><td align="left">6つ</td><td>むっつ</td></tr><tr><td align="left">7つ</td><td>ななつ</td></tr><tr><td align="left">8つ</td><td>やっつ</td></tr><tr><td align="left">9つ</td><td>ここのつ</td></tr><tr><td align="left">10</td><td>とお</td></tr></tbody></table><p>动词「あります」的使用方法</p><blockquote><p>「あります」（有）是表示人或物的状态的动词，指在某处有物体存在的状态。「あります」的主语后面要用助词「が」。「が」是在会话中第一次提到某人或某物时使用的。</p></blockquote><h3 id="单词"><a href="#单词" class="headerlink" title="单词"></a>单词</h3><table><thead><tr><th>ケーキ</th></tr></thead><tbody><tr><td><strong>蛋糕</strong></td></tr></tbody></table><table><thead><tr><th>いっぱい</th></tr></thead><tbody><tr><td><strong>很多</strong></td></tr></tbody></table><table><thead><tr><th>あります</th></tr></thead><tbody><tr><td><strong>有</strong></td></tr><tr><td>「あります」是表示物体存在的动词。</td></tr></tbody></table><table><thead><tr><th>すみません</th></tr></thead><tbody><tr><td><strong>对不起</strong></td></tr><tr><td>「すみません」在招呼别人时使用。如果你迷路了，可以对路过的人说「すみません」来问路。「すみません」也可以表示道歉。</td></tr></tbody></table><table><thead><tr><th>シュークリーム</th></tr></thead><tbody><tr><td><strong>奶油泡芙</strong></td></tr></tbody></table><table><thead><tr><th>ふたつ</th></tr></thead><tbody><tr><td><strong>两个</strong></td></tr><tr><td>「ふたつ」是由数字「2」加上量词「つ」构成的。后续量词「つ」之后，从1到10的数法会发生变化。</td></tr><tr><td>请参见教材附录。</td></tr></tbody></table><table><thead><tr><th>ください</th></tr></thead><tbody><tr><td><strong>请</strong></td></tr></tbody></table><p>教材：<a href="https://www.nhk.or.jp/lesson/update/pdf/le7_zh_t.pdf">https://www.nhk.or.jp/lesson/update/pdf/le7_zh_t.pdf</a></p><h2 id="我的收获"><a href="#我的收获" class="headerlink" title="我的收获"></a>我的收获</h2><ul><li>「これをください」在买东西的时候使用很方便</li></ul><h2 id="课程地址"><a href="#课程地址" class="headerlink" title="课程地址"></a>课程地址</h2><p><a href="https://www.nhk.or.jp/lesson/chinese/learn/list/7.html">https://www.nhk.or.jp/lesson/chinese/learn/list/7.html</a></p>]]></content>
      
      
      <categories>
          
          <category> 日语之路 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 日语 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Laravel笔记-配置permission角色权限</title>
      <link href="/2021/10/21/Laravel%E7%AC%94%E8%AE%B0-%E9%85%8D%E7%BD%AEpermission%E8%A7%92%E8%89%B2%E6%9D%83%E9%99%90/"/>
      <url>/2021/10/21/Laravel%E7%AC%94%E8%AE%B0-%E9%85%8D%E7%BD%AEpermission%E8%A7%92%E8%89%B2%E6%9D%83%E9%99%90/</url>
      
        <content type="html"><![CDATA[<h2 id="laravel-permission-安装"><a href="#laravel-permission-安装" class="headerlink" title="laravel-permission 安装"></a>laravel-permission 安装</h2><ul><li>php版本：7.4</li><li>laravel版本：8.54</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">composer require spatie/laravel-permission</span><br></pre></td></tr></table></figure><p>可以直接参考官方文档。</p><h2 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h2><h3 id="1、发布配置文件"><a href="#1、发布配置文件" class="headerlink" title="1、发布配置文件"></a>1、发布配置文件</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">这条命令会在 config 下增加一个 permission.php 的配置文件</span></span><br><span class="line">php artisan vendor:publish --provider=&quot;Spatie\Permission\PermissionServiceProvider&quot;</span><br></pre></td></tr></table></figure><h3 id="2、注册-Autoloaded-Service-Providers"><a href="#2、注册-Autoloaded-Service-Providers" class="headerlink" title="2、注册 Autoloaded Service Providers"></a>2、注册 Autoloaded Service Providers</h3><ul><li>config&#x2F;app.php</li></ul><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">return</span> [</span><br><span class="line">    ...</span><br><span class="line">    <span class="string">&#x27;providers&#x27;</span> =&gt; [</span><br><span class="line">        <span class="comment">// ...</span></span><br><span class="line">        <span class="title class_">Spatie\Permission\PermissionServiceProvider</span>::<span class="variable language_">class</span>,</span><br><span class="line">    ]</span><br><span class="line">];</span><br></pre></td></tr></table></figure><h3 id="3、运行数据库迁移"><a href="#3、运行数据库迁移" class="headerlink" title="3、运行数据库迁移"></a>3、运行数据库迁移</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">php artisan migrate</span><br></pre></td></tr></table></figure><p>这里的表结构都可以根据业务进行调整。<br>比如，我们和前端 antd vue pro 框架对接，需要返回用户的菜单和权限，那么在 permission 表中，就可以增加【是否菜单：is_menu】字段，来区分菜单权限和普通权限。  </p><ul><li>需要排序，就增加对应的排序字段；</li><li>需要图标icon，就增加对应储存icon的字段；</li><li>需要层级结构，就增加父级id的字段；</li><li>…</li></ul><h2 id="数据库初始化时创建权限"><a href="#数据库初始化时创建权限" class="headerlink" title="数据库初始化时创建权限"></a>数据库初始化时创建权限</h2><p>在 <code>database/seeders/DatabaseSeeder.php</code> 中的 <code>run()</code> 方法中，可以创建系统默认权限、角色和用户。</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">use</span> <span class="title">Spatie</span>\<span class="title">Permission</span>\<span class="title">Models</span>\<span class="title">Role</span>;</span><br><span class="line"><span class="keyword">use</span> <span class="title">Spatie</span>\<span class="title">Permission</span>\<span class="title">Models</span>\<span class="title">Permission</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 重置角色和权限的缓存</span></span><br><span class="line"><span class="title function_ invoke__">app</span>()[<span class="string">&#x27;cache&#x27;</span>]-&gt;<span class="title function_ invoke__">forget</span>(<span class="string">&#x27;spatie.permission.cache&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建权限（这里储存 xx.xxx.xx 的英文格式，多语言由前端实现）</span></span><br><span class="line"><span class="comment">// menu 创建菜单 和 权限</span></span><br><span class="line"><span class="variable">$user</span> = <span class="title class_">Permission</span>::<span class="title function_ invoke__">create</span>([</span><br><span class="line">    <span class="string">&#x27;name&#x27;</span> =&gt; <span class="string">&#x27;menu.user.manage&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;is_menu&#x27;</span> =&gt; <span class="string">&#x27;1&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;show&#x27;</span> =&gt; <span class="string">&#x27;1&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;parent_id&#x27;</span> =&gt; <span class="string">&#x27;0&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;parent_ids&#x27;</span> =&gt; <span class="string">&#x27;,0,&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;icon&#x27;</span> =&gt; <span class="string">&#x27;user&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;sort&#x27;</span> =&gt; <span class="string">&#x27;100&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;component&#x27;</span> =&gt; <span class="string">&#x27;user/UserList&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;path&#x27;</span> =&gt; <span class="string">&#x27;/user/list&#x27;</span></span><br><span class="line">]);</span><br><span class="line"><span class="title class_">Permission</span>::<span class="title function_ invoke__">create</span>([</span><br><span class="line">    <span class="string">&#x27;name&#x27;</span> =&gt; <span class="string">&#x27;menu.user.manage^add&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;parent_id&#x27;</span> =&gt; <span class="variable">$user</span>-&gt;id,</span><br><span class="line">    <span class="string">&#x27;parent_ids&#x27;</span> =&gt; <span class="string">&#x27;,0,&#x27;</span>.<span class="variable">$user</span>-&gt;id.<span class="string">&#x27;,&#x27;</span> // <span class="string">&quot;,0,<span class="subst">&#123;$user-&gt;id&#125;</span>,&quot;</span> 这种写法也可以，需要使用双引号</span><br><span class="line">]);</span><br><span class="line"><span class="title class_">Permission</span>::<span class="title function_ invoke__">create</span>([</span><br><span class="line">    <span class="string">&#x27;name&#x27;</span> =&gt; <span class="string">&#x27;menu.user.manage^list&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;parent_id&#x27;</span> =&gt; <span class="variable">$user</span>-&gt;id,</span><br><span class="line">    <span class="string">&#x27;parent_ids&#x27;</span> =&gt; <span class="string">&#x27;,0,&#x27;</span>.<span class="variable">$user</span>-&gt;id.<span class="string">&#x27;,&#x27;</span></span><br><span class="line">]);</span><br><span class="line"><span class="title class_">Permission</span>::<span class="title function_ invoke__">create</span>([</span><br><span class="line">    <span class="string">&#x27;name&#x27;</span> =&gt; <span class="string">&#x27;menu.user.manage^info&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;parent_id&#x27;</span> =&gt; <span class="variable">$user</span>-&gt;id,</span><br><span class="line">    <span class="string">&#x27;parent_ids&#x27;</span> =&gt; <span class="string">&#x27;,0,&#x27;</span>.<span class="variable">$user</span>-&gt;id.<span class="string">&#x27;,&#x27;</span></span><br><span class="line">]);</span><br><span class="line"><span class="title class_">Permission</span>::<span class="title function_ invoke__">create</span>([</span><br><span class="line">    <span class="string">&#x27;name&#x27;</span> =&gt; <span class="string">&#x27;menu.user.manage^edit&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;parent_id&#x27;</span> =&gt; <span class="variable">$user</span>-&gt;id,</span><br><span class="line">    <span class="string">&#x27;parent_ids&#x27;</span> =&gt; <span class="string">&#x27;,0,&#x27;</span>.<span class="variable">$user</span>-&gt;id.<span class="string">&#x27;,&#x27;</span></span><br><span class="line">]);</span><br><span class="line"><span class="title class_">Permission</span>::<span class="title function_ invoke__">create</span>([</span><br><span class="line">    <span class="string">&#x27;name&#x27;</span> =&gt; <span class="string">&#x27;menu.user.manage^delete&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;parent_id&#x27;</span> =&gt; <span class="variable">$user</span>-&gt;id,</span><br><span class="line">    <span class="string">&#x27;parent_ids&#x27;</span> =&gt; <span class="string">&#x27;,0,&#x27;</span>.<span class="variable">$user</span>-&gt;id.<span class="string">&#x27;,&#x27;</span></span><br><span class="line">]);</span><br><span class="line"></span><br><span class="line"><span class="comment">// role 创建角色并赋予已创建的权限</span></span><br><span class="line"><span class="variable">$role</span> = <span class="title class_">Role</span>::<span class="title function_ invoke__">create</span>([</span><br><span class="line">    <span class="string">&#x27;name&#x27;</span> =&gt; <span class="string">&#x27;super&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;show_name&#x27;</span> =&gt; <span class="string">&#x27;superAdmin&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;sort&#x27;</span> =&gt; <span class="string">&#x27;1&#x27;</span>,</span><br><span class="line">]);</span><br><span class="line"><span class="variable">$role</span>-&gt;<span class="title function_ invoke__">givePermissionTo</span>(<span class="title class_">Permission</span>::<span class="title function_ invoke__">all</span>());</span><br><span class="line"></span><br><span class="line"><span class="comment">// create admin 创建管理员，分配角色</span></span><br><span class="line"><span class="variable">$user</span> = <span class="title class_">Users</span>::<span class="title function_ invoke__">create</span>([</span><br><span class="line">    <span class="string">&#x27;name&#x27;</span> =&gt; <span class="string">&#x27;admin&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;display_name&#x27;</span> =&gt; <span class="string">&#x27;系统管理员&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;department_id&#x27;</span> =&gt; <span class="variable">$department</span>-&gt;id,</span><br><span class="line">    <span class="string">&#x27;password&#x27;</span> =&gt; <span class="title function_ invoke__">bcrypt</span>(<span class="title class_">Constants</span>::<span class="variable constant_">DEFAULT_PASSWORD</span>),</span><br><span class="line">]);</span><br><span class="line"><span class="variable">$user</span>-&gt;<span class="title function_ invoke__">assignRole</span>(<span class="string">&#x27;super&#x27;</span>);</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="资源路由使用-permission-中间件"><a href="#资源路由使用-permission-中间件" class="headerlink" title="资源路由使用 permission 中间件"></a>资源路由使用 permission 中间件</h2><blockquote><p>此软件包附带 RoleMiddleware 和 PermissionMiddleware 中间件。 你可以将它们添加到你的 app&#x2F;Http&#x2F;Kernel.php 文件中。</p></blockquote><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">protected</span> <span class="variable">$routeMiddleware</span> = [</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">    <span class="string">&#x27;role&#x27;</span> =&gt; <span class="title class_">\Spatie\Permission\Middlewares\RoleMiddleware</span>::<span class="variable language_">class</span>,</span><br><span class="line">    <span class="string">&#x27;permission&#x27;</span> =&gt; <span class="title class_">\Spatie\Permission\Middlewares\PermissionMiddleware</span>::<span class="variable language_">class</span>,</span><br><span class="line">    <span class="string">&#x27;role_or_permission&#x27;</span> =&gt; <span class="title class_">\Spatie\Permission\Middlewares\RoleOrPermissionMiddleware</span>::<span class="variable language_">class</span>,</span><br><span class="line">];</span><br></pre></td></tr></table></figure><blockquote><p>然后，你可以使用中间件规则保护你的路由：</p></blockquote><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Route</span>::<span class="title function_ invoke__">group</span>([<span class="string">&#x27;middleware&#x27;</span> =&gt; [<span class="string">&#x27;role:super-admin&#x27;</span>]], function () &#123;</span><br><span class="line">    <span class="comment">//</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="title class_">Route</span>::<span class="title function_ invoke__">group</span>([<span class="string">&#x27;middleware&#x27;</span> =&gt; [<span class="string">&#x27;permission:publish articles&#x27;</span>]], function () &#123;</span><br><span class="line">    <span class="comment">//</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="title class_">Route</span>::<span class="title function_ invoke__">group</span>([<span class="string">&#x27;middleware&#x27;</span> =&gt; [<span class="string">&#x27;role:super-admin&#x27;</span>,<span class="string">&#x27;permission:publish articles&#x27;</span>]], function () &#123;</span><br><span class="line">    <span class="comment">//</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>但是，当路由使用 apiResources 时，对不同路由需要进行权限控制，我们不能直接在 Route 中使用中间件，因为不同的请求方式，我们需要验证不同的权限。（post验证有无【新增】权限，put和patch验证有无【编辑】权限，……）</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 角色、部门、用户、字典</span></span><br><span class="line"><span class="title class_">Route</span>::<span class="title function_ invoke__">apiResources</span>([</span><br><span class="line">    <span class="string">&#x27;roles&#x27;</span> =&gt; \App\Http\Controllers\Api\v1<span class="title class_">\RoleController</span>::<span class="variable language_">class</span>,</span><br><span class="line">    <span class="string">&#x27;departments&#x27;</span> =&gt; \App\Http\Controllers\Api\v1<span class="title class_">\DepartmentController</span>::<span class="variable language_">class</span>,</span><br><span class="line">    <span class="string">&#x27;users&#x27;</span> =&gt; \App\Http\Controllers\Api\v1<span class="title class_">\UserController</span>::<span class="variable language_">class</span>,</span><br><span class="line">    <span class="string">&#x27;dictionaries&#x27;</span> =&gt; \App\Http\Controllers\Api\v1<span class="title class_">\DictController</span>::<span class="variable language_">class</span>,</span><br><span class="line">]);</span><br></pre></td></tr></table></figure><p>在 Laravue框架 的文档中，找到如下处理办法：</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># File: routes/api.php</span></span><br><span class="line"><span class="comment">// All api requests to categories need &quot;manage category&quot; permission</span></span><br><span class="line"><span class="title class_">Route</span>::<span class="title function_ invoke__">apiResource</span>(<span class="string">&#x27;categories&#x27;</span>, <span class="string">&#x27;CategoryController&#x27;</span>)-&gt;<span class="title function_ invoke__">middleware</span>(<span class="string">&#x27;permission:manage category&#x27;</span>);</span><br><span class="line"><span class="comment">// Listing category will require &quot;view category&quot; or &quot;manage category&quot;</span></span><br><span class="line"><span class="title class_">Route</span>::<span class="title function_ invoke__">get</span>(<span class="string">&#x27;categories&#x27;</span>, <span class="string">&#x27;CategoryController@index&#x27;</span>)-&gt;<span class="title function_ invoke__">name</span>(<span class="string">&#x27;categories.index&#x27;</span>)-&gt;<span class="title function_ invoke__">middleware</span>(<span class="string">&#x27;permission:view category|manage category&#x27;</span>);</span><br></pre></td></tr></table></figure><p>即 额外定义对应路由中间件。个人觉得这样虽然可以实现功能，但破坏了 route 的美感，相当于不使用 <code>apiResources</code>，手动定义了一遍全部的资源路由。</p><p>最后，研究中间件的时候，终于找到了一种我可以接受的解决方案：在 controller 中定义中间件。</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 权限配置</span></span><br><span class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__construct</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">// Middleware only applied to these methods</span></span><br><span class="line">    <span class="variable language_">$this</span>-&gt;<span class="title function_ invoke__">middleware</span>(<span class="string">&#x27;permission:publish articles&#x27;</span>, [<span class="string">&#x27;only&#x27;</span> =&gt; [</span><br><span class="line">        <span class="string">&#x27;update&#x27;</span> // Could add bunch of more methods too</span><br><span class="line">    ]]);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="与-jwt-一起使用"><a href="#与-jwt-一起使用" class="headerlink" title="与 jwt 一起使用"></a>与 jwt 一起使用</h2><p>因为 jwt 的 用户模型使用的 User 继承 Authenticatable，使用 laravel-permission 的 HasRoles Traits 也无法正常工作。</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">User</span> <span class="keyword">extends</span> <span class="title">Authenticatable</span> <span class="keyword">implements</span> <span class="title">JWTSubject</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">  ...</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>这里使用继承 Model 的 Users，可以正常使用 使用 laravel-permission 的 HasRoles Traits。</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Users</span> <span class="keyword">extends</span> <span class="title">Model</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">  ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>经过调试定位，决定重写 permission 中间件。在 <code>\App\Http\Middleware\</code> 下创建 Permission 中间件，继承 laravel-permission 的 PermissionMiddleware。</p><p>修改用户实例，并使用 hasPermissionTo 判断权限。</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">namespace</span> <span class="title class_">App</span>\<span class="title class_">Http</span>\<span class="title class_">Middleware</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">use</span> <span class="title">App</span>\<span class="title">Models</span>\<span class="title">Users</span>;</span><br><span class="line"><span class="keyword">use</span> <span class="title">Spatie</span>\<span class="title">Permission</span>\<span class="title">Exceptions</span>\<span class="title">UnauthorizedException</span>;</span><br><span class="line"><span class="keyword">use</span> <span class="title">Closure</span>;</span><br><span class="line"><span class="keyword">use</span> <span class="title">Spatie</span>\<span class="title">Permission</span>\<span class="title">Middlewares</span>\<span class="title">PermissionMiddleware</span> <span class="keyword">as</span> <span class="title">Middleware</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Permission</span> <span class="keyword">extends</span> <span class="title">Middleware</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">handle</span>(<span class="params"><span class="variable">$request</span>, <span class="built_in">Closure</span> <span class="variable">$next</span>, <span class="variable">$permission</span>, <span class="variable">$guard</span> = <span class="literal">null</span></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="variable">$authGuard</span> = <span class="title function_ invoke__">app</span>(<span class="string">&#x27;auth&#x27;</span>)-&gt;<span class="title function_ invoke__">guard</span>(<span class="variable">$guard</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (<span class="variable">$authGuard</span>-&gt;<span class="title function_ invoke__">guest</span>()) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="title class_">UnauthorizedException</span>::<span class="title function_ invoke__">notLoggedIn</span>();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="variable">$user</span> = <span class="title class_">Users</span>::<span class="title function_ invoke__">find</span>(<span class="variable">$authGuard</span>-&gt;<span class="title function_ invoke__">user</span>()-&gt;id);</span><br><span class="line">        <span class="variable">$permissions</span> = <span class="title function_ invoke__">is_array</span>(<span class="variable">$permission</span>)</span><br><span class="line">            ? <span class="variable">$permission</span></span><br><span class="line">            : <span class="title function_ invoke__">explode</span>(<span class="string">&#x27;|&#x27;</span>, <span class="variable">$permission</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">foreach</span> (<span class="variable">$permissions</span> <span class="keyword">as</span> <span class="variable">$permission</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (<span class="variable">$user</span>-&gt;<span class="title function_ invoke__">hasPermissionTo</span>(<span class="variable">$permission</span>)) &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="variable">$next</span>(<span class="variable">$request</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">throw</span> <span class="title class_">UnauthorizedException</span>::<span class="title function_ invoke__">forPermissions</span>(<span class="variable">$permissions</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>最后，app&#x2F;Http&#x2F;Kernel.php 文件中，重新添加新的 permission 中间件</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">protected</span> <span class="variable">$routeMiddleware</span> = [</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">    <span class="comment">// &#x27;role&#x27; =&gt; \Spatie\Permission\Middlewares\RoleMiddleware::class,</span></span><br><span class="line">    <span class="comment">// &#x27;permission&#x27; =&gt; \Spatie\Permission\Middlewares\PermissionMiddleware::class,</span></span><br><span class="line">    <span class="comment">// &#x27;role_or_permission&#x27; =&gt; \Spatie\Permission\Middlewares\RoleOrPermissionMiddleware::class,</span></span><br><span class="line">    <span class="string">&#x27;permission&#x27;</span> =&gt; <span class="title class_">\App\Http\Middleware\Permission</span>::<span class="variable language_">class</span>,</span><br><span class="line">];</span><br><span class="line"></span><br></pre></td></tr></table></figure><h1 id="软件版本：laravel-8-54"><a href="#软件版本：laravel-8-54" class="headerlink" title="软件版本：laravel 8.54"></a>软件版本：laravel 8.54</h1><h1 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h1><ul><li><a href="https://docs.spatie.be/laravel-permission/v3/introduction/">Laravel-permission 官方文档</a></li><li><a href="https://learnku.com/articles/9842/user-role-permission-control-package-laravel-permission-usage-description#79863f">用户角色权限控制包 Laravel-permission 使用说明</a></li><li><a href="https://doc.laravue.dev/guide/development/work-with-permission.html#permissions-and-api-resources">Laravue 框架 官网文档</a></li><li><a href="https://ask.csdn.net/questions/794718">Laravel在控制器功能中添加中间件</a></li><li><a href="https://laravel.com/docs/5.4/controllers#controller-middleware">Laravel中间件</a></li><li><a href="https://github.com/spatie/laravel-permission/issues/447">using middleware with multiple guards</a></li><li><a href="https://spatie.be/docs/laravel-permission/v5/basic-usage/middleware">Laravel-permission 官方文档 Using a middleware</a></li><li><a href="https://laracasts.com/discuss/channels/laravel/spatie-gave-an-error-like-user-have-not-permission-for-this-page-access">Spatie gave an error like “User have not permission for this page access.”</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> 技术坑记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> laravel </tag>
            
            <tag> php </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Laravel笔记-配置jwt登陆</title>
      <link href="/2021/10/20/Laravel%E7%AC%94%E8%AE%B0-%E9%85%8D%E7%BD%AEjwt%E7%99%BB%E9%99%86/"/>
      <url>/2021/10/20/Laravel%E7%AC%94%E8%AE%B0-%E9%85%8D%E7%BD%AEjwt%E7%99%BB%E9%99%86/</url>
      
        <content type="html"><![CDATA[<h2 id="jwt安装"><a href="#jwt安装" class="headerlink" title="jwt安装"></a>jwt安装</h2><ul><li>php版本：7.4</li><li>laravel版本：8.54</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">composer require tymon/jwt-auth</span><br></pre></td></tr></table></figure><h2 id="jwt配置"><a href="#jwt配置" class="headerlink" title="jwt配置"></a>jwt配置</h2><h3 id="1、发布配置文件"><a href="#1、发布配置文件" class="headerlink" title="1、发布配置文件"></a>1、发布配置文件</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">这条命令会在 config 下增加一个 jwt.php 的配置文件</span></span><br><span class="line">php artisan vendor:publish --provider=&quot;Tymon\JWTAuth\Providers\LaravelServiceProvider&quot;</span><br></pre></td></tr></table></figure><h3 id="2、生成加密密钥"><a href="#2、生成加密密钥" class="headerlink" title="2、生成加密密钥"></a>2、生成加密密钥</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">这条命令会在 .<span class="built_in">env</span> 文件下生成一个加密密钥，如：JWT_SECRET=foobar</span></span><br><span class="line">php artisan jwt:secret</span><br></pre></td></tr></table></figure><h3 id="3、更新你的模型"><a href="#3、更新你的模型" class="headerlink" title="3、更新你的模型"></a>3、更新你的模型</h3><p>如果你使用默认的 User 表来生成 token，你需要在该模型下增加一段代码：</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 原来的 User</span></span><br><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">namespace</span> <span class="title class_">App</span>\<span class="title class_">Models</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">use</span> <span class="title">Illuminate</span>\<span class="title">Contracts</span>\<span class="title">Auth</span>\<span class="title">MustVerifyEmail</span>;</span><br><span class="line"><span class="keyword">use</span> <span class="title">Illuminate</span>\<span class="title">Database</span>\<span class="title">Eloquent</span>\<span class="title">Factories</span>\<span class="title">HasFactory</span>;</span><br><span class="line"><span class="keyword">use</span> <span class="title">Illuminate</span>\<span class="title">Foundation</span>\<span class="title">Auth</span>\<span class="title">User</span> <span class="keyword">as</span> <span class="title">Authenticatable</span>;</span><br><span class="line"><span class="keyword">use</span> <span class="title">Illuminate</span>\<span class="title">Notifications</span>\<span class="title">Notifiable</span>;</span><br><span class="line"><span class="keyword">use</span> <span class="title">Laravel</span>\<span class="title">Sanctum</span>\<span class="title">HasApiTokens</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">User</span> <span class="keyword">extends</span> <span class="title">Authenticatable</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">use</span> <span class="title">HasApiTokens</span>, <span class="title">HasFactory</span>, <span class="title">Notifiable</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ... code ...</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">## 增加的代码</span></span><br><span class="line"><span class="keyword">use</span> <span class="title">Tymon</span>\<span class="title">JWTAuth</span>\<span class="title">Contracts</span>\<span class="title">JWTSubject</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">User</span> <span class="keyword">extends</span> <span class="title">Authenticatable</span> <span class="keyword">implements</span> <span class="title">JWTSubject</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">use</span> <span class="title">HasApiTokens</span>, <span class="title">HasFactory</span>, <span class="title">Notifiable</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ... code ...</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Get the identifier that will be stored in the subject claim of the JWT.</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> mixed</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">getJWTIdentifier</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="variable language_">$this</span>-&gt;<span class="title function_ invoke__">getKey</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Return a key value array, containing any custom claims to be added to the JWT.</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> array</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">getJWTCustomClaims</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> [];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="4、注册两个-Facade"><a href="#4、注册两个-Facade" class="headerlink" title="4、注册两个 Facade"></a>4、注册两个 Facade</h3><p>这两个 Facade 并不是必须的，但是使用它们会给你的代码编写带来一点便利。</p><ul><li>config&#x2F;app.php</li></ul><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> [</span><br><span class="line">    ...</span><br><span class="line">    <span class="string">&#x27;aliases&#x27;</span> =&gt; [</span><br><span class="line">            ...</span><br><span class="line">            <span class="comment">// 添加以下两行</span></span><br><span class="line">            <span class="string">&#x27;JWTAuth&#x27;</span> =&gt; <span class="string">&#x27;Tymon\JWTAuth\Facades\JWTAuth&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;JWTFactory&#x27;</span> =&gt; <span class="string">&#x27;Tymon\JWTAuth\Facades\JWTFactory&#x27;</span>,</span><br><span class="line">    ],</span><br><span class="line">]</span><br></pre></td></tr></table></figure><h3 id="5、修改-auth-php"><a href="#5、修改-auth-php" class="headerlink" title="5、修改 auth.php"></a>5、修改 auth.php</h3><ul><li>config&#x2F;auth.php</li></ul><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> [</span><br><span class="line">    <span class="comment">// 开发接口，设置默认 guard 为 api</span></span><br><span class="line">    <span class="string">&#x27;defaults&#x27;</span> =&gt; [</span><br><span class="line">        <span class="string">&#x27;guard&#x27;</span> =&gt; <span class="string">&#x27;api&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;passwords&#x27;</span> =&gt; <span class="string">&#x27;users&#x27;</span>,</span><br><span class="line">    ],</span><br><span class="line">    <span class="string">&#x27;guards&#x27;</span> =&gt; [</span><br><span class="line">        <span class="string">&#x27;web&#x27;</span> =&gt; [</span><br><span class="line">            <span class="string">&#x27;driver&#x27;</span> =&gt; <span class="string">&#x27;session&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;provider&#x27;</span> =&gt; <span class="string">&#x27;users&#x27;</span>,</span><br><span class="line">        ],</span><br><span class="line">        <span class="comment">// 这里增加 guard api 并设置验证使用 jwt</span></span><br><span class="line">        <span class="string">&#x27;api&#x27;</span> =&gt; [</span><br><span class="line">            <span class="string">&#x27;driver&#x27;</span> =&gt; <span class="string">&#x27;jwt&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;provider&#x27;</span> =&gt; <span class="string">&#x27;users&#x27;</span>,</span><br><span class="line">        ],</span><br><span class="line">    ],</span><br><span class="line">    <span class="string">&#x27;providers&#x27;</span> =&gt; [</span><br><span class="line">        <span class="string">&#x27;users&#x27;</span> =&gt; [</span><br><span class="line">            <span class="string">&#x27;driver&#x27;</span> =&gt; <span class="string">&#x27;eloquent&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;model&#x27;</span> =&gt; <span class="title class_">\App\Models\User</span>::<span class="variable language_">class</span>,</span><br><span class="line">        ],</span><br><span class="line"></span><br><span class="line">        <span class="comment">// &#x27;users&#x27; =&gt; [</span></span><br><span class="line">        <span class="comment">//     &#x27;driver&#x27; =&gt; &#x27;database&#x27;,</span></span><br><span class="line">        <span class="comment">//     &#x27;table&#x27; =&gt; &#x27;users&#x27;,</span></span><br><span class="line">        <span class="comment">// ],</span></span><br><span class="line">    ],</span><br><span class="line">    ...</span><br><span class="line">  ]</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="6、创建-token-控制器"><a href="#6、创建-token-控制器" class="headerlink" title="6、创建 token 控制器"></a>6、创建 token 控制器</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">php artisan make:controller Api/v1/AuthController</span><br></pre></td></tr></table></figure><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">namespace</span> <span class="title class_">App</span>\<span class="title class_">Http</span>\<span class="title class_">Controllers</span>\<span class="title class_">Api</span>\<span class="title class_">v1</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">use</span> <span class="title">App</span>\<span class="title">Http</span>\<span class="title">Controllers</span>\<span class="title">Controller</span>;</span><br><span class="line"><span class="keyword">use</span> <span class="title">Tymon</span>\<span class="title">JWTAuth</span>\<span class="title">Facades</span>\<span class="title">JWTAuth</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@group</span> auth 登陆相关接口</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * &lt;aside class=&quot;warning&quot;&gt;用户登陆&lt;/aside&gt;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">AuthController</span> <span class="keyword">extends</span> <span class="title">Controller</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Create a new AuthController instance.</span></span><br><span class="line"><span class="comment">     * 要求附带 name 和 password（数据来源users表）</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> void</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__construct</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="comment">// 这里额外注意了：官方文档样例中只除外了『login』</span></span><br><span class="line">        <span class="comment">// 这样的结果是，token 只能在有效期以内进行刷新，过期无法刷新</span></span><br><span class="line">        <span class="comment">// 如果把 refresh 也放进去，token 即使过期但仍在刷新期以内也可刷新</span></span><br><span class="line">        <span class="comment">// 不过刷新一次作废</span></span><br><span class="line">        <span class="variable language_">$this</span>-&gt;<span class="title function_ invoke__">middleware</span>(<span class="string">&#x27;auth:api&#x27;</span>, [<span class="string">&#x27;except&#x27;</span> =&gt; [<span class="string">&#x27;login&#x27;</span>, <span class="string">&#x27;logout&#x27;</span>]]);</span><br><span class="line">        <span class="comment">// 另外关于上面的中间件，官方文档写的是『auth:api』</span></span><br><span class="line">        <span class="comment">// 但是我推荐用 『jwt.auth』，效果是一样的，但是有更加丰富的报错信息返回</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Get a JWT via given credentials.</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> \Illuminate\Http\JsonResponse</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">login</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="variable">$credentials</span> = <span class="title function_ invoke__">request</span>([<span class="string">&#x27;email&#x27;</span>, <span class="string">&#x27;password&#x27;</span>]);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (! <span class="variable">$token</span> = <span class="title function_ invoke__">auth</span>(<span class="string">&#x27;api&#x27;</span>)-&gt;<span class="title function_ invoke__">attempt</span>(<span class="variable">$credentials</span>)) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="title function_ invoke__">response</span>()-&gt;<span class="title function_ invoke__">json</span>([<span class="string">&#x27;error&#x27;</span> =&gt; <span class="string">&#x27;Unauthorized&#x27;</span>], <span class="number">401</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="variable language_">$this</span>-&gt;<span class="title function_ invoke__">respondWithToken</span>(<span class="variable">$token</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Get the token array structure.</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span>  string $token</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> \Illuminate\Http\JsonResponse</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="function"><span class="keyword">function</span> <span class="title">respondWithToken</span>(<span class="params"><span class="variable">$token</span></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="title function_ invoke__">response</span>()-&gt;<span class="title function_ invoke__">json</span>([</span><br><span class="line">            <span class="string">&#x27;token&#x27;</span> =&gt; <span class="variable">$token</span>,</span><br><span class="line">            <span class="string">&#x27;token_type&#x27;</span> =&gt; <span class="string">&#x27;bearer&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;expires_in&#x27;</span> =&gt; <span class="title function_ invoke__">auth</span>(<span class="string">&#x27;api&#x27;</span>)-&gt;<span class="title function_ invoke__">factory</span>()-&gt;<span class="title function_ invoke__">getTTL</span>() * <span class="number">60</span></span><br><span class="line">        ]);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="7、注册路由"><a href="#7、注册路由" class="headerlink" title="7、注册路由"></a>7、注册路由</h3><ul><li>routes&#x2F;api.php</li></ul><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="title class_">Route</span>::<span class="title function_ invoke__">group</span>([</span><br><span class="line">    <span class="string">&#x27;prefix&#x27;</span> =&gt; <span class="string">&#x27;auth&#x27;</span></span><br><span class="line">], function (<span class="variable">$router</span>) &#123;</span><br><span class="line"></span><br><span class="line">    <span class="title class_">Route</span>::<span class="title function_ invoke__">post</span>(<span class="string">&#x27;login&#x27;</span>, [\App\Http\Controllers\Api\v1<span class="title class_">\AuthController</span>::<span class="variable language_">class</span>, <span class="string">&#x27;login&#x27;</span>]);</span><br><span class="line">    ...</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h2 id="实现-jwt-token-过期时间动态设置（记住我）"><a href="#实现-jwt-token-过期时间动态设置（记住我）" class="headerlink" title="实现 jwt token 过期时间动态设置（记住我）"></a>实现 jwt token 过期时间动态设置（记住我）</h2><p>jwt token 的过期时间在 config&#x2F;jwt.php 中可以配置，默认1小时。</p><p>而实际项目中，前端登陆时有【记住我】这个功能，勾选后需要过期时间设置为7天。最终找到解决办法如下：</p><ul><li>App\Http\Controllers\Api\v1\AuthController::login</li></ul><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * login 用户登录</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * Get a JWT via given credentials.</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@bodyParam</span> name string required 用户名。</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@bodyParam</span> password string required 密码（不用加密）。</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@bodyParam</span> remember bool 记住我（自动登录）。</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> \Illuminate\Http\JsonResponse</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">login</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="variable">$credentials</span> = <span class="title function_ invoke__">request</span>([<span class="string">&#x27;name&#x27;</span>, <span class="string">&#x27;password&#x27;</span>]);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (<span class="title function_ invoke__">request</span>([<span class="string">&#x27;remember&#x27;</span>])) &#123;</span><br><span class="line">        <span class="title class_">JWTAuth</span>::<span class="title function_ invoke__">factory</span>()-&gt;<span class="title function_ invoke__">setTTL</span>(<span class="number">60</span> * <span class="number">24</span> * <span class="number">7</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="variable">$token</span> = <span class="title class_">JWTAuth</span>::<span class="title function_ invoke__">attempt</span>(<span class="variable">$credentials</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (! <span class="variable">$token</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="title function_ invoke__">response</span>()-&gt;<span class="title function_ invoke__">json</span>([<span class="string">&#x27;error&#x27;</span> =&gt; <span class="string">&#x27;Unauthorized&#x27;</span>], <span class="number">401</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">$this</span>-&gt;<span class="title function_ invoke__">respondWithToken</span>(<span class="variable">$token</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="软件版本：laravel-8-54"><a href="#软件版本：laravel-8-54" class="headerlink" title="软件版本：laravel 8.54"></a>软件版本：laravel 8.54</h2><h2 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h2><ul><li><a href="https://learnku.com/articles/10885/full-use-of-jwt">JWT 完整使用详解</a></li><li><a href="https://stackoverflow.com/questions/41141063/set-expiry-time-for-laravel-jwt-dynamically">Set expiry time for laravel jwt dynamically</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> 技术坑记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> laravel </tag>
            
            <tag> php </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Ant-Design-Vue-Pro表格前的checkbox根据条件禁用</title>
      <link href="/2021/10/19/Ant-Design-Vue-Pro%E8%A1%A8%E6%A0%BC%E5%89%8D%E7%9A%84checkbox%E6%A0%B9%E6%8D%AE%E6%9D%A1%E4%BB%B6%E7%A6%81%E7%94%A8/"/>
      <url>/2021/10/19/Ant-Design-Vue-Pro%E8%A1%A8%E6%A0%BC%E5%89%8D%E7%9A%84checkbox%E6%A0%B9%E6%8D%AE%E6%9D%A1%E4%BB%B6%E7%A6%81%E7%94%A8/</url>
      
        <content type="html"><![CDATA[<h2 id="最终效果"><a href="#最终效果" class="headerlink" title="最终效果"></a>最终效果</h2><ul><li><p>整体禁用</p><img src="/2021/10/19/Ant-Design-Vue-Pro%E8%A1%A8%E6%A0%BC%E5%89%8D%E7%9A%84checkbox%E6%A0%B9%E6%8D%AE%E6%9D%A1%E4%BB%B6%E7%A6%81%E7%94%A8/post-antdv-table-1.jpg" class=""></li><li><p>某一行禁用</p><img src="/2021/10/19/Ant-Design-Vue-Pro%E8%A1%A8%E6%A0%BC%E5%89%8D%E7%9A%84checkbox%E6%A0%B9%E6%8D%AE%E6%9D%A1%E4%BB%B6%E7%A6%81%E7%94%A8/post-antdv-table-2.jpg" class=""></li></ul><h2 id="实现"><a href="#实现" class="headerlink" title="实现"></a>实现</h2><p>首先，使用 Table 组件</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">a-table</span></span></span><br><span class="line"><span class="tag">  <span class="attr">size</span>=<span class="string">&quot;middle&quot;</span></span></span><br><span class="line"><span class="tag">  <span class="attr">:row-selection</span>=<span class="string">&quot;&#123; selectedRowKeys: selectedRowKeys, onChange: onSelectChange, getCheckboxProps: (record) =&gt; setCheckboxProps(record) &#125;&quot;</span></span></span><br><span class="line"><span class="tag">  <span class="attr">:columns</span>=<span class="string">&quot;columns&quot;</span></span></span><br><span class="line"><span class="tag">  <span class="attr">:dataSource</span>=<span class="string">&quot;loadData&quot;</span></span></span><br><span class="line"><span class="tag">  <span class="attr">:pagination</span>=<span class="string">&quot;false&quot;</span></span></span><br><span class="line"><span class="tag">  <span class="attr">:loading</span>=<span class="string">&quot;loading&quot;</span></span></span><br><span class="line"><span class="tag">  <span class="attr">:rowKey</span>=<span class="string">&quot;(record) =&gt; record.id&quot;</span></span></span><br><span class="line"><span class="tag">/&gt;</span></span><br></pre></td></tr></table></figure><p>其中实现<code>复选框禁用</code>是<code>getCheckboxProps: (record) =&gt; setCheckboxProps(record)</code>  </p><p>在 methods 中定义：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">setCheckboxProps</span> (record) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(record)</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    <span class="attr">props</span>: &#123;</span><br><span class="line">      <span class="attr">disabled</span>: record.<span class="property">id</span> === <span class="number">3</span></span><br><span class="line">      <span class="comment">// disabled: this.isSuper</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure><p>这样就可以根据数据行条件判断，并禁用该行的复选框了，也可以根据外部条件，整体禁用复选框。</p><h2 id="软件版本：vue-antd-pro-3-0-2"><a href="#软件版本：vue-antd-pro-3-0-2" class="headerlink" title="软件版本：vue-antd-pro 3.0.2"></a>软件版本：vue-antd-pro 3.0.2</h2><ul><li>“ant-design-vue”: “^1.7.6”</li><li>“vue”: “^2.6.0”,</li></ul><h2 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h2><ul><li><a href="https://antdv.com/components/table-cn/#rowSelection">ant design vue pro 文档：Table 表格</a>  </li><li><a href="https://github.com/ant-design/ant-design/issues/252">table rowSelection 支持指定某一行的 checkbox 是否是 disabled</a></li><li><a href="https://github.com/vueComponent/ant-design-vue/issues/639">在Table组件的rowSelection属性中，使用getCheckboxProps回调函数，并不能将Table中的Checkbox disable掉</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> 技术坑记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> vue </tag>
            
            <tag> antd </tag>
            
            <tag> 前端 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Laravel笔记-常用命令行</title>
      <link href="/2021/10/18/Laravel%E7%AC%94%E8%AE%B0-%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4%E8%A1%8C/"/>
      <url>/2021/10/18/Laravel%E7%AC%94%E8%AE%B0-%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4%E8%A1%8C/</url>
      
        <content type="html"><![CDATA[<h2 id="生成接口文档"><a href="#生成接口文档" class="headerlink" title="生成接口文档"></a>生成接口文档</h2><p>如果使用了 knuckleswtf&#x2F;scribe 来生成 api文档</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">php artisan scribe:generate</span><br></pre></td></tr></table></figure><h2 id="数据库数据初始化"><a href="#数据库数据初始化" class="headerlink" title="数据库数据初始化"></a>数据库数据初始化</h2><p>重新加载数据库，默认执行 <code>database/seeders/DatabaseSeeder.php</code>下的<code>run()</code></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">php artisan migrate:refresh --seed</span><br></pre></td></tr></table></figure><h2 id="生成-model"><a href="#生成-model" class="headerlink" title="生成 model"></a>生成 model</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">php artisan make:model Roles</span><br></pre></td></tr></table></figure><h2 id="生成-controller"><a href="#生成-controller" class="headerlink" title="生成 controller"></a>生成 controller</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">php artisan make:controller Api/v1/RoleController --api</span><br></pre></td></tr></table></figure><h2 id="生成-Request"><a href="#生成-Request" class="headerlink" title="生成 Request"></a>生成 Request</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">php artisan make:request CarStoreRequest</span><br><span class="line">php artisan make:request CarQueryRequest</span><br><span class="line"></span><br><span class="line">php artisan make:request DepartmentStoreRequest</span><br><span class="line">php artisan make:request DepartmentQueryRequest</span><br><span class="line"></span><br><span class="line">php artisan make:request UserStoreRequest</span><br></pre></td></tr></table></figure><h2 id="生成中间件"><a href="#生成中间件" class="headerlink" title="生成中间件"></a>生成中间件</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">php artisan make:middleware SetPageSize</span><br><span class="line">php artisan make:middleware SetSort</span><br><span class="line"></span><br><span class="line">// 查看中间件</span><br><span class="line">php artisan route:list</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="软件版本：laravel-8-54"><a href="#软件版本：laravel-8-54" class="headerlink" title="软件版本：laravel 8.54"></a>软件版本：laravel 8.54</h2><h2 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h2><ul><li><a href="https://learnku.com/docs/laravel/8.x">Laravel 8 中文文档</a></li><li><a href="https://scribe.knuckles.wtf/laravel/">scribe 文档</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> 技术坑记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> laravel </tag>
            
            <tag> php </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>macOS-bigsur安装记录 我的第一台黑苹果 Hackintosh</title>
      <link href="/2021/10/18/macOS-bigsur%E5%AE%89%E8%A3%85%E8%AE%B0%E5%BD%95/"/>
      <url>/2021/10/18/macOS-bigsur%E5%AE%89%E8%A3%85%E8%AE%B0%E5%BD%95/</url>
      
        <content type="html"><![CDATA[<h2 id="为什么想安装macOS-——-从-Ubuntu-到-macOS"><a href="#为什么想安装macOS-——-从-Ubuntu-到-macOS" class="headerlink" title="为什么想安装macOS —— 从 Ubuntu 到 macOS"></a>为什么想安装macOS —— 从 Ubuntu 到 macOS</h2><p>从 2016 年开始，我的办公环境一直是 ubuntu 操作系统，使用的系统版本从 14.04、16.04、17.10、18.04 到 20.04，同时电脑另外也安装着 window10 系统，用来处理一些 ubuntu 上搞不定的工作。  </p><p>ubuntu 这么多年用下来，总体上体验是越来越好了，随着长时间的使用和摸索，许多 Windows 软件在 Linux 下的版本或者替代软件使用起来也越来越熟悉。但是，自从我的微信账号被禁止登陆网页版微信之后，办公体验总是感觉有残缺。虽然安装 wine 可以运行 windows 版的微信，可以文件传输总是有点问题，只能用来聊天，微信办公实在有些煎熬。</p><ul><li>flameshot 或 shutter 可以取代 faststone capture；</li><li>Xmind 有 Linux 版；</li><li>planner 有 Linux 版；</li><li>OBS 有 Linux 版；</li><li>remmina 都能远程桌面到 windows；</li><li>搜狗输入法、百度输入法 有 Linux 版；</li><li>sublime、atom、jetbrains全家桶 有 Linux 版；</li><li>网易与音乐 有 Linux 版；</li><li>Typora 有 Linux 版；</li><li>dropbox 有 Linux 版；</li><li>filezilla 有 Linux 版；<br>…</li><li>微信有网页版，但我不能用</li></ul><p>有没有什么软件可以代替微信呢？—— 好像没有。  </p><p>那有没有像 Linux 一样好用的适合开发人员的操作系统？—— 可以试试买个macbook</p><p>随后观望了一阵子，但是今年刚换了 iphone12，经费紧张，要不先安装个黑苹果，体验一下 macOS，以免买了以后不喜欢用。于是，我开启了黑苹果之旅。</p><h2 id="准备工作"><a href="#准备工作" class="headerlink" title="准备工作"></a>准备工作</h2><ul><li>一台小米笔记本</li><li>一个U盘</li></ul><p>我选择 2017年买的小米笔记本pro，15.6英寸来安装 macOS。 16G 内存，intel i7-8550U 处理器  </p><p>它是 windows10 - Ubuntu 双系统，系统加装了一块固态硬盘，自带的固态上安装着 windows，加装的固态上安装着 Ubuntu。  </p><p>现在，要把 ubuntu 换成 macOS。</p><h2 id="下载镜像"><a href="#下载镜像" class="headerlink" title="下载镜像"></a>下载镜像</h2><p>我 9月1日 安装系统时，下载的系统版本是 11.5.2，找镜像和下载镜像一共花了2个小时，主要是下载太慢了，还被迫开了个百度云超级vip……<br>最后找到了速度快且靠谱的镜像下载站：<a href="https://mirrors.dtops.cc/ISO/MacOS/">macOS镜像</a></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">macOS Big Sur 11.5.2 20G95 Installer for CLOVER 5138 and WEPE.dmg</span><br></pre></td></tr></table></figure><p>我记得是可以使用 IDM 下载的，速度比开了百度网盘超级vip下载的那个镜像还快。</p><h2 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h2><p>具体参照 <strong>黑果小兵</strong> 的 <a href="https://blog.daliansky.net/MacOS-installation-tutorial-XiaoMi-Pro-installation-process-records.html">macOS安装教程兼小米Pro安装过程记录</a>  </p><p>按照教程，一步一步来就行，需要注意这一步：</p><ul><li>教你将U盘上的EFI复制到磁盘的EFI分区,脱离USB运行[macOS篇]</li><li>教你将U盘上的EFI复制到磁盘的EFI分区,脱离USB运行[Windows篇]</li></ul><h2 id="使用Hackintosh"><a href="#使用Hackintosh" class="headerlink" title="使用Hackintosh"></a>使用Hackintosh</h2><p>按照教程，安装的 bigsur11.5.2 系统，Wi-Fi直接是可以用的，目前所有功能正常，除了不能使用 AirDrop，基本上算是完美黑苹果了。  </p><p>这里分享下安装后的鼠标版设置：  </p><p>在 Ubuntu 和 Windows 下，鼠标版拖拽文件操作是：轻点两下（双击），第二下手指不离开鼠标版，然后滑动手指，就实现了拖拽文件的操作。</p><p>但在 macOS 下，拖拽是三指进行的，三指轻触鼠标版后滑动即可。需要进行设置：系统设置-辅助功能-指针控制-触摸板选项-启用拖移（三指拖移）</p><img src="/2021/10/18/macOS-bigsur%E5%AE%89%E8%A3%85%E8%AE%B0%E5%BD%95/post-mac-1.jpg" class=""><img src="/2021/10/18/macOS-bigsur%E5%AE%89%E8%A3%85%E8%AE%B0%E5%BD%95/post-mac-2.jpg" class=""><p>这样设置完成后就可以三指拖拽了。</p><h2 id="后续补充"><a href="#后续补充" class="headerlink" title="后续补充"></a>后续补充</h2><p>之后又在小米air2018 i5-8250u上安装了黑苹果，并配置了多系统（win Ubuntu macOS）的 OC 启动项：<a href="https://blog.csdn.net/qlpdong/article/details/118572750">OpenCore添加ubuntu引导，引导三系统（Macos+Windows+Linux）</a></p><p>安装的系统版本是：macOS Big Sur 11.6 【macOS Big Sur 11.6 20G165 Installer for CLOVER 5139 and WEPE.dmg】</p><p>和小米15.6pro不同，13.3的 efi 安装好系统之后，Wi-Fi不能使用。<a href="https://github.com/johnnync13/Xiaomi-Mi-Air/releases">johnnync13&#x2F;Xiaomi-Mi-Air v7.7.4</a></p><p>参考：<a href="https://heipg.cn/drivers/itlwm-airportitlwm-1-2-0.html">黑苹果英特尔无线WiFi驱动：itlwm&#x2F;airportitlwm 1.2.0 稳定版</a>这篇文章</p><p>下载最新 2.0.0 版本 airportitlwm：<a href="https://github.com/OpenIntelWireless/itlwm/releases/tag/v2.0.0">v2.0.0 stable</a></p><blockquote><p>This version brings performance to the next level:  </p></blockquote><ul><li>iwm&#x2F;iwx: Add support for 802.11AC  </li><li>iwm&#x2F;iwx: Add support for VHT160 (160MHz)  </li><li>Add support for LDPC and STBC  </li><li>Improve RA rate scaling algorithm to support HT, VHT, and HE throughput  </li><li>AirportItlwm: Add support for macOS Monterey  </li><li>AirportItlwm: Add support for overriding Country Code by Airport (starting from macOS Mojave)  <blockquote><p>Priority: User Override &gt; Firmware LOC &gt; Airport Override<br>Adapters that don’t provide Country Codes will now accept them from <code>airportd</code>  </p></blockquote></li><li>AirportItlwm: Fix DHCP auto-renewal and key update issues causing periodic disconnections  </li><li>Update PHY context when MIMO is disabled&#x2F;unsupported to fix issues on single antenna cards  </li><li>iwn: Do not add rxon ht flags on initialization (<a href="https://github.com/OpenIntelWireless/itlwm/pull/606">#606</a> Credit <a href="https://github.com/pigworlds">@pigworlds</a>)<br>Full changelog: <a href="https://github.com/OpenIntelWireless/itlwm/compare/v1.3.0...v2.0.0"><code>v1.3.0...v2.0.0</code></a></li></ul><p>替换 efi 中的 对应文件，Wi-Fi 就可以正常使用了。</p><h2 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h2><ul><li><a href="https://blog.daliansky.net/MacOS-installation-tutorial-XiaoMi-Pro-installation-process-records.html">macOS安装教程兼小米Pro安装过程记录</a></li><li><a href="https://mirrors.dtops.cc/ISO/MacOS/">macOS镜像</a></li><li><a href="https://www.balena.io/etcher/">etcher官网</a></li><li><a href="https://github.com/daliansky/XiaoMi-Pro-Hackintosh/blob/main/Docs/README_CN.md">XiaoMi-Pro-Hackintosh github</a></li><li><a href="https://blog.daliansky.net/Hackintosh-long-term-maintenance-model-checklist.html#xiaomi-%E5%B0%8F%E7%B1%B3">Hackintosh黑苹果长期维护机型整理清单</a></li><li><a href="https://heipg.cn/drivers/itlwm-airportitlwm-1-2-0.html">黑苹果英特尔无线WiFi驱动：itlwm&#x2F;airportitlwm 1.2.0 稳定版</a></li><li><a href="https://blog.csdn.net/qlpdong/article/details/118572750">OpenCore添加ubuntu引导，引导三系统（Macos+Windows+Linux）</a></li><li><a href="https://github.com/johnnync13/Xiaomi-Mi-Air">johnnync13&#x2F;Xiaomi-Mi-Air</a></li></ul><style>header.intro-header {    background-blend-mode: multiply;}</style>]]></content>
      
      
      <categories>
          
          <category> 技术坑记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> macOS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Ant-Design-Vue-Pro组件使用时提示Unknown 树选择组件的引入</title>
      <link href="/2021/09/26/Ant-Design-Vue-Pro%E7%BB%84%E4%BB%B6%E4%BD%BF%E7%94%A8%E6%97%B6%E6%8F%90%E7%A4%BAUnknown/"/>
      <url>/2021/09/26/Ant-Design-Vue-Pro%E7%BB%84%E4%BB%B6%E4%BD%BF%E7%94%A8%E6%97%B6%E6%8F%90%E7%A4%BAUnknown/</url>
      
        <content type="html"><![CDATA[<h2 id="问题"><a href="#问题" class="headerlink" title="问题"></a>问题</h2><ul><li><p>在使用树形选择器组件时，提示错误</p><img src="/2021/09/26/Ant-Design-Vue-Pro%E7%BB%84%E4%BB%B6%E4%BD%BF%E7%94%A8%E6%97%B6%E6%8F%90%E7%A4%BAUnknown/antdv-select-err.jpg" class=""></li><li><p>文档地址：<a href="https://antdv.com/components/tree-select-cn/">TreeSelect 树型选择控件</a></p></li></ul><h2 id="懒加载中引入组件"><a href="#懒加载中引入组件" class="headerlink" title="懒加载中引入组件"></a>懒加载中引入组件</h2><ul><li>src&#x2F;core&#x2F;lazy_use.js</li></ul><p>import 组件：</p><img src="/2021/09/26/Ant-Design-Vue-Pro%E7%BB%84%E4%BB%B6%E4%BD%BF%E7%94%A8%E6%97%B6%E6%8F%90%E7%A4%BAUnknown/antdv-lazy-use-1.jpg" class=""><p>use 组件：</p><img src="/2021/09/26/Ant-Design-Vue-Pro%E7%BB%84%E4%BB%B6%E4%BD%BF%E7%94%A8%E6%97%B6%E6%8F%90%E7%A4%BAUnknown/antdv-lazy-use-2.jpg" class=""><h2 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">Vue</span> <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// base library</span></span><br><span class="line"><span class="keyword">import</span> &#123;</span><br><span class="line">  <span class="title class_">ConfigProvider</span>,</span><br><span class="line">  <span class="title class_">Layout</span>,</span><br><span class="line">  <span class="title class_">Input</span>,</span><br><span class="line">  <span class="title class_">InputNumber</span>,</span><br><span class="line">  <span class="title class_">Button</span>,</span><br><span class="line">  <span class="title class_">Switch</span>,</span><br><span class="line">  <span class="title class_">Radio</span>,</span><br><span class="line">  <span class="title class_">Checkbox</span>,</span><br><span class="line">  <span class="title class_">Select</span>,</span><br><span class="line">  <span class="title class_">Card</span>,</span><br><span class="line">  <span class="title class_">Form</span>,</span><br><span class="line">  <span class="title class_">Row</span>,</span><br><span class="line">  <span class="title class_">Col</span>,</span><br><span class="line">  <span class="title class_">Modal</span>,</span><br><span class="line">  <span class="title class_">Table</span>,</span><br><span class="line">  <span class="title class_">Tabs</span>,</span><br><span class="line">  <span class="title class_">TreeSelect</span>, <span class="comment">// 增加组件</span></span><br><span class="line">  <span class="title class_">Icon</span>,</span><br><span class="line">  <span class="title class_">Badge</span>,</span><br><span class="line">  <span class="title class_">Popover</span>,</span><br><span class="line">  <span class="title class_">Dropdown</span>,</span><br><span class="line">  <span class="title class_">List</span>,</span><br><span class="line">  <span class="title class_">Avatar</span>,</span><br><span class="line">  <span class="title class_">Breadcrumb</span>,</span><br><span class="line">  <span class="title class_">Steps</span>,</span><br><span class="line">  <span class="title class_">Spin</span>,</span><br><span class="line">  <span class="title class_">Menu</span>,</span><br><span class="line">  <span class="title class_">Drawer</span>,</span><br><span class="line">  <span class="title class_">Tooltip</span>,</span><br><span class="line">  <span class="title class_">Alert</span>,</span><br><span class="line">  <span class="title class_">Tag</span>,</span><br><span class="line">  <span class="title class_">Divider</span>,</span><br><span class="line">  <span class="title class_">DatePicker</span>,</span><br><span class="line">  <span class="title class_">TimePicker</span>,</span><br><span class="line">  <span class="title class_">Upload</span>,</span><br><span class="line">  <span class="title class_">Progress</span>,</span><br><span class="line">  <span class="title class_">Skeleton</span>,</span><br><span class="line">  <span class="title class_">Popconfirm</span>,</span><br><span class="line">  <span class="title class_">PageHeader</span>,</span><br><span class="line">  <span class="title class_">Result</span>,</span><br><span class="line">  <span class="title class_">Statistic</span>,</span><br><span class="line">  <span class="title class_">Descriptions</span>,</span><br><span class="line">  <span class="title class_">Space</span>,</span><br><span class="line">  message,</span><br><span class="line">  notification</span><br><span class="line">&#125; <span class="keyword">from</span> <span class="string">&#x27;ant-design-vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Viser</span> <span class="keyword">from</span> <span class="string">&#x27;viser-vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ext library</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">VueCropper</span> <span class="keyword">from</span> <span class="string">&#x27;vue-cropper&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Dialog</span> <span class="keyword">from</span> <span class="string">&#x27;@/components/Dialog&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">MultiTab</span> <span class="keyword">from</span> <span class="string">&#x27;@/components/MultiTab&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">PageLoading</span> <span class="keyword">from</span> <span class="string">&#x27;@/components/PageLoading&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">PermissionHelper</span> <span class="keyword">from</span> <span class="string">&#x27;@/core/permission/permission&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;./directives/action&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">use</span>(<span class="title class_">ConfigProvider</span>)</span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">use</span>(<span class="title class_">Layout</span>)</span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">use</span>(<span class="title class_">Input</span>)</span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">use</span>(<span class="title class_">InputNumber</span>)</span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">use</span>(<span class="title class_">Button</span>)</span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">use</span>(<span class="title class_">Switch</span>)</span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">use</span>(<span class="title class_">Radio</span>)</span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">use</span>(<span class="title class_">Checkbox</span>)</span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">use</span>(<span class="title class_">Select</span>)</span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">use</span>(<span class="title class_">Card</span>)</span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">use</span>(<span class="title class_">Form</span>)</span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">use</span>(<span class="title class_">Row</span>)</span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">use</span>(<span class="title class_">Col</span>)</span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">use</span>(<span class="title class_">Modal</span>)</span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">use</span>(<span class="title class_">Table</span>)</span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">use</span>(<span class="title class_">Tabs</span>)</span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">use</span>(<span class="title class_">TreeSelect</span>) <span class="comment">// 增加组件</span></span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">use</span>(<span class="title class_">Icon</span>)</span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">use</span>(<span class="title class_">Badge</span>)</span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">use</span>(<span class="title class_">Popover</span>)</span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">use</span>(<span class="title class_">Dropdown</span>)</span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">use</span>(<span class="title class_">List</span>)</span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">use</span>(<span class="title class_">Avatar</span>)</span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">use</span>(<span class="title class_">Breadcrumb</span>)</span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">use</span>(<span class="title class_">Steps</span>)</span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">use</span>(<span class="title class_">Spin</span>)</span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">use</span>(<span class="title class_">Menu</span>)</span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">use</span>(<span class="title class_">Drawer</span>)</span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">use</span>(<span class="title class_">Tooltip</span>)</span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">use</span>(<span class="title class_">Alert</span>)</span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">use</span>(<span class="title class_">Tag</span>)</span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">use</span>(<span class="title class_">Divider</span>)</span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">use</span>(<span class="title class_">DatePicker</span>)</span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">use</span>(<span class="title class_">TimePicker</span>)</span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">use</span>(<span class="title class_">Upload</span>)</span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">use</span>(<span class="title class_">Progress</span>)</span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">use</span>(<span class="title class_">Skeleton</span>)</span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">use</span>(<span class="title class_">Popconfirm</span>)</span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">use</span>(<span class="title class_">PageHeader</span>)</span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">use</span>(<span class="title class_">Result</span>)</span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">use</span>(<span class="title class_">Statistic</span>)</span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">use</span>(<span class="title class_">Descriptions</span>)</span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">use</span>(<span class="title class_">Space</span>)</span><br><span class="line"></span><br><span class="line"><span class="title class_">Vue</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">$confirm</span> = <span class="title class_">Modal</span>.<span class="property">confirm</span></span><br><span class="line"><span class="title class_">Vue</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">$message</span> = message</span><br><span class="line"><span class="title class_">Vue</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">$notification</span> = notification</span><br><span class="line"><span class="title class_">Vue</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">$info</span> = <span class="title class_">Modal</span>.<span class="property">info</span></span><br><span class="line"><span class="title class_">Vue</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">$success</span> = <span class="title class_">Modal</span>.<span class="property">success</span></span><br><span class="line"><span class="title class_">Vue</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">$error</span> = <span class="title class_">Modal</span>.<span class="property">error</span></span><br><span class="line"><span class="title class_">Vue</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">$warning</span> = <span class="title class_">Modal</span>.<span class="property">warning</span></span><br><span class="line"></span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">use</span>(<span class="title class_">Viser</span>)</span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">use</span>(<span class="title class_">Dialog</span>) <span class="comment">// this.$dialog func</span></span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">use</span>(<span class="title class_">MultiTab</span>)</span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">use</span>(<span class="title class_">PageLoading</span>)</span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">use</span>(<span class="title class_">PermissionHelper</span>)</span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">use</span>(<span class="title class_">VueCropper</span>)</span><br><span class="line"></span><br><span class="line">process.<span class="property">env</span>.<span class="property">NODE_ENV</span> !== <span class="string">&#x27;production&#x27;</span> &amp;&amp; <span class="variable language_">console</span>.<span class="title function_">warn</span>(<span class="string">&#x27;[antd-pro] NOTICE: Antd use lazy-load.&#x27;</span>)</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="软件版本：vue-antd-pro-3-0-2"><a href="#软件版本：vue-antd-pro-3-0-2" class="headerlink" title="软件版本：vue-antd-pro 3.0.2"></a>软件版本：vue-antd-pro 3.0.2</h2><ul><li>“ant-design-vue”: “^1.7.6”</li><li>“vue”: “^2.6.0”,</li></ul><h2 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h2><ul><li><a href="https://blog.csdn.net/SeasmallTop/article/details/109117059">ant design pro vue 组件未注册 Unknown custom element:＜a-tree＞</a></li><li><a href="https://github.com/vueComponent/ant-design-vue-pro/issues/689">Unknown custom element: &lt;a-carousel&gt; #689</a>  </li><li><a href="https://github.com/vueComponent/ant-design-vue-pro/issues/546">组件a-tree-select 无法使用，请问应该需要引入 #546</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> 技术坑记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> vue </tag>
            
            <tag> 前端 </tag>
            
            <tag> antdv </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Ant-Design-Vue-Pro配置多页签</title>
      <link href="/2021/09/26/Ant-Design-Vue-Pro%E9%85%8D%E7%BD%AE%E5%A4%9A%E9%A1%B5%E7%AD%BE/"/>
      <url>/2021/09/26/Ant-Design-Vue-Pro%E9%85%8D%E7%BD%AE%E5%A4%9A%E9%A1%B5%E7%AD%BE/</url>
      
        <content type="html"><![CDATA[<h2 id="最终效果"><a href="#最终效果" class="headerlink" title="最终效果"></a>最终效果</h2><ul><li><p>整体效果</p><img src="/2021/09/26/Ant-Design-Vue-Pro%E9%85%8D%E7%BD%AE%E5%A4%9A%E9%A1%B5%E7%AD%BE/antdv-multitab.jpg" class=""></li><li><p>右键效果</p><img src="/2021/09/26/Ant-Design-Vue-Pro%E9%85%8D%E7%BD%AE%E5%A4%9A%E9%A1%B5%E7%AD%BE/antdv-multitab-close.jpg" class=""></li><li><p>多语言国际化效果</p><img src="/2021/09/26/Ant-Design-Vue-Pro%E9%85%8D%E7%BD%AE%E5%A4%9A%E9%A1%B5%E7%AD%BE/antdv-multitab-i18n.jpg" class=""></li></ul><h2 id="修改配置文件"><a href="#修改配置文件" class="headerlink" title="修改配置文件"></a>修改配置文件</h2><ul><li>src&#x2F;config&#x2F;defaultSettings.js</li></ul><p>增加 multiTab 配置，设置为 true</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="attr">navTheme</span>: <span class="string">&#x27;dark&#x27;</span>, <span class="comment">// theme for nav menu</span></span><br><span class="line">  <span class="attr">primaryColor</span>: <span class="string">&#x27;#1890ff&#x27;</span>, <span class="comment">// primary color of ant design</span></span><br><span class="line">  <span class="attr">layout</span>: <span class="string">&#x27;sidemenu&#x27;</span>, <span class="comment">// nav menu position: `sidemenu` or `topmenu`</span></span><br><span class="line">  <span class="attr">contentWidth</span>: <span class="string">&#x27;Fluid&#x27;</span>, <span class="comment">// layout of content: `Fluid` or `Fixed`, only works when layout is topmenu</span></span><br><span class="line">  <span class="attr">fixedHeader</span>: <span class="literal">false</span>, <span class="comment">// sticky header</span></span><br><span class="line">  <span class="attr">fixSiderbar</span>: <span class="literal">false</span>, <span class="comment">// sticky siderbar</span></span><br><span class="line">  <span class="attr">colorWeak</span>: <span class="literal">false</span>,</span><br><span class="line">  <span class="attr">multiTab</span>: <span class="literal">true</span>, <span class="comment">// &lt;----- 增加 multiTab 配置</span></span><br><span class="line"><span class="comment">// ...</span></span><br></pre></td></tr></table></figure><h2 id="布局模版中增加-multitab"><a href="#布局模版中增加-multitab" class="headerlink" title="布局模版中增加 multitab"></a>布局模版中增加 multitab</h2><ul><li>src&#x2F;layouts&#x2F;BasicLayout.vue</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span> <span class="attr">v-slot:rightContentRender</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">right-content</span> <span class="attr">:top-menu</span>=<span class="string">&quot;settings.layout === &#x27;topmenu&#x27;&quot;</span> <span class="attr">:is-mobile</span>=<span class="string">&quot;isMobile&quot;</span> <span class="attr">:theme</span>=<span class="string">&quot;settings.theme&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- multiTab --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a-layout-content</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">multi-tab</span> <span class="attr">v-if</span>=<span class="string">&quot;settings.multiTab&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">multi-tab</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">transition</span> <span class="attr">name</span>=<span class="string">&quot;page-transition&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">transition</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">a-layout-content</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- custom footer / 自定义Footer --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">template</span> <span class="attr">v-slot:footerRender</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">global-footer</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br></pre></td></tr></table></figure><p>在 data 中，定义 multiTab 的值，从 config 中读取。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&#x27;BasicLayout&#x27;</span>,</span><br><span class="line">  <span class="attr">components</span>: &#123;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="title function_">data</span> () &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      <span class="comment">// ...</span></span><br><span class="line">      <span class="attr">settings</span>: &#123;</span><br><span class="line">        <span class="comment">// ...</span></span><br><span class="line">        <span class="attr">colorWeak</span>: defaultSettings.<span class="property">colorWeak</span>,</span><br><span class="line">        <span class="attr">multiTab</span>: defaultSettings.<span class="property">multiTab</span>,</span><br><span class="line"><span class="comment">// ...</span></span><br></pre></td></tr></table></figure><h2 id="配置多语言"><a href="#配置多语言" class="headerlink" title="配置多语言"></a>配置多语言</h2><ul><li>src&#x2F;locales&#x2F;lang&#x2F;zh-CN&#x2F;global.js</li><li>src&#x2F;locales&#x2F;lang&#x2F;en-US&#x2F;global.js</li></ul><p>在多语言配置中，分别增加多页签用到的翻译文本</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="attr">submit</span>: <span class="string">&#x27;提交&#x27;</span>,</span><br><span class="line">  <span class="attr">save</span>: <span class="string">&#x27;保存&#x27;</span>,</span><br><span class="line">  <span class="string">&#x27;submit.ok&#x27;</span>: <span class="string">&#x27;提交成功&#x27;</span>,</span><br><span class="line">  <span class="string">&#x27;save.ok&#x27;</span>: <span class="string">&#x27;保存成功&#x27;</span>,</span><br><span class="line">  <span class="string">&#x27;canNotCloseTab&#x27;</span>: <span class="string">&#x27;这是最后一个标签了, 无法被关闭&#x27;</span>,</span><br><span class="line">  <span class="string">&#x27;noTabsLeft&#x27;</span>: <span class="string">&#x27;左侧没有标签&#x27;</span>,</span><br><span class="line">  <span class="string">&#x27;noTabsRight&#x27;</span>: <span class="string">&#x27;右侧没有标签&#x27;</span>,</span><br><span class="line">  <span class="string">&#x27;closeThat&#x27;</span>: <span class="string">&#x27;关闭当前标签&#x27;</span>,</span><br><span class="line">  <span class="string">&#x27;closeRight&#x27;</span>: <span class="string">&#x27;关闭右侧&#x27;</span>,</span><br><span class="line">  <span class="string">&#x27;closeLeft&#x27;</span>: <span class="string">&#x27;关闭左侧&#x27;</span>,</span><br><span class="line">  <span class="string">&#x27;closeAll&#x27;</span>: <span class="string">&#x27;关闭全部&#x27;</span>,</span><br><span class="line">  <span class="string">&#x27;input&#x27;</span>: <span class="string">&#x27;请输入&#x27;</span>,</span><br><span class="line">  <span class="string">&#x27;choose&#x27;</span>: <span class="string">&#x27;请选择&#x27;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="attr">submit</span>: <span class="string">&#x27;Submit&#x27;</span>,</span><br><span class="line">  <span class="attr">save</span>: <span class="string">&#x27;Save&#x27;</span>,</span><br><span class="line">  <span class="string">&#x27;submit.ok&#x27;</span>: <span class="string">&#x27;Submit successfully&#x27;</span>,</span><br><span class="line">  <span class="string">&#x27;save.ok&#x27;</span>: <span class="string">&#x27;Saved successfully&#x27;</span>,</span><br><span class="line">  <span class="string">&#x27;canNotCloseTab&#x27;</span>: <span class="string">&#x27;This is the last tab, it cannot be closed&#x27;</span>,</span><br><span class="line">  <span class="string">&#x27;noTabsLeft&#x27;</span>: <span class="string">&#x27;No tabs on the left&#x27;</span>,</span><br><span class="line">  <span class="string">&#x27;noTabsRight&#x27;</span>: <span class="string">&#x27;No tabs on the right&#x27;</span>,</span><br><span class="line">  <span class="string">&#x27;closeThat&#x27;</span>: <span class="string">&#x27;Close current tab&#x27;</span>,</span><br><span class="line">  <span class="string">&#x27;closeRight&#x27;</span>: <span class="string">&#x27;Close right&#x27;</span>,</span><br><span class="line">  <span class="string">&#x27;closeLeft&#x27;</span>: <span class="string">&#x27;Close left&#x27;</span>,</span><br><span class="line">  <span class="string">&#x27;closeAll&#x27;</span>: <span class="string">&#x27;Close all&#x27;</span>,</span><br><span class="line">  <span class="string">&#x27;input&#x27;</span>: <span class="string">&#x27;Please input&#x27;</span>,</span><br><span class="line">  <span class="string">&#x27;choose&#x27;</span>: <span class="string">&#x27;Please choose&#x27;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>src&#x2F;components&#x2F;MultiTab&#x2F;MultiTab.vue</li></ul><p>使用 <code>$t()</code> 替换原来的中文描述文本。</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> events <span class="keyword">from</span> <span class="string">&#x27;./events&#x27;</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">  <span class="attr">name</span>: <span class="string">&#x27;MultiTab&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">  <span class="title function_">data</span> () &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">fullPathList</span>: [],</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">pages</span>: [],</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">activeKey</span>: <span class="string">&#x27;&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">newTabIndex</span>: <span class="number">0</span></span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">  &#125;,</span></span><br><span class="line"><span class="language-javascript">  <span class="title function_">created</span> () &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="comment">//...</span></span></span><br><span class="line"><span class="language-javascript">  &#125;,</span></span><br><span class="line"><span class="language-javascript">  <span class="attr">methods</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">onEdit</span> (targetKey, action) &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// ...</span></span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">remove</span> (targetKey) &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// ...</span></span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">selectedLastPath</span> () &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// ...</span></span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// content menu</span></span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">closeThat</span> (e) &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// 判断是否为最后一个标签页，如果是最后一个，则无法被关闭</span></span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">fullPathList</span>.<span class="property">length</span> &gt; <span class="number">1</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">this</span>.<span class="title function_">remove</span>(e)</span></span><br><span class="line"><span class="language-javascript">      &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">info</span>(<span class="variable language_">this</span>.$t(<span class="string">&#x27;canNotCloseTab&#x27;</span>))</span></span><br><span class="line"><span class="language-javascript">      &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">closeLeft</span> (e) &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">const</span> currentIndex = <span class="variable language_">this</span>.<span class="property">fullPathList</span>.<span class="title function_">indexOf</span>(e)</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">if</span> (currentIndex &gt; <span class="number">0</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">this</span>.<span class="property">fullPathList</span>.<span class="title function_">forEach</span>(<span class="function">(<span class="params">item, index</span>) =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">          <span class="keyword">if</span> (index &lt; currentIndex) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="title function_">remove</span>(item)</span></span><br><span class="line"><span class="language-javascript">          &#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;)</span></span><br><span class="line"><span class="language-javascript">      &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">info</span>(<span class="variable language_">this</span>.$t(<span class="string">&#x27;noTabsLeft&#x27;</span>))</span></span><br><span class="line"><span class="language-javascript">      &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">closeRight</span> (e) &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">const</span> currentIndex = <span class="variable language_">this</span>.<span class="property">fullPathList</span>.<span class="title function_">indexOf</span>(e)</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">if</span> (currentIndex &lt; (<span class="variable language_">this</span>.<span class="property">fullPathList</span>.<span class="property">length</span> - <span class="number">1</span>)) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">this</span>.<span class="property">fullPathList</span>.<span class="title function_">forEach</span>(<span class="function">(<span class="params">item, index</span>) =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">          <span class="keyword">if</span> (index &gt; currentIndex) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="title function_">remove</span>(item)</span></span><br><span class="line"><span class="language-javascript">          &#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;)</span></span><br><span class="line"><span class="language-javascript">      &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">info</span>(<span class="variable language_">this</span>.$t(<span class="string">&#x27;noTabsRight&#x27;</span>))</span></span><br><span class="line"><span class="language-javascript">      &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">closeAll</span> (e) &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// ...</span></span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">closeMenuClick</span> (key, route) &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// ...</span></span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">renderTabPaneMenu</span> (e) &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">return</span> (</span></span><br><span class="line"><span class="language-javascript">        <span class="language-xml"><span class="tag">&lt;<span class="name">a-menu</span> &#123;<span class="attr">...</span>&#123; <span class="attr">on:</span> &#123; <span class="attr">click:</span> (&#123; <span class="attr">key</span>, <span class="attr">item</span>, <span class="attr">domEvent</span> &#125;) =&gt;</span> &#123; this.closeMenuClick(key, e) &#125; &#125; &#125;&#125;&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="language-javascript">          <span class="tag">&lt;<span class="name">a-menu-item</span> <span class="attr">key</span>=<span class="string">&quot;closeThat&quot;</span>&gt;</span>&#123; this.$t(&#x27;closeThat&#x27;) &#125;<span class="tag">&lt;/<span class="name">a-menu-item</span>&gt;</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-javascript">          <span class="tag">&lt;<span class="name">a-menu-item</span> <span class="attr">key</span>=<span class="string">&quot;closeRight&quot;</span>&gt;</span>&#123; this.$t(&#x27;closeRight&#x27;) &#125;<span class="tag">&lt;/<span class="name">a-menu-item</span>&gt;</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-javascript">          <span class="tag">&lt;<span class="name">a-menu-item</span> <span class="attr">key</span>=<span class="string">&quot;closeLeft&quot;</span>&gt;</span>&#123; this.$t(&#x27;closeLeft&#x27;) &#125;<span class="tag">&lt;/<span class="name">a-menu-item</span>&gt;</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-javascript">          <span class="tag">&lt;<span class="name">a-menu-item</span> <span class="attr">key</span>=<span class="string">&quot;closeAll&quot;</span>&gt;</span>&#123; this.$t(&#x27;closeAll&#x27;) &#125;<span class="tag">&lt;/<span class="name">a-menu-item</span>&gt;</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-javascript">        <span class="tag">&lt;/<span class="name">a-menu</span>&gt;</span></span></span></span><br><span class="line"><span class="language-javascript">      )</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// render</span></span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">renderTabPane</span> (title, keyPath) &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">const</span> menu = <span class="variable language_">this</span>.<span class="title function_">renderTabPaneMenu</span>(keyPath)</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">return</span> (</span></span><br><span class="line"><span class="language-javascript">        <span class="language-xml"><span class="tag">&lt;<span class="name">a-dropdown</span> <span class="attr">overlay</span>=<span class="string">&#123;menu&#125;</span> <span class="attr">trigger</span>=<span class="string">&#123;[</span>&#x27;<span class="attr">contextmenu</span>&#x27;]&#125;&gt;</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-javascript">          <span class="tag">&lt;<span class="name">span</span> <span class="attr">style</span>=<span class="string">&#123;&#123;</span> <span class="attr">userSelect:</span> &#x27;<span class="attr">none</span>&#x27; &#125;&#125;&gt;</span>&#123; this.$t(title) &#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-javascript">        <span class="tag">&lt;/<span class="name">a-dropdown</span>&gt;</span></span></span></span><br><span class="line"><span class="language-javascript">      )</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">  &#125;,</span></span><br><span class="line"><span class="language-javascript">  <span class="attr">watch</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// ...</span></span></span><br><span class="line"><span class="language-javascript">  &#125;,</span></span><br><span class="line"><span class="language-javascript">  <span class="title function_">render</span> () &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// ...</span></span></span><br><span class="line"><span class="language-javascript">  &#125;</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="软件版本：vue-antd-pro-3-0-2"><a href="#软件版本：vue-antd-pro-3-0-2" class="headerlink" title="软件版本：vue-antd-pro 3.0.2"></a>软件版本：vue-antd-pro 3.0.2</h2><ul><li>“ant-design-vue”: “^1.7.6”</li><li>“vue”: “^2.6.0”,</li></ul><h2 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h2><ul><li><a href="https://blog.csdn.net/abcdefg182/article/details/108454433">ant design vue pro 支持多页签模式 页签可以缓存</a></li><li><a href="https://github.com/vueComponent/ant-design-vue-pro/issues/794">开启multiTab后, keep-alive 没有生效</a>  </li><li><a href="https://gitea.kerbores.com/PROJECT_STARTER/antdv-typescript-starter/commit/f483c60a42a6baf8e6bc1cbf05f3b4a4287f17d0">PROJECT_STARTER&#x2F;antdv-typescript-starter 国际化</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> 技术坑记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> vue </tag>
            
            <tag> antd </tag>
            
            <tag> 前端 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Ant-Design-Vue-Pro修改系统名称与logo</title>
      <link href="/2021/09/26/Ant-Design-Vue-Pro%E4%BF%AE%E6%94%B9%E7%B3%BB%E7%BB%9F%E5%90%8D%E7%A7%B0%E4%B8%8Elogo/"/>
      <url>/2021/09/26/Ant-Design-Vue-Pro%E4%BF%AE%E6%94%B9%E7%B3%BB%E7%BB%9F%E5%90%8D%E7%A7%B0%E4%B8%8Elogo/</url>
      
        <content type="html"><![CDATA[<h2 id="修改全局title"><a href="#修改全局title" class="headerlink" title="修改全局title"></a>修改全局title</h2><ul><li>src&#x2F;config&#x2F;defaultSettings.js</li></ul><p>修改 title 的值</p><h2 id="修改登陆界面的系统名称和logo"><a href="#修改登陆界面的系统名称和logo" class="headerlink" title="修改登陆界面的系统名称和logo"></a>修改登陆界面的系统名称和logo</h2><ul><li>src&#x2F;layouts&#x2F;UserLayout.vue 中修改对应的信息</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;header&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;/&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;~@/assets/new-logo.svg&quot;</span> <span class="attr">class</span>=<span class="string">&quot;logo&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;logo&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;title&quot;</span>&gt;</span>&#123;&#123; title &#125;&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">...</span><br></pre></td></tr></table></figure><p>title 使用 config 中设置的，这里要引入一下。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ...</span></span><br><span class="line"><span class="keyword">import</span> defaultSettings <span class="keyword">from</span> <span class="string">&#x27;@/config/defaultSettings&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&#x27;UserLayout&#x27;</span>,</span><br><span class="line">  <span class="attr">components</span>: &#123;</span><br><span class="line">    <span class="title class_">SelectLang</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="title function_">data</span> () &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      <span class="attr">title</span>: defaultSettings.<span class="property">title</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line"><span class="comment">// ...  </span></span><br></pre></td></tr></table></figure><h2 id="修改后标题过长，在侧边菜单无法显示的问题"><a href="#修改后标题过长，在侧边菜单无法显示的问题" class="headerlink" title="修改后标题过长，在侧边菜单无法显示的问题"></a>修改后标题过长，在侧边菜单无法显示的问题</h2><ul><li>src&#x2F;layouts&#x2F;BasicLayout.vue</li></ul><p>给 <code>&lt;h1&gt;</code> 标签设置字体大小，调整到合适显示的大小。</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 1.0.0+ 版本 pro-layout 提供 API，</span></span><br><span class="line"><span class="comment">      我们推荐使用这种方式进行 LOGO 和 title 自定义</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">template</span> <span class="attr">v-slot:menuHeaderRender</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">logo-svg</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span> <span class="attr">style</span>=<span class="string">&quot;font-size: 16px;&quot;</span>&gt;</span>&#123;&#123; title &#125;&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 1.0.0+ 版本 pro-layout 提供 API,</span></span><br><span class="line"><span class="comment">      增加 Header 左侧内容区自定义</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br></pre></td></tr></table></figure><h2 id="修改菜单栏上的-logo"><a href="#修改菜单栏上的-logo" class="headerlink" title="修改菜单栏上的 logo"></a>修改菜单栏上的 logo</h2><ul><li>src&#x2F;layouts&#x2F;BasicLayout.vue</li></ul><p>修改 logo 的图片引用。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">LogoSvg</span> <span class="keyword">from</span> <span class="string">&#x27;../assets/new-logo.svg?inline&#x27;</span></span><br></pre></td></tr></table></figure><h2 id="修改网站icon"><a href="#修改网站icon" class="headerlink" title="修改网站icon"></a>修改网站icon</h2><ul><li>public&#x2F;index.html</li></ul><p>将网站 icon 替换成新的 icon：favicon.ico</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;icon&quot;</span> <span class="attr">href</span>=<span class="string">&quot;&lt;%= BASE_URL %&gt;favicon.ico&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="软件版本：vue-antd-pro-3-0-2"><a href="#软件版本：vue-antd-pro-3-0-2" class="headerlink" title="软件版本：vue-antd-pro 3.0.2"></a>软件版本：vue-antd-pro 3.0.2</h2><ul><li>“ant-design-vue”: “^1.7.6”</li><li>“vue”: “^2.6.0”,</li></ul>]]></content>
      
      
      <categories>
          
          <category> 技术坑记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> vue </tag>
            
            <tag> antd </tag>
            
            <tag> 前端 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Ant-Design-Vue-Pro隐藏多语言切换 并设置默认中文</title>
      <link href="/2021/09/26/Ant-Design-Vue-Pro%E9%9A%90%E8%97%8F%E5%A4%9A%E8%AF%AD%E8%A8%80%E5%88%87%E6%8D%A2/"/>
      <url>/2021/09/26/Ant-Design-Vue-Pro%E9%9A%90%E8%97%8F%E5%A4%9A%E8%AF%AD%E8%A8%80%E5%88%87%E6%8D%A2/</url>
      
        <content type="html"><![CDATA[<h2 id="隐藏切换语言按钮"><a href="#隐藏切换语言按钮" class="headerlink" title="隐藏切换语言按钮"></a>隐藏切换语言按钮</h2><ul><li>src&#x2F;components&#x2F;GlobalHeader&#x2F;RightContent.vue</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div :class=&quot;wrpCls&quot;&gt;</span><br><span class="line">    &lt;avatar-dropdown :menu=&quot;showMenu&quot; :current-user=&quot;currentUser&quot; :class=&quot;prefixCls&quot; /&gt;</span><br><span class="line">    &lt;!-- 隐藏语言选择 &lt;select-lang :class=&quot;prefixCls&quot; /&gt;--&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure><ul><li>src&#x2F;layouts&#x2F;UserLayout.vue</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line"></span><br><span class="line">  &lt;div id=&quot;userLayout&quot; :class=&quot;[&#x27;user-layout-wrapper&#x27;, isMobile &amp;&amp; &#x27;mobile&#x27;]&quot;&gt;</span><br><span class="line">    &lt;div class=&quot;container&quot;&gt;</span><br><span class="line">      &lt;div class=&quot;user-layout-lang&quot;&gt;</span><br><span class="line">      &lt;!-- 隐藏语言选择 &lt;select-lang class=&quot;select-lang-trigger&quot; /&gt;--&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">...</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="设置默认中文"><a href="#设置默认中文" class="headerlink" title="设置默认中文"></a>设置默认中文</h2><ul><li>src&#x2F;store&#x2F;modules&#x2F;app.js</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line"><span class="keyword">const</span> app = &#123;</span><br><span class="line">  <span class="attr">state</span>: &#123;</span><br><span class="line">    <span class="attr">sideCollapsed</span>: <span class="literal">false</span>,</span><br><span class="line">    <span class="attr">isMobile</span>: <span class="literal">false</span>,</span><br><span class="line">    <span class="attr">theme</span>: <span class="string">&#x27;dark&#x27;</span>,</span><br><span class="line">    <span class="attr">layout</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">    <span class="attr">contentWidth</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">    <span class="attr">fixedHeader</span>: <span class="literal">false</span>,</span><br><span class="line">    <span class="attr">fixedSidebar</span>: <span class="literal">false</span>,</span><br><span class="line">    <span class="attr">autoHideHeader</span>: <span class="literal">false</span>,</span><br><span class="line">    <span class="attr">color</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">    <span class="attr">weak</span>: <span class="literal">false</span>,</span><br><span class="line">    <span class="attr">multiTab</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">lang</span>: <span class="string">&#x27;zh-CN&#x27;</span>, <span class="comment">// 默认中文</span></span><br><span class="line">    <span class="attr">_antLocale</span>: &#123;&#125;</span><br><span class="line">  &#125;,</span><br><span class="line">...</span><br></pre></td></tr></table></figure><ul><li>src&#x2F;core&#x2F;bootstrap.js</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line">  store.<span class="title function_">dispatch</span>(<span class="string">&#x27;setLang&#x27;</span>, storage.<span class="title function_">get</span>(<span class="variable constant_">APP_LANGUAGE</span>, <span class="string">&#x27;zh-CN&#x27;</span>)) <span class="comment">// 默认中文</span></span><br><span class="line">  <span class="comment">// last step</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="软件版本：vue-antd-pro-3-0-2"><a href="#软件版本：vue-antd-pro-3-0-2" class="headerlink" title="软件版本：vue-antd-pro 3.0.2"></a>软件版本：vue-antd-pro 3.0.2</h2><ul><li>“ant-design-vue”: “^1.7.6”</li><li>“vue”: “^2.6.0”,</li></ul>]]></content>
      
      
      <categories>
          
          <category> 技术坑记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> vue </tag>
            
            <tag> antd </tag>
            
            <tag> 前端 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Laravel笔记-生成UUID</title>
      <link href="/2021/09/24/Laravel%E7%AC%94%E8%AE%B0-%E7%94%9F%E6%88%90UUID/"/>
      <url>/2021/09/24/Laravel%E7%AC%94%E8%AE%B0-%E7%94%9F%E6%88%90UUID/</url>
      
        <content type="html"><![CDATA[<h2 id="生成-UUID"><a href="#生成-UUID" class="headerlink" title="生成 UUID"></a>生成 UUID</h2><ul><li>使用 Str 类提供的方法。</li></ul><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">use</span> <span class="title">Illuminate</span>\<span class="title">Support</span>\<span class="title">Str</span>;</span><br><span class="line"></span><br><span class="line"><span class="title class_">Str</span>::<span class="title function_ invoke__">orderedUuid</span>()-&gt;<span class="title function_ invoke__">toString</span>();</span><br></pre></td></tr></table></figure><p>如果不要UUID中间的横杠，加上 getHex 就可以了。  </p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Str</span>::<span class="title function_ invoke__">orderedUuid</span>()-&gt;<span class="title function_ invoke__">getHex</span>()-&gt;<span class="title function_ invoke__">toString</span>();</span><br></pre></td></tr></table></figure><h2 id="软件版本：laravel-8-54"><a href="#软件版本：laravel-8-54" class="headerlink" title="软件版本：laravel 8.54"></a>软件版本：laravel 8.54</h2><h2 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h2><ul><li><a href="https://stackoverflow.com/questions/37948764/laravel-uuid-generation">Laravel UUID generation</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> 技术坑记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> laravel </tag>
            
            <tag> php </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Laravel笔记-如何启用软删除</title>
      <link href="/2021/09/23/Laravel%E7%AC%94%E8%AE%B0-%E5%A6%82%E4%BD%95%E5%90%AF%E7%94%A8%E8%BD%AF%E5%88%A0%E9%99%A4/"/>
      <url>/2021/09/23/Laravel%E7%AC%94%E8%AE%B0-%E5%A6%82%E4%BD%95%E5%90%AF%E7%94%A8%E8%BD%AF%E5%88%A0%E9%99%A4/</url>
      
        <content type="html"><![CDATA[<h2 id="什么是软删除"><a href="#什么是软删除" class="headerlink" title="什么是软删除"></a>什么是软删除</h2><p>软删除就是逻辑删除，并非将数据从数据库中真正的删除掉，即在 sql 中体现为用 update 语句替代 delete 语句，更新删除标记字典来实现。<br>在实际业务中，很多“删除”的数据，并不是永远不再需要的数据。我们仍然会有关联查询已删除数据的场景，这里就需要引入软删除（标记删除）来避免数据真正被删除而无法关联查询的情况。比如，企业中的用户（用户表中）被删除后，该用户在系统中产生的数据一般会包含其姓名等信息，这些信息可通过软删除查询很方便地被查询到，当然，信息冗余储存也是一种办法，但会带来数据更新的业务复杂度增加，相比之下，软删除的引入更简洁直观。</p><h2 id="laravel开启软删除"><a href="#laravel开启软删除" class="headerlink" title="laravel开启软删除"></a>laravel开启软删除</h2><ul><li><p>laravel 框架中自带软删除支持，需要手动开启</p></li><li><p>数据库表中增加字段 <code>deleted_at</code>，可以使用数据库迁移的方式增加，也可以手动创建。</p></li></ul><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">up</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="title class_">Schema</span>::<span class="title function_ invoke__">table</span>(<span class="string">&#x27;asset_info&#x27;</span>, function (Blueprint <span class="variable">$table</span>) &#123;</span><br><span class="line">        <span class="variable">$table</span>-&gt;<span class="title function_ invoke__">softDeletes</span>();</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">down</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="title class_">Schema</span>::<span class="title function_ invoke__">table</span>(<span class="string">&#x27;asset_info&#x27;</span>, function (Blueprint <span class="variable">$table</span>) &#123;</span><br><span class="line">        <span class="variable">$table</span>-&gt;<span class="title function_ invoke__">dropSoftDeletes</span>();</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><ul><li>在 model 文件中，引入 SoftDeletes</li></ul><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">namespace</span> <span class="title class_">App</span>\<span class="title class_">Models</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">use</span> <span class="title">Illuminate</span>\<span class="title">Database</span>\<span class="title">Eloquent</span>\<span class="title">Factories</span>\<span class="title">HasFactory</span>;</span><br><span class="line"><span class="keyword">use</span> <span class="title">Illuminate</span>\<span class="title">Database</span>\<span class="title">Eloquent</span>\<span class="title">Model</span>;</span><br><span class="line"><span class="keyword">use</span> <span class="title">Illuminate</span>\<span class="title">Database</span>\<span class="title">Eloquent</span>\<span class="title">SoftDeletes</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">AssetInfo</span> <span class="keyword">extends</span> <span class="title">Model</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">use</span> <span class="title">HasFactory</span>;</span><br><span class="line">    <span class="keyword">use</span> <span class="title">SoftDeletes</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 与模型关联的表名</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@var</span> string</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="variable">$table</span> = <span class="string">&#x27;asset_info&#x27;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="软件版本：laravel-8-54"><a href="#软件版本：laravel-8-54" class="headerlink" title="软件版本：laravel 8.54"></a>软件版本：laravel 8.54</h2><h2 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h2><ul><li><a href="https://learnku.com/docs/laravel/8.x/eloquent/9406#soft-deleting">Laravel 8 中文文档 软删除</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> 技术坑记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> laravel </tag>
            
            <tag> php </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>windwos下powershell设置代理</title>
      <link href="/2021/08/26/windwos%E4%B8%8Bpowershell%E8%AE%BE%E7%BD%AE%E4%BB%A3%E7%90%86/"/>
      <url>/2021/08/26/windwos%E4%B8%8Bpowershell%E8%AE%BE%E7%BD%AE%E4%BB%A3%E7%90%86/</url>
      
        <content type="html"><![CDATA[<h1 id="powershell"><a href="#powershell" class="headerlink" title="powershell"></a>powershell</h1><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">当前 shell 的代理</span></span><br><span class="line"><span class="meta prompt_">$</span><span class="language-bash"><span class="built_in">env</span>:HTTP_PROXY=<span class="string">&quot;http://127.0.0.1:7890&quot;</span></span></span><br></pre></td></tr></table></figure><h1 id="cmd"><a href="#cmd" class="headerlink" title="cmd"></a>cmd</h1><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">set http_proxy=http://127.0.0.1:1080</span><br></pre></td></tr></table></figure><h1 id="其他补充"><a href="#其他补充" class="headerlink" title="其他补充"></a>其他补充</h1><p>在 macOS 或 Linux 下</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">export https_proxy=http://127.0.0.1:7890 http_proxy=http://127.0.0.1:7890 all_proxy=socks5://127.0.0.1:7890</span><br></pre></td></tr></table></figure><h1 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h1><ul><li><a href="https://www.cnblogs.com/xch-jiang/p/14324636.html">powershell 设置代理</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> 技术坑记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> windows </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>打上花火 歌词 DAOKO×米津玄师</title>
      <link href="/2021/08/18/%E6%AD%8C%E8%AF%8D%E6%89%93%E4%B8%8A%E8%8A%B1%E7%81%AB/"/>
      <url>/2021/08/18/%E6%AD%8C%E8%AF%8D%E6%89%93%E4%B8%8A%E8%8A%B1%E7%81%AB/</url>
      
        <content type="html"><![CDATA[<h1>打上花火 歌词</h1><p>作词：米津玄师  </p><p>作曲：米津玄师  </p><div class="lyricBody">  <div class="large">    <div class="hiragana">      あの<span class="ruby"><span class="rb">日見渡</span><span class="rt">ひみわた</span></span>した<span class="ruby"><span class="rb">渚</span><span class="rt">なぎさ</span></span>を<span class="ruby"><span class="rb">今</span><span class="rt">いま</span></span>も<span class="ruby"><span class="rb">思</span><span class="rt">おも</span></span>い<span class="ruby"><span class="rb">出</span><span class="rt">だ</span></span>すんだ<br><span class="ruby"><span class="rb">砂</span><span class="rt">すな</span></span>の<span class="ruby"><span class="rb">上</span><span class="rt">うえ</span></span>に<span class="ruby"><span class="rb">刻</span><span class="rt">きざ</span></span>んだ<span class="ruby"><span class="rb">言葉君</span><span class="rt">ことばきみ</span></span>の<span class="ruby"><span class="rb">後</span><span class="rt">うし</span></span>ろ<span class="ruby"><span class="rb">姿</span><span class="rt">すがた</span></span><br><br><span class="ruby"><span class="rb">寄</span><span class="rt">よ</span></span>り<span class="ruby"><span class="rb">返</span><span class="rt">かえ</span></span>す<span class="ruby"><span class="rb">波</span><span class="rt">なみ</span></span>が<span class="ruby"><span class="rb">足元</span><span class="rt">あしもと</span></span>をよぎり<span class="ruby"><span class="rb">何</span><span class="rt">なに</span></span>かを<span class="ruby"><span class="rb">攫</span><span class="rt">さら</span></span>う<br><span class="ruby"><span class="rb">夕凪</span><span class="rt">ゆうなぎ</span></span>の<span class="ruby"><span class="rb">中日暮</span><span class="rt">なかひぐ</span></span>れだけが<span class="ruby"><span class="rb">通</span><span class="rt">とお</span></span>り<span class="ruby"><span class="rb">過</span><span class="rt">す</span></span>ぎて<span class="ruby"><span class="rb">行</span><span class="rt">ゆ</span></span>く<br><br>パッと<span class="ruby"><span class="rb">光</span><span class="rt">ひか</span></span>って<span class="ruby"><span class="rb">咲</span><span class="rt">さ</span></span>いた<span class="ruby"><span class="rb">花火</span><span class="rt">はなび</span></span>を<span class="ruby"><span class="rb">見</span><span class="rt">み</span></span>ていた<br>きっとまだ<span class="ruby"><span class="rb">終</span><span class="rt">お</span></span>わらない<span class="ruby"><span class="rb">夏</span><span class="rt">なつ</span></span>が<br><span class="ruby"><span class="rb">曖昧</span><span class="rt">あいまい</span></span>な<span class="ruby"><span class="rb">心</span><span class="rt">こころ</span></span>を<span class="ruby"><span class="rb">解</span><span class="rt">と</span></span>かして<span class="ruby"><span class="rb">繋</span><span class="rt">つな</span></span>いだ<br>この<span class="ruby"><span class="rb">夜</span><span class="rt">よる</span></span>が<span class="ruby"><span class="rb">続</span><span class="rt">つづ</span></span>いて<span class="ruby"><span class="rb">欲</span><span class="rt">ほ</span></span>しかった<br><br>「あと<span class="ruby"><span class="rb">何度君</span><span class="rt">なんどきみ</span></span>と<span class="ruby"><span class="rb">同</span><span class="rt">おな</span></span>じ<span class="ruby"><span class="rb">花火</span><span class="rt">はなび</span></span>を<span class="ruby"><span class="rb">見</span><span class="rt">み</span></span>られるかな」って<br><span class="ruby"><span class="rb">笑</span><span class="rt">わら</span></span>う<span class="ruby"><span class="rb">顔</span><span class="rt">かお</span></span>に<span class="ruby"><span class="rb">何</span><span class="rt">なに</span></span>ができるだろうか<br><span class="ruby"><span class="rb">傷</span><span class="rt">きず</span></span>つくこと<span class="ruby"><span class="rb">喜</span><span class="rt">よろこ</span></span>ぶこと<span class="ruby"><span class="rb">繰</span><span class="rt">く</span></span>り<span class="ruby"><span class="rb">返</span><span class="rt">かえ</span></span>す<span class="ruby"><span class="rb">波</span><span class="rt">なみ</span></span>と<span class="ruby"><span class="rb">情動</span><span class="rt">じょうどう</span></span><br><span class="ruby"><span class="rb">焦燥最終列車</span><span class="rt">しょうそうさいしゅうれっしゃ</span></span>の<span class="ruby"><span class="rb">音</span><span class="rt">おと</span></span><br><br><span class="ruby"><span class="rb">何度</span><span class="rt">なんど</span></span>でも<span class="ruby"><span class="rb">言葉</span><span class="rt">ことば</span></span>にして<span class="ruby"><span class="rb">君</span><span class="rt">きみ</span></span>を<span class="ruby"><span class="rb">呼</span><span class="rt">よ</span></span>ぶよ<br><span class="ruby"><span class="rb">波間</span><span class="rt">なみま</span></span>を<span class="ruby"><span class="rb">選</span><span class="rt">えら</span></span>びもう<span class="ruby"><span class="rb">一度</span><span class="rt">いちど</span></span><br>もう<span class="ruby"><span class="rb">二度</span><span class="rt">にど</span></span>と<span class="ruby"><span class="rb">悲</span><span class="rt">かな</span></span>しまずに<span class="ruby"><span class="rb">済</span><span class="rt">す</span></span>むように<br><br>はっと<span class="ruby"><span class="rb">息</span><span class="rt">いき</span></span>を<span class="ruby"><span class="rb">飲</span><span class="rt">の</span></span>めば<span class="ruby"><span class="rb">消</span><span class="rt">き</span></span>えちゃいそうな<span class="ruby"><span class="rb">光</span><span class="rt">ひかり</span></span>が<br>きっとまだ<span class="ruby"><span class="rb">胸</span><span class="rt">むね</span></span>に<span class="ruby"><span class="rb">住</span><span class="rt">す</span></span>んでいた<br><span class="ruby"><span class="rb">手</span><span class="rt">て</span></span>を<span class="ruby"><span class="rb">伸</span><span class="rt">の</span></span>ばせば<span class="ruby"><span class="rb">触</span><span class="rt">ふ</span></span>れたあったかい<span class="ruby"><span class="rb">未来</span><span class="rt">みらい</span></span>は<br>ひそかに<span class="ruby"><span class="rb">二人</span><span class="rt">ふたり</span></span>を<span class="ruby"><span class="rb">見</span><span class="rt">み</span></span>ていた<br><br>パッと<span class="ruby"><span class="rb">花火</span><span class="rt">はなび</span></span>が（パッと<span class="ruby"><span class="rb">花火</span><span class="rt">はなび</span></span>が）<br><span class="ruby"><span class="rb">夜</span><span class="rt">よる</span></span>に<span class="ruby"><span class="rb">咲</span><span class="rt">さ</span></span>いた（<span class="ruby"><span class="rb">夜</span><span class="rt">よる</span></span>に<span class="ruby"><span class="rb">咲</span><span class="rt">さ</span></span>いた)<br><span class="ruby"><span class="rb">夜</span><span class="rt">よる</span></span>に<span class="ruby"><span class="rb">咲</span><span class="rt">さ</span></span>いて（<span class="ruby"><span class="rb">夜</span><span class="rt">よる</span></span>に<span class="ruby"><span class="rb">咲</span><span class="rt">さ</span></span>いて）<br><span class="ruby"><span class="rb">静</span><span class="rt">しず</span></span>かに<span class="ruby"><span class="rb">消</span><span class="rt">き</span></span>えた（<span class="ruby"><span class="rb">静</span><span class="rt">しず</span></span>かに<span class="ruby"><span class="rb">消</span><span class="rt">き</span></span>えた）<br><span class="ruby"><span class="rb">離</span><span class="rt">はな</span></span>さないで（<span class="ruby"><span class="rb">離</span><span class="rt">はな</span></span>れないで）<br>もう<span class="ruby"><span class="rb">少</span><span class="rt">すこ</span></span>しだけ（もう<span class="ruby"><span class="rb">少</span><span class="rt">すこ</span></span>しだけ）<br>もう<span class="ruby"><span class="rb">少</span><span class="rt">すこ</span></span>しだけ<br>このままで<br><br>あの<span class="ruby"><span class="rb">日見渡</span><span class="rt">ひみわた</span></span>した<span class="ruby"><span class="rb">渚</span><span class="rt">なぎさ</span></span>を<span class="ruby"><span class="rb">今</span><span class="rt">いま</span></span>も<span class="ruby"><span class="rb">思</span><span class="rt">おも</span></span>い<span class="ruby"><span class="rb">出</span><span class="rt">だ</span></span>すんだ<br><span class="ruby"><span class="rb">砂</span><span class="rt">すな</span></span>の<span class="ruby"><span class="rb">上</span><span class="rt">うえ</span></span>に<span class="ruby"><span class="rb">刻</span><span class="rt">きざ</span></span>んだ<span class="ruby"><span class="rb">言葉君</span><span class="rt">ことばきみ</span></span>の<span class="ruby"><span class="rb">後</span><span class="rt">うし</span></span>ろ<span class="ruby"><span class="rb">姿</span><span class="rt">すがた</span></span><br><br>パッと<span class="ruby"><span class="rb">光</span><span class="rt">ひか</span></span>って<span class="ruby"><span class="rb">咲</span><span class="rt">さ</span></span>いた<span class="ruby"><span class="rb">花火</span><span class="rt">はなび</span></span>を<span class="ruby"><span class="rb">見</span><span class="rt">み</span></span>ていた<br>きっとまだ<span class="ruby"><span class="rb">終</span><span class="rt">お</span></span>わらない<span class="ruby"><span class="rb">夏</span><span class="rt">なつ</span></span>が<br><span class="ruby"><span class="rb">曖昧</span><span class="rt">あいまい</span></span>な<span class="ruby"><span class="rb">心</span><span class="rt">こころ</span></span>を<span class="ruby"><span class="rb">解</span><span class="rt">と</span></span>かして<span class="ruby"><span class="rb">繋</span><span class="rt">つな</span></span>いだ<br>この<span class="ruby"><span class="rb">夜</span><span class="rt">よる</span></span>が<span class="ruby"><span class="rb">続</span><span class="rt">つづ</span></span>いて<span class="ruby"><span class="rb">欲</span><span class="rt">ほ</span></span>しかった<br><br>    </div>  </div></div><hr /><h1>原文地址</h1><a href="https://utaten.com/lyric/ha17071802/" target="_blank" >打上花火 歌詞「DAOKO × 米津玄師」ふりがな付</a><style>.lyricBody {    background: #fff;    padding: 10px;    user-select: none;    letter-spacing: 1px;    line-height: 2.3;}.lyricBody div.large {    font-size: 21px;}.lyricBody div.large span.ruby {    line-height: 2.6;}.lyricBody div span.ruby {    margin-bottom: 0.55em;    display: inline-table;    position: relative;    vertical-align: bottom;}.lyricBody span.ruby span.rb {    display: table-row;    position: relative;    line-height: 1.2;}.lyricBody div.large span.ruby span.rt {    font-size: 14px;}.lyricBody span.ruby span.rt {    display: table-header-group;    line-height: 1.8;    color: #999;    white-space: nowrap;    text-align: center;    letter-spacing: -0.001em;    before: '(';    after: ')';}</style>]]></content>
      
      
      <categories>
          
          <category> 日语之路 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 日语 </tag>
            
            <tag> 歌曲 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>NHK《简明日语》第06课 電話番号（でんわばんごう）は何番（なんばん）ですか。</title>
      <link href="/2021/08/17/NHK%E3%80%8A%E7%AE%80%E6%98%8E%E6%97%A5%E8%AF%AD%E3%80%8B%E7%AC%AC06%E8%AF%BE/"/>
      <url>/2021/08/17/NHK%E3%80%8A%E7%AE%80%E6%98%8E%E6%97%A5%E8%AF%AD%E3%80%8B%E7%AC%AC06%E8%AF%BE/</url>
      
        <content type="html"><![CDATA[<h1 id="NHK《简明日语》第06课"><a href="#NHK《简明日语》第06课" class="headerlink" title="NHK《简明日语》第06课"></a>NHK《简明日语》第06课</h1><h2 id="课程简介"><a href="#课程简介" class="headerlink" title="课程简介"></a>课程简介</h2><p>安娜和小樱正在安娜的房间里聊天。小樱向安娜询问电话号码。</p><h2 id="教材详情"><a href="#教材详情" class="headerlink" title="教材详情"></a>教材详情</h2><h3 id="電話番号（でんわばんごう）は何番（なんばん）ですか。"><a href="#電話番号（でんわばんごう）は何番（なんばん）ですか。" class="headerlink" title="電話番号（でんわばんごう）は何番（なんばん）ですか。"></a>電話番号（でんわばんごう）は何番（なんばん）ですか。</h3><ul><li>さくら: ところでアンナさん。 &#x2F;&#x2F; 对了，安娜。<br>電話番号は何番ですか。 &#x2F;&#x2F; 你的电话号码是多少？  </li><li>アンナ: ええと。０８０－１２３４－・・・。 &#x2F;&#x2F; 嗯……　080 – 1234 – ……  </li><li>さくら: ありがとう。 &#x2F;&#x2F; 谢谢。<br>じゃ、今度、電話をしますね。 &#x2F;&#x2F; 那下次我给你打电话。</li></ul><h3 id="语法要点"><a href="#语法要点" class="headerlink" title="语法要点"></a>语法要点</h3><p>勉強をします<br>料理をします  </p><blockquote><p>「します」是表示做某事的动词。<br>和名词搭配使用，可以表示各种各样的动作。<br>例如：<br>勉強（べんきょう、学习）＋をします⇒ 勉強をします（学习）<br>料理（りょうり、料理）＋をします⇒ 料理をします（做饭）  </p></blockquote><p><strong>「は」在什么场合下读作「WA」？</strong>  </p><p>从前，表示主题的助词「は」读作「HA」，写作「は」，但后来读音渐渐地变成了「WA」，而书写方法没有改变，依旧写作「は」。</p><h3 id="单词"><a href="#单词" class="headerlink" title="单词"></a>单词</h3><table><thead><tr><th>ところで</th></tr></thead><tbody><tr><td><strong>对了</strong></td></tr></tbody></table><table><thead><tr><th>電話番号</th></tr></thead><tbody><tr><td><strong>电话号码</strong></td></tr></tbody></table><table><thead><tr><th>何番</th></tr></thead><tbody><tr><td><strong>几号</strong></td></tr><tr><td>在疑问代词「何（なん）」（几、多少）后面，加上表示号码的量词「番（ばん）」（号），「何番（なんばん）」，可以用来询问号码。</td></tr></tbody></table><table><thead><tr><th>ええと</th></tr></thead><tbody><tr><td><strong>嗯・・・・・・</strong></td></tr></tbody></table><table><thead><tr><th>じゃ</th><th>それでは</th></tr></thead><tbody><tr><td><strong>那</strong></td><td><strong>那么</strong></td></tr><tr><td>是接续词，是一种比较随意的说法。</td><td>接续词「じゃ」，如果用郑重语气表达的话，可以说「それでは」或者「では」。</td></tr></tbody></table><table><thead><tr><th>今度</th></tr></thead><tbody><tr><td><strong>下次</strong></td></tr></tbody></table><table><thead><tr><th>します</th></tr></thead><tbody><tr><td><strong>做</strong></td></tr></tbody></table><table><thead><tr><th>電話をします</th></tr></thead><tbody><tr><td><strong>打电话</strong></td></tr><tr><td>「電話（でんわ）」是“电话”，助词「を」表示动作对象。「します」是表示做某事的动词。マス形的动词不但可以表示现在发生的事情，也可以表示将来发生的事情。</td></tr></tbody></table><table><thead><tr><th>勉強</th></tr></thead><tbody><tr><td><strong>学习</strong></td></tr><tr><td>可以和「をします」组合在一起，变成「勉強（べんきょう）をします」（学习）。</td></tr></tbody></table><table><thead><tr><th>料理</th></tr></thead><tbody><tr><td><strong>料理</strong></td></tr><tr><td>可以和「をします」组合在一起，变成「料理（りょうり）をします」（做饭）。</td></tr></tbody></table><p>教材：<a href="https://www.nhk.or.jp/lesson/update/pdf/le6_zh_t.pdf">https://www.nhk.or.jp/lesson/update/pdf/le6_zh_t.pdf</a></p><h2 id="我的收获"><a href="#我的收获" class="headerlink" title="我的收获"></a>我的收获</h2><ul><li>使用日语来数数。</li></ul><table><thead><tr><th align="left">0</th><th>れい、ぜろ</th></tr></thead><tbody><tr><td align="left">1</td><td>いち</td></tr><tr><td align="left">2</td><td>に</td></tr><tr><td align="left">3</td><td>さん</td></tr><tr><td align="left">4</td><td>よん、し</td></tr><tr><td align="left">5</td><td>ご</td></tr><tr><td align="left">6</td><td>ろく</td></tr><tr><td align="left">7</td><td>なな、しち</td></tr><tr><td align="left">8</td><td>はち</td></tr><tr><td align="left">9</td><td>きゅう、く</td></tr><tr><td align="left">10</td><td>じゅう</td></tr></tbody></table><h2 id="课程地址"><a href="#课程地址" class="headerlink" title="课程地址"></a>课程地址</h2><p><a href="https://www.nhk.or.jp/lesson/chinese/learn/list/6.html">https://www.nhk.or.jp/lesson/chinese/learn/list/6.html</a></p>]]></content>
      
      
      <categories>
          
          <category> 日语之路 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 日语 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>gedit编辑器使用技巧</title>
      <link href="/2021/08/11/gedit%E7%BC%96%E8%BE%91%E5%99%A8%E4%BD%BF%E7%94%A8%E6%8A%80%E5%B7%A7/"/>
      <url>/2021/08/11/gedit%E7%BC%96%E8%BE%91%E5%99%A8%E4%BD%BF%E7%94%A8%E6%8A%80%E5%B7%A7/</url>
      
        <content type="html"><![CDATA[<h1 id="Gedit介绍"><a href="#Gedit介绍" class="headerlink" title="Gedit介绍"></a>Gedit介绍</h1><p>gedit是一个GNOME桌面环境下兼容UTF-8的文本编辑器。它简单易用，有良好的语法高亮，对中文支持很好，支持包括GB2312、GBK在内的多种字符编码。gedit是一款自由软件。  </p><h1 id="软件安装"><a href="#软件安装" class="headerlink" title="软件安装"></a>软件安装</h1><p>官网上提供了Linux、macOS、Windows的安装方法，许多 Linux 发行版默认安装 gedit，这也是我接触到它的原因。  </p><blockquote><p>gedit is installed by default with many Linux distributions, otherwise you can install the gedit and gedit-plugins packages.</p></blockquote><h1 id="使用技巧"><a href="#使用技巧" class="headerlink" title="使用技巧"></a>使用技巧</h1><ol><li>关闭标签 ctrl+W</li><li>保存所有标签 ctrl+shift+L</li><li>重新打开关闭 ctrl+shift+T</li><li>跳转 alt+1,2,3</li><li>转大小写 ctrl+U，ctrl+L</li><li>隐藏显示侧边栏 F9</li><li>查找下一个上一个 ctrl+G，ctrl+shift+G</li><li>跳转到行 ctrl+I</li><li>md语法无序列表 ul+tab</li><li>有序列表 ol+tab</li><li>hr分割线 hr+tab</li><li>标签组 ctrl+alt+n</li></ol><p>更多快捷键可以参考 <a href="https://help.gnome.org/users/gedit/stable/gedit-shortcut-keys.html.zh_CN">gedit Text Editor Shortcut keys</a></p><h2 id="Linux下gedit的sudo运行报错"><a href="#Linux下gedit的sudo运行报错" class="headerlink" title="Linux下gedit的sudo运行报错"></a>Linux下gedit的sudo运行报错</h2><p>执行<code>rm ~/.local/share/zeitgeist -R</code></p><h1 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h1><ul><li><a href="https://zh.wikipedia.org/wiki/Gedit">gedit-维基百科</a></li><li><a href="https://help.gnome.org/users/gedit/stable/gedit-shortcut-keys.html.zh_CN">gedit Text Editor Shortcut keys</a></li><li><a href="https://wiki.gnome.org/Apps/Gedit">gedit官网</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> 技术坑记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> 编辑器 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>减肥课程笔记 来自《冯雪科学减肥 16 讲》</title>
      <link href="/2021/08/02/%E5%87%8F%E8%82%A5%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0/"/>
      <url>/2021/08/02/%E5%87%8F%E8%82%A5%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0/</url>
      
        <content type="html"><![CDATA[<h1 id="减肥笔记-冯雪科学减肥-16-讲"><a href="#减肥笔记-冯雪科学减肥-16-讲" class="headerlink" title="减肥笔记 | 冯雪科学减肥 16 讲"></a>减肥笔记 | 冯雪科学减肥 16 讲</h1><p>昨天听了冯雪的科学减肥课，觉得很有用。收集互联网上关于该课程的笔记，整理并发出来方便自己查看。</p><h2 id="发刊词：一次就能成功的完整方案"><a href="#发刊词：一次就能成功的完整方案" class="headerlink" title="发刊词：一次就能成功的完整方案"></a>发刊词：一次就能成功的完整方案</h2><p>冯雪，国家心血管病中心阜外医院心脏康复中心创始人和负责人。  </p><p>根据数据统计，一个人减肥的成功概率是0.5%，即200个人减肥，只有1个人能够成功。调查显示，这些人中或是节食或运动，或者兼顾，占到三分之二，但仍旧失败。所以减肥并不是一分耕耘一分收获。</p><ul><li><p>关于减肥的三个重要认知：</p><ul><li><p>为什么要减肥？</p><blockquote><p>2013年，世界卫生组织将肥胖定义成疾病。肥胖形成后的每一分钟，都会破坏我们的心脑血管、肝脏、肾脏、胃肠道、免疫系统，最终导致心梗、中风、糖尿病、抑郁症、性功能障碍甚至肿瘤。</p></blockquote><blockquote><p>减肥的目的是为了健康，但绝不是仅仅为了健康。除了健康，更是为了美、为了魅力、为了社会竞争力。</p></blockquote></li><li><p>什么时候能够停止减肥呢？或者说，什么时候能够宣布减肥成功呢？</p><blockquote><p>减肥的本质是为了换一种人生。减肥成功的标志，是你换上了一种健康的生活方式。</p></blockquote><blockquote><p>减肥和贫穷一样，你就是你自己的囚徒。</p></blockquote></li><li><p>得到了科学的减肥方法，就能减肥成功吗？</p><blockquote><p>任何一种减肥产品，只要符合科学的减肥原理，都是靠谱的 —— 但也只是提供了减肥的第一阶段指导，告诉你正确的做法，可以少走弯路。</p></blockquote><blockquote><p>永葆减肥大业的关键，必须要有同行者。短期的减肥旅程和之后长期的生活方式，需要有人跟你一路同行才能走得更远。</p></blockquote></li></ul></li><li><p>总结:</p><ul><li>减肥的动机，是为了健康，更是为了提高你的魅力、社会竞争力。  </li><li>减肥的实质，是改变生活方式，换一种新的人生。  </li><li>只有跟志同道合的人一起走，才能走得更远，最终减肥成功。</li></ul></li></ul><hr><h1 id="第01课-终点：三个目标一个都不能少"><a href="#第01课-终点：三个目标一个都不能少" class="headerlink" title="第01课 终点：三个目标一个都不能少"></a>第01课 终点：三个目标一个都不能少</h1><p><strong>为什么我们会减肥失败？</strong>  </p><ul><li>大部分人减肥失败，不是因为不够努力，而是目标设置的不对。想打赢减肥这场仗，不仅仅是减轻体重这么简单。</li><li>单纯减重，这个目标的维度太单一了。任何单一维度的目标，都蕴含了走向它反面的异化倾向。当一个人太过于关注一件事，他的动作就容易变形，最终滑向这个事情的反面。</li><li>如果仅仅为了减轻体重，很容易导致两种不幸的结局：<ul><li>一是，体重反弹，减肥失败。因为一旦体重下降，目标就丧失了，之前的行为也就无法持久。</li><li>二是，减了体重却丢了健康。身体不适、脱发、无力、胃不舒服、隔三差五腹泻或便秘。</li></ul></li></ul><p><strong>科学减肥的 “三体目标”</strong>  </p><p>科学减肥的 “三体目标” 包括体重、体脂和体型三个维度。  </p><p><strong>1、体重</strong>  </p><p>人们职业不同、生活模式不同、个人偏好不同，体重自然有高有低，但只要在合理范围内，不影响健康，就属于正常。<br>健康体重的范围，用体重指数（BMI）来表示。  </p><p>BMI计算：体重÷身高÷身高  </p><p>亚洲人，男性BMI在18.5-24之间，女性在18.5-23之间  </p><p><strong>2、体脂（体脂率）</strong>  </p><p>男性体脂率在15%-18%之间，女性的体脂率在20%-25%之间<br>体脂率太低，会影响身体的基本功能，比如女性月经不调等；太高，会导致高血脂、高血压、高血糖等各种疾病。  </p><p>如果一个女生可以看到 “马甲线”，体脂率大概是20%左右，属于正常范围；维密模特体脂率大概只有14%-17%；如果一个人肚子上的肉很松弛，完全看不出腹肌，体脂率大概是28%-30%。  </p><p><strong>3、体型</strong>  </p><p>医学上衡量体型是否健康的指标有两个，分别是腰围和腰臀比。  </p><p>腰臀比是腰围和臀围的比值。  </p><p>人们常说的梨形身材、苹果型身材、将军肚、啤酒肚等，看得就是腰围和臀围两个指标。  </p><p>正常来说，中国男性腰围应该小于85cm，腰臀比小于0.9；女性腰围应该小于80cm，腰臀比小于0.8。  </p><p><strong>为健康而生活，捎带瘦身。</strong>  </p><hr><h1 id="第02课-守恒：科学减肥的第一性原理"><a href="#第02课-守恒：科学减肥的第一性原理" class="headerlink" title="第02课 守恒：科学减肥的第一性原理"></a>第02课 守恒：科学减肥的第一性原理</h1><p>各种减肥方法，“脂肪加速燃烧”“能量屏蔽”“物质不吸收”等等，有的披着科学的外衣，有的顶着实效的战绩，有的出自某某国际科研机构，所有方法都自诩健康、有效，怎么判断？  </p><p>能量守恒，是科学减肥的第一原理。所有科学减肥的方法，都在这个理论上构建出来。  </p><p><strong>减肥就是要打造能量缺口</strong>  </p><ul><li>我们的人体，就是一个能量守恒系统。</li><li>人体获得能量的渠道，来自食物的碳水化合物、蛋白质和脂肪，医学上统称为 “宏量营养素”。这些食物一吃进肚子，就会被识别为能量，在以一定比例被吸收后，通过分解转化供给身体利用。</li><li>人体消耗的五个渠道，包括日常代谢、运动消耗等等。</li><li>我们想象一个大水箱，一堆水龙头，一边有水流进来，一边有水流出去，当流入与流出始终维持在一个合理范围，人的体重才能保持稳定。换句话，胖没有其他原因，就是剩余的能量太多了。</li></ul><p><strong>方向一：加大出水量，增加能量消耗</strong>  </p><p><strong>1 基础代谢</strong>  </p><p>也就是即便你一动不动，身体也会为了维持正常运转而消耗的能量。  </p><p>由于每个人的年龄、性别、身高、体温、基因、体重和体脂率不同，基础代谢也会不同。而这里，前五个都是定量，只有体重和体脂率可控。</p><p>体重和基础代谢正相关。  </p><p>健身房教练会告诉你 “练肌肉能降低体脂率，提高基础代谢率。”实际上，人体每增加一公斤肌肉，不过多消耗13卡热量，也就是半块饼干或几口奶茶，但是需要至少狂练两三个月。  </p><p><strong>2 人体消化吸收食物所消耗的热量</strong>  </p><ul><li>这个消耗和进食量有关，吃得越多，消耗越大。</li></ul><p><strong>3 人体为维持体温而消耗的能量。</strong>  </p><p><strong>4 睡眠减少能增加能量消耗。</strong><br>但同时，熬夜会让人交感神经过度激活，增加一系列和食欲相关的激素分泌。且增加进食的原因，熬夜可排在第三位。<br>人体脂肪分解的活动，需要在胰岛素浓度最低的时候进行，也就是晚上。换句话，熬夜不睡，你的身体脂肪无法分解。<br><strong>5  运动和日常体力活动。</strong>  </p><p><strong>方向二：减少入水量，减少能量摄入</strong>  </p><p><strong>1 碳水化合物</strong>  </p><p>包含在我们所吃的主食、五谷杂粮，以及它们做成的零食中，是日常最主要的能量来源，也是大脑唯一的供能来源。  </p><p>碳水里还包含不被人体吸收的纤维素，我们吃的水果、蔬菜里都有。纤维素不转化成任何能量，还能减少人体对糖类、脂肪的吸收。  </p><p>大部分碳水被人体吸收，转化率高达70%。  </p><p>所以想要减肥：第一，适当少吃一些主食；第二，多吃蔬菜，补充不可吸收的碳水化合物（纤维素）  </p><p><strong>2 脂肪</strong>  </p><p>人体第二大能量来源，每克脂肪携带9大卡的能量，是每克糖或蛋白质的2倍多，且吸收转化率可达到96%。</p><p>脂肪非常难消耗，只有体内的糖分被消耗完，人体才会动用脂肪。  </p><p>脂肪代谢的特点是 “快进慢出”，最适合能量堆积。  </p><p><strong>3 蛋白质</strong>  </p><p>每克蛋白质能提供4大卡能量，和碳水一样。  </p><p>蛋白质是维持细胞组织生长和修复的最重要物质。长肌肉、燃烧脂肪都需要蛋白质参与。  </p><p>在减肥期间，蛋白质不但不能减少摄入，还要多补充，每公斤体重需要补充1-1.5g蛋白质。  </p><p>综上：减肥期间需要少吃一些碳水，严格把控脂肪摄入，适当补充蛋白质。  </p><hr><h1 id="第03课-铁证：减肥成功只有一条正路"><a href="#第03课-铁证：减肥成功只有一条正路" class="headerlink" title="第03课 铁证：减肥成功只有一条正路"></a>第03课 铁证：减肥成功只有一条正路</h1><p>市面上的减肥的方法很多，看起来是条条大路通罗马，但实际是这样吗？  </p><blockquote><p>健身教练会告诉你，运动很重要，然后朝着练出马甲线给你安排；中医特色减肥说，针灸、拔罐、按摩经络能让你瘦；正在减肥的闺蜜可能会告诉你，她在朋友圈看到几个极简食谱；网上也会报道xx明星十年如一日辛苦节食……</p></blockquote><p><strong>最有效的减肥方法是什么？</strong>   </p><p>在所有减肥方法中，全球科学家公认的首选方法是生活方式干预。  </p><p>一个人肥胖的原因很复杂，由多个基因位点、社会环境和心理因素共同影响。但几乎所有这些因素，都必须通过不健康的生活方式起作用。  </p><p>我们需要调整的，不是某一方面，而是从饮食、运动、压力和睡眠等方面同时发力。科学的减肥方法只能是健康生活方式的养成。  </p><p>即便药物治疗、减肥手术、代餐等，也必须配合生活方式的管理才能起效。  </p><p><strong>健康生活方式的养成</strong>  </p><p>主要包括三个方面：饮食、运动和心理因素管理。心理因素管理主要是管理压力和睡眠。  </p><p>如果把生活方式比喻成一个三角形，饮食、锻炼和心理因素，就是构成三角形的三条边，缺一不可。  </p><p><strong>生活方式管理的两个误区</strong>    </p><ul><li>生活方式调整起效慢、性价比低。</li></ul><p>健康生活方式养成不是一朝一夕，但全面健康的生活方式性价比最高。  </p><p>减肥是个系统工程。实验表明，一个人无法应对工作压力，可能要付出旁人4-5倍的运动时间和运动强度。  </p><ul><li>健康的生活方式太难了，做不到。</li></ul><p>健康的生活方式并不是天天吃草，坚持运动，早睡早起。<br>健康的睡眠只对节律和时长有要求。即睡得规律，睡眠质量正常，每天6-8小时即可。夜猫子总熬夜，把夜熬规律了也可以。  </p><p>节制垃圾食品，在一段时间后，味觉神经和肠道菌群都会发生改变。要不了多久，再吃到不健康食物，身体反而会不适应、不舒服。  </p><p><strong>建立属于你自己的健康生活方式</strong>  </p><p>健康的生活方式，是在满足你个人社会化属性的前提下，让你生活的更健康的各种行为的总和。  </p><p>健康。做到了健康，减肥只是捎带着的副产品。  </p><p>《瓦尔登湖》“当你实现你的梦想的时候，关键并不是你得到了什么，而是在追求的过程中，你变成了什么样的人。”​  </p><p>符合一个人的社会化属性。满足他的家庭、工作和社交的需要。</p><hr><h1 id="第04课-能量缺口：减肥是吃越少越好吗？"><a href="#第04课-能量缺口：减肥是吃越少越好吗？" class="headerlink" title="第04课 能量缺口：减肥是吃越少越好吗？"></a>第04课 能量缺口：减肥是吃越少越好吗？</h1><p><strong>调整饮食，打造能量缺口</strong>  </p><p>调整饮食并不是单纯的节食、少吃、管住嘴。  </p><p>在一些减肥的书或者文章里，会看到一个粗暴的规定：要求所有减肥的人，女生每天只能摄入能量1200-1500大卡，男生是1500-1800大卡。这样的规定虽然确是有用，但缺点也非常明显。</p><blockquote><ul><li>难以计量</li><li>一刀切，缺少人性化</li></ul></blockquote><p><strong>能量缺口多少比较合适？</strong>    </p><p>医学的结论，500-750大卡是比较合理的能量缺口。超过750大卡，可能导致一系列的营养缺乏；由于吃的太少，身体会启动保护性的代偿反应，体重容易出现报复性反弹。  </p><blockquote><p>BMI越小，就可以让能量缺口越接近500大卡；BMI越大，或者最近体重有所上升，就越需要接近750大卡。如果BMI超过35，能量缺口可以再大一些（在专业医学指导下）。  </p></blockquote><p>最简单的实现方式是少吃。500大卡相当于一包100克薯片的能量。  </p><p><strong>身体不知道你需要多少能量</strong>  </p><p>1、饿只是身体感受，不代表身体需要。  </p><blockquote><p>在长期不健康的生活方式下，身体不知道自己需要多少能量。  </p></blockquote><blockquote><p>一方面，它习惯于吃那么多，每次都把胃撑大；另一方面，它听命于肠道菌群。肠道菌群会给大脑传递信号 “我饿了，快吃东西”。  </p></blockquote><p>2、吃得总能量低，不代表少吃、节食。  </p><blockquote><p>选择能量密度低的食物，比如富含纤维素的水果蔬菜。  </p></blockquote><p><strong>如何判断每天少吃的那些食物就是500大卡？</strong>    </p><ul><li><p>看标签。即食品的配料清单、营养成分表；利用手机APP查询食物对应卡数。  </p></li><li><p>饮食拍照。把自己一天内吃的食物全部记录下来，医学上叫做 “营养日记”。  </p></li><li><p>制定每日餐单。昨晚营养日记，把每天的照片翻出来，从里面减掉500-750大卡热量的食物，作为后面的饮食参考。  </p><blockquote><p>具体操作：先减夜宵，再减含糖饮料，再减零食，如果还不够，最后去正餐，直到满足500-750大卡的缺口。</p></blockquote></li></ul><p>按照500-750大卡的能量缺口，每周体重应该会稳定下降0.5-1kg。  </p><p>每减肥一段时间后，要重复打造能量缺口的三个步骤，解决减肥平台期问题。  </p><hr><h1 id="第05课-饮食选择：如何保证吃对又不饿？"><a href="#第05课-饮食选择：如何保证吃对又不饿？" class="headerlink" title="第05课 饮食选择：如何保证吃对又不饿？"></a>第05课 饮食选择：如何保证吃对又不饿？</h1><p>挑选食物的四个原则:  </p><p><strong>食材加工越少越好。</strong>  </p><ul><li><p>选一些新鲜食材，凉拌、蒸、煮都可以，配上小米辣、酱油或芥末，淋上一些即可。</p></li><li><p>烹饪食材中，火锅比炒菜好，炒菜比油煎好，油煎比油炸好。火锅锅里别选牛油，调料别用麻酱。</p></li><li><p>尽量杜绝零食饮料，哪怕是水果干、话梅、酸奶。</p></li><li><p>成品食物记得看标签，除了食材外，添加越少越好。比如坚果，配料表尽量不要有糖、奶油、盐等。</p></li></ul><p><strong>食物越完整越好</strong>  </p><ul><li><p>指的是蔬菜、水果和谷物。</p></li><li><p>蔬菜水果能不削皮就不削皮，能不榨汁就不榨汁；谷物能粗着就别细着。因为完整的食物里，含有丰富的纤维素。</p></li></ul><p><strong>脂肪要选择天然不饱和的。</strong>  </p><blockquote><p>地球上的植物、海洋动物因为不需要储存脂肪抵御寒冷，所以大自然把不容易存储的不饱和脂肪酸给了它们，把容易固化、存储的饱和脂肪酸给了陆地上的动物。  </p></blockquote><ul><li>减肥期间，吃进去的脂肪，不饱和脂肪酸的占比越高，减肥效果越好。</li><li>除了椰子油、棕榈油，能榨油的植物，如橄榄油、菜籽油、亚麻籽油、葵花籽油、玉米油都可以。油温不宜太高。</li><li>开心果、核桃、碧根果、松子、腰果、扁桃仁，每天一捧（平平的一捧）。</li><li>鱼肉，首选深海鱼，建议每周至少吃2次。</li><li>坚决不要吃反式脂肪酸。(主要存在在蛋糕、面包、饼干、冰淇淋、油炸食物中。)<blockquote><p>三个恶性结果  </p></blockquote><ul><li>黏附在血管上，导致心脑血管疾病发生概率增加50%；</li><li>黏附在内脏脂肪上，增加腹部肥胖；</li><li>无论怎么运动和少吃，依然堆积在体内，不容易代谢出来。</li></ul></li></ul><p><strong>蛋白质越纯越好。</strong>  </p><ul><li>减肥期间多补充蛋白质，每天每公斤体重补充1-1.5克。即如果你是60公斤，每天蛋白质达到90克更好。</li><li>有蛋白质的食物，脂肪也不少。所以水里游的优于天上飞的，优于地上跑的，优于跑也跑不动的。</li><li>十种减肥期可选肉类：鱼、虾、鸽子、兔、鸡胸肉、鸭胸肉、驴肉、牛瘦肉、羊瘦肉、猪后腿肉和大排肉。</li><li>豆制品。</li></ul><p><strong>一日三餐如何搭配</strong>  </p><ul><li>早饭一定要吃。科学发现，不吃早餐意味着体重增加。</li><li>晚饭最迟不可以超过9点。</li></ul><p>每一餐的搭配选择:  </p><ul><li>推荐 “四格餐盘”，按照2-1-1原则搭配。</li><li>餐盘一半放上蔬菜水果。可以堆起来放，大约半斤各种颜色的蔬菜盒4两水果。</li><li>剩下一半空间，1&#x2F;2留个肉肉，摊开放一层，约二两瘦肉，可以加1两豆腐；另外1&#x2F;2留给全谷物主食，约三两左右，糙米、全麦面、土豆、山药、南瓜、玉米都在这里。</li><li>不想吃那么多主食，可以换成瘦肉（碳水和蛋白质能量差不多）；不想吃豆腐和瘦肉，可以换成2两半肥半瘦。</li></ul><hr><h1 id="第06课-效果评价：哪种饮食方案会一统江湖"><a href="#第06课-效果评价：哪种饮食方案会一统江湖" class="headerlink" title="第06课 效果评价：哪种饮食方案会一统江湖"></a>第06课 效果评价：哪种饮食方案会一统江湖</h1><p>特殊饮食方案，如生酮饮食、低脂饮食、地中海饮食是否真的有用？  </p><p><strong>极低能量饮食</strong>  </p><blockquote><p>要求每天摄入的热量小于800大卡，以实现30天瘦20斤的效果。<br>虽然短期内效果惊人，但是非常容易反弹。  </p></blockquote><p><strong>生酮饮食</strong>  </p><blockquote><p>也被称为 “断糖饮食”，或 “极低碳水饮食”。<br>低到只有10%以内的碳水，蛋白质约20%，其余70%多是脂肪。菜单中一日三餐都是大鱼大肉，搭配椰子油、黄油、坚果、鸡蛋、全脂奶酪、全脂奶油。10%以下的碳水，意味着青菜水果几乎都不能吃，主食更是不能碰。<br>生酮饮食在头两周，体重下降特别快，虽然后期会反弹，但是坚持3个月，平均会下降5-6kg。<br>但是由于酮体产生，你会口臭；没有蔬果提供纤维素，你会便秘；因为只能利用酮体，大脑反应会降低；长期不吃主食，会有戒断反应；超过3个月生酮饮食，会引起胆固醇升高。  </p></blockquote><p><strong>低碳水饮食</strong>  </p><blockquote><p>在能量缺口的前提下，食谱里碳水含量比生酮饮食高一些，大概在10-25%。<br>最初6个月，大概能减重10%，平均8kg以上；由于摄入脂肪比较多，也能降低食欲减少饥饿感；没有生酮饮食那么大的副作用。<br>但是如果把周期拉倒1-2年，和生酮饮食一样，低碳水也会增加人体胆固醇的水平，提高冠心病发病几率。  </p></blockquote><p><strong>低脂饮食</strong>  </p><blockquote><p>要求将脂肪降到总量30%以下，即平常说的吃素还不让吃饱。30%的脂肪相当于每天一个鸡蛋、一杯牛奶和二两瘦肉。<br>6个月，平均减重4-5kg，如果坚持一年，能平均减重8kg。</p></blockquote><p><strong>地中海饮食</strong>  </p><blockquote><p>金字塔原则，碳水，包括主食、各种蔬菜、水果在金字塔底部；往上一层是各种豆制品、奶制品；再往上是橄榄油、坚果；往上是鱼、虾、鸡鸭肉，每周少吃2-3次；最上面是甜品、猪肉、牛羊肉，每周可以有1次。<br>这种模式碳水占50%-60%，脂肪是20%-30%，蛋白质是20%，虽然短期没有明显效果，但是长期看来易坚持，不易反弹。<br>事实上，在涉及40万人的8个研究中发现，如果碳水在总能量比例中地域40%或者高于70%，对普通人群来说，死亡风险相对增加20%以上；而50%-55%的中碳水比例，死亡风险是最低的。  </p></blockquote><p>适合自己才是最好的。  </p><p>如果想要快速减肥，但又喜欢吃主食，可以选择几个月的低脂饮食，再调回地中海饮食；同样，想要快速减肥，又爱吃肉的，可以坚持一段时间生酮饮食，再调回正常。  </p><hr><h1 id="第07课-燃脂运动：什么项目减肥效率最高？"><a href="#第07课-燃脂运动：什么项目减肥效率最高？" class="headerlink" title="第07课 燃脂运动：什么项目减肥效率最高？"></a>第07课 燃脂运动：什么项目减肥效率最高？</h1><p><strong>运动真的能减肥吗？</strong>  </p><blockquote><p>单纯运动对体重影响是有限的。不改变其他生活方式，只想通过运动减肥，基本是不可能的。<br>大多数人高估了运动的消耗。打篮球半小时，大约消耗220大卡，不到一杯奶茶的热量；骑车半小时，大约只消耗145大卡，也就是一瓶雪碧。<br>运动后，很多人会控制不住大吃一顿，反而摄入超标。<br>在生活方式干预下，运动减肥效果会更好。<br>坚持每周运动200分钟以上的人，6个月平均能减重13.1kg；坚持每周运动150-200分钟的人，平均减重8.5kg；而不到150分钟的，6个月下来只能减重3.5kg。  </p></blockquote><p><strong>什么样的运动最燃脂？</strong>  </p><p>有氧。  </p><blockquote><p>燃烧脂肪是一个需要氧气参与的过程，氧气参与比例越高，脂肪燃烧越充分。<br>比如：快走、慢跑、游泳、骑车、爬山等有氧部分多一些；撸铁、深蹲、臀桥等力量训练，以及大部分球类，有氧部分比较少。<br><strong>运动强度合适。</strong><br>随着运动强度增加，人体代谢脂肪的效率也会改变。先是跟着提高，但当运动强度增加到某个点之后，无氧代谢的部分会越来越多，脂肪消耗也会打折扣。<br>想要精确了解自己的拐点在哪里，可以去医院做一个心肺运动试验。<br>在身体健康，且年龄小于55岁的情况下，可以参考公式【有氧运动最佳心率 &#x3D; （220 - 年龄 - 静息心率）× | 0.6-0.75 | + 静息心率】，运动时保持在这个区间，也就是我们说的中强度运动，燃脂的效率使最高的。<br><strong>运动一定时长。</strong><br>即便是燃脂效率最高的中等强度有氧运动，在前30分钟，消耗的60%也是肌肉里储存的糖。所以有氧运动至少要30分钟。<br>HIIT燃脂效率确实高。25分钟的HIIT燃烧的脂肪，中等强度运动需要41分钟。但是高强度运动可能带来的损伤，目前也是有争议的。<br>目前科学减肥的权威指南推荐的最稳妥的方法，并不是HIIT，而是每周150分钟以上中等强度的有氧运动。<br>美国国家体重控制登记中心的数据显示，在所有运动里，快走是减肥成功率最高的。  </p></blockquote><p><strong>减脂，更要塑形</strong><br>通俗来说，就是减少腰围，增大臀围。  </p><p>减小腰围：腰围大小，由腹部内脏脂肪和皮下脂肪多少决定。<br>有氧运动可以很好的减少内脏脂肪，力量训练，如卷腹、臀桥、杠铃，可以减少皮下脂肪。  </p><p>增大臀围：锻炼臀大肌、臀中肌，像深蹲、平板支撑、俯卧撑这样复合型运动即可。<br>臀部一翘，腿部视觉效果会拉长5-10cm。</p><hr><h1 id="第08课-心理能量：怎样才能避免中途放弃？"><a href="#第08课-心理能量：怎样才能避免中途放弃？" class="headerlink" title="第08课 心理能量：怎样才能避免中途放弃？"></a>第08课 心理能量：怎样才能避免中途放弃？</h1><p>压力和睡眠是减肥路上心理因素的主战场。  </p><ul><li>如何科学管理压力？</li><li>压力为何会影响减肥？</li></ul><p>研究发现，在响应压力时，人体内皮质醇的含量会逐渐提高。  </p><p>皮质醇会影响人体对脂肪的分解；影响人体的水平衡，让人变得水肿。  </p><p>除了皮质醇，压力还会阻断瘦素对大脑释放信号。瘦素，顾名思义，就是增加代谢、让你变瘦的激素。<br>身体上的改变倒是其次，压力最可怕的是，它会改变我们的认知模式。  </p><p><strong>如何应对压力？</strong>  </p><ul><li>转变思维。为自己制定一个短期小目标。不用太难，周期也不要太长，完成了就给自己一个奖励。</li><li>自我监测。通过饮食拍照，备注想法，一是帮自己判断是否有不合理的饮食选择，而是发现食物的隐患。</li><li>主动舒缓宣泄。尝试愈加、冥想、正念等一些有呼吸引导的舒缓运动，或者每天打上10-15分钟的太极。</li></ul><p><strong>如何睡才能躺着瘦？</strong><br>来自全球各地的二十多项流行病研究表明，睡眠不足与BMI增加有关。与每晚睡7-8小时的人相比，睡5小时或更少的人，肥胖的几率，男性增加3.7倍，女性增加2.3倍。  </p><p><strong>怎么才是睡个好觉？</strong><br>睡眠时间要在6-8小时之间。一段6-8小时的睡眠，可以消耗400-500大卡，相当于跑了10公里。如果睡眠不足6小时，身体就会分泌刺激食欲的激素，导致一熬夜就加餐。如果超过8小时，会导致白天消耗的能量减少。  </p><p>要有深度睡眠。深度睡眠，可以增加瘦素的分泌，减少饥饿感。睡前4个小不要吃东西，水果也不可以。  </p><p>睡眠要规律。熬夜并不可怕，如果不得不熬夜，就尽量把它熬成规律。比如晚上12点睡，早上8点起。  </p><hr><h1 id="第09课-同伴行动：“近瘦者瘦”是真的吗？"><a href="#第09课-同伴行动：“近瘦者瘦”是真的吗？" class="headerlink" title="第09课 同伴行动：“近瘦者瘦”是真的吗？"></a>第09课 同伴行动：“近瘦者瘦”是真的吗？</h1><p><strong>三度影响力</strong>  </p><ul><li>如果你的朋友变胖了，你体重增加的概率是45%。</li><li>如果你的朋友的朋友变胖了，你变胖的概率是20%。</li><li>如果你朋友的朋友的朋友变胖了，你变胖的概率是10%。</li></ul><p><strong>构建你的减肥社交圈</strong><br>首先要选择的，是离我们最近、最亲密的家人。<br>其次是我们关系亲密的朋友。<br>继续拓展，主动寻找正在减肥的圈子。  </p><blockquote><p>在自然界，有个特别有名的现象叫做 “蜂群思维”。科学家们发现，单个蜜蜂的力量很小，但是数以百万的蜜蜂聚集在一起，就会产生巨大的群体智慧。在这个群体里，蜜蜂们的思维和行动高度一致——紧跟前面的同伴，与周围同伴的步伐保持一致，也与后面的同伴保持距离。  </p></blockquote><p>如果你的一度圈层，也就是家人和朋友的减肥陪伴不够充分、不够坚定，你就可以考虑网络社交。  </p><p><strong>让社交圈为自己的减肥助力</strong>  </p><ul><li>一是足够充分的浸染。凡是和减肥有关的事情，比如吃、动、睡、压力宣泄，尽可能的和圈层标杆泡在一起。</li><li>二是主动输出。分享个人减肥心得、减肥进展、减肥失败的过程等等。</li></ul><hr><p>第10课 药物：有没有有效的减肥药？<br><strong>常见的三类减肥药物</strong>  </p><ul><li>号称能减肥的各种保健品，比如排毒减肥茶之类。</li><li>专门针对减肥这个需求开发的药物。</li><li>不是专门为减肥开发的，但是具有一定减肥效果的药物，比如二甲双胍。</li></ul><p><strong>号称能减肥的保健品</strong><br>要么是虚假宣传，没有任何效果；要么偷偷加入缓泻药，让人拉肚子，最多短期有用，但是会破坏健康；要么打着“纤体”的名号，添加纤维素、益生菌，对减肥可有可无。  </p><p>从帮助你健康有效减肥的角度来说，都是假的。  </p><p><strong>专门上市的减肥药物</strong><br>目前全球的减肥药物不过5&#x2F;6种。其中最强效的，也是最被给予厚望的Qsymia，年销售不到1亿美元。</p><blockquote><p>1890年，科学家尝试用绵羊的甲状腺素作为减肥药，结果导致心率失常和死亡增加。<br>1950年，开始流行把抗抑郁药安非他明和利尿剂一起使用，结果会导致非常严重的心梗和猝死。<br>1996年，FDA批注了右芬氟拉明作为减肥药，但会导致严重的心血管疾病。<br>1997年，美国和加拿大同时批准了西布曲明作为减肥药，但不久，医生发现这个药会引起中风、心律失常，以及不可控的高血压。  </p></blockquote><p>目前的减肥药分为两类，增加能量消耗，或减少能量吸收。  </p><ul><li>增加能量消耗。比如Qsymia，是模仿人体交感神经兴奋，提高人体代谢。这种药，1年内，75%可以减重8.8kg，54%可以减重10%。但是，也伴随着消化不良、便秘、口干、失眠。</li><li>直接或间接减少能量吸收。比如奥利司他，通过和胃肠道的脂肪酶结合，达到阻止脂肪吸收的效果。这是中国药监局唯一批准上市的减肥药。事实上，奥利司他只能减少30%的脂肪吸收，并且一定要配合饮食调整才能起作用。同时，由于吃进去的脂肪不能被完全吸收，要排除体外，所以脂肪性腹泻不可避免；一些脂溶性维生素，比如维生素A&#x2F;D&#x2F;E&#x2F;K极有可能缺乏。数据显示，服用奥利司他，1年内，44%的人能减重5%，平均也就是2.6kg，远不如广告说的那么神奇。</li></ul><p>减肥药，大多会带来很多副作用，比如恶心、腹泻、头晕、口干、心慌、心律失常等，发生概率接近2%。  </p><p><strong>使用减肥药的注意事项</strong>  </p><ul><li>那些人可以服用减肥药？<ul><li>BMI＞27，并且至少合并了一种肥胖并发的疾病，比如2型糖尿病、高血压、高血脂等；或者没有什么疾病，但BMI＞30，且尝试生活方式治疗无效后，可以考虑药物治疗。</li></ul></li><li>使用注意事项<ul><li>所有药物减肥，包括奥利司他，都是长期治疗方案。试图通过药物快速降到理想体重，再通过自律维持，几乎都会反弹。</li><li>在服用药物减肥的同时，必须执行饮食和运动相结合的生活方式的改变。</li></ul></li></ul><p><strong>具有减肥副作用的药物</strong><br>二甲双胍的确有减肥效果（平均1年1kg），对合并了高血糖和糖尿病的胖子来说，是绝对的首选。但是对于正常人来说性价比非常低。  </p><hr><h1 id="第11课-手术：减肥手术真的靠谱吗？"><a href="#第11课-手术：减肥手术真的靠谱吗？" class="headerlink" title="第11课 手术：减肥手术真的靠谱吗？"></a>第11课 手术：减肥手术真的靠谱吗？</h1><p><strong>吸脂术</strong>  </p><p>吸脂术几乎完全为了局部塑形，既不能减肥，也不能让人收获健康。在医学上，抽脂术属于整形外科，也就是医疗美容的范畴。<br>抽脂术抽掉的只是皮下脂肪，并不能减少内脏上的脂肪。  </p><p>如果不改变生活方式，抽掉的脂肪大概只需三个月，就会重新张回来。而且，它们不会长到当初抽脂的大腿、臀部、腰部，更可能长到内脏上。  </p><p><strong>减肥手术，通过不同方法把胃变小</strong>  </p><ul><li>胃旁路手术。用小肠在胃旁边做个通路，把胃闲置不用。</li><li>直接把胃的一部分切掉。</li><li>在胃里放一个可充气的气球，让胃的容积变小。</li></ul><p>对于BMI＞40的人，减肥手术的效果非常好。<br>减肥手术让人体以血糖为主的全身代谢，发生了三个层面的变化。  </p><ul><li><p>第一个层面，物理性变化。</p></li><li><p>第二个层面，化学性变化。</p><blockquote><p>一方面，一种叫做 “胆汁酸” 的激素会增加。它会影响肠道菌群，而肠道菌群的改变，会改变我们的味觉系统，让人不那么喜欢糖和脂肪，反而更接受蔬菜、水果。<br>另一方面，由肠道分泌一种叫做 “胰高血糖样肽”的激素会增多。它能减缓我们的胃排空速度，减少饥饿感，还会促进胰岛素分泌，改善胰岛β细胞的敏感性。  </p></blockquote></li><li><p>第三个层面，神经传导改变。不管是胃肠道菌群，还是上面提到的激素，最终都会通过神经将信号传递给大脑，降低食欲。</p></li></ul><hr><h1 id="第12课-轻断食：被大大低估的医学手段"><a href="#第12课-轻断食：被大大低估的医学手段" class="headerlink" title="第12课 轻断食：被大大低估的医学手段"></a>第12课 轻断食：被大大低估的医学手段</h1><p><strong>轻断食≠断食</strong>  </p><p>医学上的轻断食，是一种医学饮食治疗，它不仅对断食的频率、时间有要求，还对断食那天的能量摄入有严格规定。  </p><p><strong>好处与机制</strong>  </p><ul><li>轻断食可以帮助减肥、治疗疾病和延年益寿。</li><li>在断食8-12个小时候，饥饿会启动第一波代谢改变。没有糖作为第一手能源，身体只能分解脂肪，把分解出的酮体作为能源物质。这些酮体会启动神经内分泌传导信号，刺激细胞核，细胞核收到信号后会启动一系列自我保护效应，包括降低蛋白质合成、提高胰岛素敏感性、增加坏细胞的自我清除等等。</li><li>在轻断食期间，为了适应环境改变压力，身体的每一个细胞都会进行系统性修复，把自己的损伤修复后；而在轻断食结束，进入恢复期后，正常进食、良好的睡眠，又会把身体带入一个细胞生长、功能性组织重建的全新状态。</li></ul><p><strong>如何进行轻断食？</strong>  </p><ul><li>第一步，判断吃什么。<ul><li>轻断食并不是什么都不吃。而是把摄入的热量控制在一个很低的范围内，一般是500-700大卡，男性可以适当多点，女性可以适当少点。</li><li>怎么选择？<ul><li>选择升糖指数低的食物，让自己饿的慢一点。</li><li>保证每公斤体重1g以上的蛋白质摄入。</li><li>保证维生素和纤维素的补充。</li></ul></li></ul></li><li>第二步，什么时候吃？<ul><li>这500-700大卡的食物，要在6-8小时之内吃完。可以选择8:00-16:00，也可以选择11:00-19:00.</li></ul></li><li>第三步，轻断食的频次。<ul><li>轮替方案。如今天轻断食，明天正常饮食。每周轻断食不超过3天。</li><li>5+2方案。一周当中任意断两天，其余五天正常。可以是连续断两天，也可以是间隔断两天。</li></ul></li></ul><p><strong>一个6个月的轻断食方案</strong>  </p><ul><li>第一个月。每周只有1天轻断食，这一天可以吃到1000大卡的食物，从8:00-18:00,10个小时吃完。</li><li>第二个月。每周2天轻断食，每天还是1000大卡，进食时间减少到8个小时，其他日子正常吃。</li><li>第三个月。每周2天轻断食，每天减少到750大卡，进食时间缩短到6个小时。</li><li>第四至六个月。每周2天，每天减少到500大卡，进食时间还是6个小时。</li></ul><p>在轻断食初期，大多数人会经历饥饿感、烦躁和注意力下降，一般会在1个月内消失。  </p><hr><h1 id="第13课-医学减肥：顶级团队的体重管理秘笈"><a href="#第13课-医学减肥：顶级团队的体重管理秘笈" class="headerlink" title="第13课 医学减肥：顶级团队的体重管理秘笈"></a>第13课 医学减肥：顶级团队的体重管理秘笈</h1><p>判断减还是不减</p><ul><li>BMI＜18.5，不减</li><li>18.5＜BMI＜24，体脂率、体型符合标准，也不需要减；如果体型有腰太粗、小肚腩等，建议减肥。</li><li>BMI＞24，如果没有三高，没有糖尿病风险、睡眠呼吸暂停综合症、脂肪肝等疾病，建议减肥，但不是必须要减；有其中任何一项疾病，都必须要开始减肥。</li><li>BMI＞30，无论如何都要开始减肥。</li></ul><p>评估个人状况并制定减肥目标</p><ul><li>BMI≤35，最好6个月内减少现在体重的5%-10%；</li><li>BMI≥35，6个月内减少现在体重的10%-15%；</li><li>6个月后，再设定下一轮计划。</li></ul><p>体重反弹循环对身体的伤害更大。</p><hr><h1 id="第14课-代餐：是神器还是忽悠？"><a href="#第14课-代餐：是神器还是忽悠？" class="headerlink" title="第14课 代餐：是神器还是忽悠？"></a>第14课 代餐：是神器还是忽悠？</h1><p><strong>代餐的神奇效果</strong><br>代餐真的能减肥，且效果不错。  </p><blockquote><p>一个名叫LOOK AHAED的代餐研究非常有名。研究者对5145名患者进行了长达十年的研究后发现，让肥胖的人坚持吃1年代餐，1年后体重比不吃代餐的平均减少7.7kg，2年后，依然能保持5.2kg的差距，而4年后，还有3.4kg的减肥效果。  </p></blockquote><p>代餐还可以塑形，也就是降低体脂率、减少腰围。  </p><p><strong>如何选择合适的代餐？</strong>  </p><p>医学上对代餐的定义，它是为了减肥或者保持减肥后效果开发的，要代替一天中1-2顿饭的食物产品。  </p><p>如果一天三顿都吃代餐，它就超出代餐的范围，变成一种医疗级产品了，专业名字叫 “全配方” 代餐 RCD。这种饮食方案只能在医师监督下，针对BMI很高的人采用。  </p><p>一个好的代餐，必须含有一定能量。也就是说，这一顿吃了代餐，就不能再吃其他东西，两餐之间不能吃任何有热量的食物和饮料。代餐必须包含一定能量，大概150-350大卡。  </p><p>市面很多纯酵素或者一块15g的小饼干作为代餐，又或者宣称能提供1小时饱腹感的代餐棒，都不要选。因为能量不达标，很快就饿了，反而会额外摄入更多的能量。  </p><p>代餐里的能量物质必须按一定比例搭配。碳水要减到40%，蛋白质占20-30%，脂肪控制在30%以内。其中饱和脂肪酸可以降到10%以下，高血脂的人可以低至7%，其余最好都是不饱和脂肪酸。  </p><p>一个好的代餐，必须具有维生素ABCDEK，钙、铁、锌、纤维素。研究表明，吃代餐的人容易缺乏维生素B族，从而出现脱发、口腔黏膜溃疡等问题。所以要注意配料表，含有维生素B1、B2、B6、烟酸、泛酸这些的更好。  </p><hr><h1 id="第15课-婴儿肥：为什么必须马上减掉"><a href="#第15课-婴儿肥：为什么必须马上减掉" class="headerlink" title="第15课 婴儿肥：为什么必须马上减掉"></a>第15课 婴儿肥：为什么必须马上减掉</h1><p>怎么判断孩子胖不胖？  </p><blockquote><p>世界卫生组织通过计算BMI来判断孩子的体重是否正常。BMI需要和相同性别、同等年龄的孩子对照。  </p></blockquote><p>孩子胖一点真的不是事儿吗？  </p><blockquote><p>不长个。脂肪细胞过度增加会引发内分泌失调，从而导致孩子过早发育，骨骺线提早闭合。<br>一胖一辈子。调查显示，肥胖儿童成年后，42%-63%的概率会继续肥胖；肥胖的青少年在成年后，继续肥胖的概率高达70%-80%。说得更直白一些，18岁之前胖，后半辈子大概率也会继续胖。  </p></blockquote><p>根本没有所谓的“青春肥”“婴儿肥”，小时候胖不是很多人以为的长身体，它多半会变成真胖。  </p><p>在我们漫长的一生中，脂肪发育期只有一个，就是成年之前。从婴幼儿时期，脂肪细胞就开始大量繁殖，到青春期达到顶峰，从此之后，，脂肪细胞的数量就不会在变了。不管瘦了胖了，变化的都不是脂肪细胞的数量，而是它们的大小。  </p><p><strong>除了有固定生长期之外，脂肪细胞还有 “记忆”。</strong>  </p><p>如果一个人在成年之前，也就是在脂肪细胞生长发育阶段，受到了营养刺激，比如长时间饥饿、经常吃撑，不管是营养不良还是营养过剩，接受到任何一种刺激，身体都会向脂肪细胞发出过度生长的信号。  </p><p>脂肪细胞会长期“记住”这个信号，在此后的一辈子里，都倾向于囤积能量、拼命生长。这就是所谓的“易胖体质”。  </p><p>影响孩子的心理健康。比如受到同学排挤等。  </p><p><strong>如何避免孩子肥胖？</strong><br>让家里所有负责带娃的孩子都了解这一点，统一战线。  </p><ul><li>管好自己的体重再生娃。<ul><li>研究显示，父母双方都胖，孩子也胖的风险是父母双方正常的孩子的4倍；如果父亲一方胖，就是3.1倍；如果母亲一方胖，就是2.7倍。</li></ul></li><li>新生儿体重不能走两端。<ul><li>新生儿正常体重范围是2.5-4公斤。医学发现，不管是低于2.5公斤还是高于4公斤，孩子成年后变胖，以及换上肥胖相关疾病的概率都会明显增加。</li></ul></li><li>母乳喂养，至少到孩子1周岁。<ul><li>母乳喂养的学龄期儿童肥胖风险会降低15%-20%。</li></ul></li><li>果汁饮料每天要有封顶。<ul><li>据美国儿科学会推荐，1-3岁的孩子每天最多喝120毫升果汁，也就是半杯；4-6岁孩子每天喝120-180毫升；6岁以后可以达到每天240毫升，也就是1杯。</li></ul></li><li>三餐让孩子自觉吃，没吃饱也不给零食。<ul><li>三分饥与寒，少穿一件衣。</li><li>人体其实有两个类型的脂肪组织 ——白色脂肪组织和棕色脂肪组织。其中，棕色脂肪组织与BMI呈负相关。也就是说棕色脂肪组织越多，体重就越低。而适度寒冷会促进棕色脂肪细胞的增长。</li></ul></li><li>让孩子和你一起做饭。<ul><li>潜移默化的影响孩子的口味和对食物的选择。</li></ul></li><li>限制孩子玩电子产品，每天不超过1小时。<ul><li>青少年每天保持20-60分钟中强度有氧运动，可以预防肥胖。</li></ul></li><li>全家11点熄灯，让孩子睡足10个小时。<ul><li>1-2岁小宝贝，每天要睡13-14小时；2-4岁，要睡够12小时；4-7岁，大概是11小时；到了学龄期和青春期，也就是7-15岁，每天要睡足8-11小时。</li></ul></li></ul><hr><h1 id="第16课-结语：为什么减肥不是个人问题？"><a href="#第16课-结语：为什么减肥不是个人问题？" class="headerlink" title="第16课 结语：为什么减肥不是个人问题？"></a>第16课 结语：为什么减肥不是个人问题？</h1><p>肥胖不是一个人的问题。  </p><p>从生物演化的角度来说，肥胖可能是根植于人类基因之中的。  </p><p>人类祖先习惯的都是奔波狩猎或者采集野果这种吃了上顿没有下顿的日子，想要生存，就得想进一切办法囤积能量。以至于现在的我们，看到冰淇淋、蛋糕这些 “能量炸弹” 就走不动道。  </p><p>商业社会在满足人们需求的同时，也在客观上加剧了肥胖的问题。  </p><p>大量研究发现，反复接触一种食物的味道，会让人们更加喜欢它，吃得更多。医学上称为“食物偏好”。  </p><p>这种食物偏好导致一种恶性循环，千百万年的进化让我们喜欢高油高糖的食物。商人为迎合人们的口味，生产这种加工食品；而长期接触这些不健康食品，会改变人们的饮食偏好，更加喜欢这种食物……  </p><p>肥胖不是一个人的事情，而是人类长期进化的产物，是工业化带来的能量过剩和商业环境对人们的行为诱导。</p><h1 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h1><ul><li><a href="https://zhuanlan.zhihu.com/p/149781611">【知乎】听课笔记 冯雪科学减肥 16 讲</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> 思考札记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 阅读 </tag>
            
            <tag> 减肥 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>NHK《简明日语》第05课 それは私（わたし）の宝物（たからもの）です。</title>
      <link href="/2021/07/27/NHK%E3%80%8A%E7%AE%80%E6%98%8E%E6%97%A5%E8%AF%AD%E3%80%8B%E7%AC%AC05%E8%AF%BE/"/>
      <url>/2021/07/27/NHK%E3%80%8A%E7%AE%80%E6%98%8E%E6%97%A5%E8%AF%AD%E3%80%8B%E7%AC%AC05%E8%AF%BE/</url>
      
        <content type="html"><![CDATA[<h1 id="NHK《简明日语》第05课"><a href="#NHK《简明日语》第05课" class="headerlink" title="NHK《简明日语》第05课"></a>NHK《简明日语》第05课</h1><h2 id="课程简介"><a href="#课程简介" class="headerlink" title="课程简介"></a>课程简介</h2><p>小樱到安娜的宿舍来玩，她发现了一样东西。  </p><h2 id="教材详情"><a href="#教材详情" class="headerlink" title="教材详情"></a>教材详情</h2><h3 id="それは私（わたし）の宝物（たからもの）です。"><a href="#それは私（わたし）の宝物（たからもの）です。" class="headerlink" title="それは私（わたし）の宝物（たからもの）です。"></a>それは私（わたし）の宝物（たからもの）です。</h3><ul><li>アンナ: 私の部屋はこちらです。どうぞ。 &#x2F;&#x2F; 我的房间在这边。请进。</li><li>さくら: すごい！これは全部マンガ？ &#x2F;&#x2F; 哇哦！这都是漫画？</li><li>アンナ: それは私の宝物です。 &#x2F;&#x2F; 那是我的宝贝。<br>私は毎日マンガを読みます。 &#x2F;&#x2F; 我每天都看漫画。</li></ul><h3 id="语法要点"><a href="#语法要点" class="headerlink" title="语法要点"></a>语法要点</h3><p>【主语】 は 【宾语】 を 【动词】  </p><blockquote><p>日语的语序通常按照主语、宾语、动词的顺序来排列。<br>「を」是助词，表示动作的对象。<br>例如：私（わたし）はマンガを読（よ）みます。（我看漫画。）</p></blockquote><p><strong>动词否定形和疑问形的变换方法</strong>  </p><p>动词以「ます」结尾的形式叫做マス形，用郑重语气表达时，使用マス形。动词マス形的否定形就是把「ます」变成「ません」。「読（よ）みます」（读）变成「読みません」（不读）。</p><h3 id="单词"><a href="#单词" class="headerlink" title="单词"></a>单词</h3><table><thead><tr><th>部屋</th></tr></thead><tbody><tr><td><strong>房间</strong></td></tr></tbody></table><table><thead><tr><th>すごい</th></tr></thead><tbody><tr><td><strong>表示令人吃惊的形容词</strong></td></tr></tbody></table><table><thead><tr><th>マンガ</th></tr></thead><tbody><tr><td><strong>漫画</strong></td></tr></tbody></table><table><thead><tr><th>宝物</th></tr></thead><tbody><tr><td><strong>宝贝</strong></td></tr></tbody></table><table><thead><tr><th>毎日</th><th>毎週</th></tr></thead><tbody><tr><td><strong>每天</strong></td><td><strong>每周</strong></td></tr><tr><td>「毎（まい）」是“每”，「日（にち）」是“天”。</td><td></td></tr></tbody></table><table><thead><tr><th>読みます</th></tr></thead><tbody><tr><td><strong>读</strong></td></tr></tbody></table><p>教材：<a href="https://www.nhk.or.jp/lesson/update/pdf/le5_zh_t.pdf">https://www.nhk.or.jp/lesson/update/pdf/le5_zh_t.pdf</a></p><h2 id="我的收获"><a href="#我的收获" class="headerlink" title="我的收获"></a>我的收获</h2><ul><li>疑问句除了用「か。」结尾，还可以去掉「か」在句尾用升调来读。</li></ul><p><strong>「これは全部マンガですか。」&#x3D;&#x3D;&#x3D;&gt;「これは全部マンガ？」</strong></p><h2 id="课程地址"><a href="#课程地址" class="headerlink" title="课程地址"></a>课程地址</h2><p><a href="https://www.nhk.or.jp/lesson/chinese/learn/list/5.html">https://www.nhk.or.jp/lesson/chinese/learn/list/5.html</a></p>]]></content>
      
      
      <categories>
          
          <category> 日语之路 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 日语 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Excel使用公式某一列乘以固定单元格</title>
      <link href="/2021/07/19/Excel%E4%BD%BF%E7%94%A8%E5%85%AC%E5%BC%8F%E6%9F%90%E4%B8%80%E5%88%97%E4%B9%98%E4%BB%A5%E5%9B%BA%E5%AE%9A%E5%8D%95%E5%85%83%E6%A0%BC/"/>
      <url>/2021/07/19/Excel%E4%BD%BF%E7%94%A8%E5%85%AC%E5%BC%8F%E6%9F%90%E4%B8%80%E5%88%97%E4%B9%98%E4%BB%A5%E5%9B%BA%E5%AE%9A%E5%8D%95%E5%85%83%E6%A0%BC/</url>
      
        <content type="html"><![CDATA[<h1 id="Excel使用公式某一列乘以固定单元格"><a href="#Excel使用公式某一列乘以固定单元格" class="headerlink" title="Excel使用公式某一列乘以固定单元格"></a>Excel使用公式某一列乘以固定单元格</h1><p>在制作 excel 清单时使用公式：<br><code>[H4 单元格]：=F4*G4</code><br>然后拉动 H4 单元格自动填充 H5 到 H10，则：<br><code>[H5 单元格]：=F5*G5</code><br><code>[H6 单元格]：=F6*G6</code><br>… …<br><code>[H10 单元格]：=F10*G10</code><br>但是我需要让 H 列等于 F 列乘以 G4 单元格，而不是乘以 G 列。  </p><p>上网查资料找到解决办法：<br><code>[H4 单元格]：=F4*G$4</code><br>然后再拉动 H4 单元格自动填充，就可以了。  </p><blockquote><p>在要固定的单元格数字前加上<code>$</code>符号。</p></blockquote><h1 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h1><ul><li><a href="http://www.officexr.com/c/41811.html">excel乘固定单元格</a></li></ul><style>header.intro-header {    background-blend-mode: multiply;}</style>]]></content>
      
      
      <categories>
          
          <category> 技术坑记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> excel </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>微信小程序getUserProfile报错解决 wx.getUserProfile is not a function</title>
      <link href="/2021/07/18/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8FgetUserProfile%E6%8A%A5%E9%94%99%E8%A7%A3%E5%86%B3/"/>
      <url>/2021/07/18/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8FgetUserProfile%E6%8A%A5%E9%94%99%E8%A7%A3%E5%86%B3/</url>
      
        <content type="html"><![CDATA[<h1 id="发现问题"><a href="#发现问题" class="headerlink" title="发现问题"></a>发现问题</h1><p>我三年前做了一个微信小程序【今天喝水了么】（喝了么），用来记录自己每天喝8杯水。今天突然想看看我的小程序账号怎么样了，于是登陆微信小程序后台，发现我的小程序应用版本是0.0.3。但还有一个未提交审核的0.0.4版本，这个版本新功能就一个：允许将小程序分享给好友。  </p><p>当时为什么不提交这个版本并发布呢？我想不起来了，就干脆现在提交发布吧。不一会儿，微信通知小程序审核通过，我就到后台发布了这个版本。  </p><p>打开小程序，发现分享功能的确有了，但是用户昵称和头像却获取不到了。这是怎么回事呢？</p><p>在微信开发者工具中一切却都正常，清理缓存后也可以获取到用户头像和昵称。开启真机调试却不能获取到用户头像昵称，只会获取到一个头像【默认图片】和一个昵称【微信用户】。真的很奇怪，两个版本代码的区别只有允许分享这一行代码啊。  </p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wx.<span class="title function_">showShareMenu</span>();</span><br></pre></td></tr></table></figure><p>网上搜索了一下，原来是微信对小程序获取用户信息接口进行了调整：  </p><blockquote><h2 id="小程序登录、用户信息相关接口调整说明官方"><a href="#小程序登录、用户信息相关接口调整说明官方" class="headerlink" title="小程序登录、用户信息相关接口调整说明官方"></a>小程序登录、用户信息相关接口调整说明官方</h2><p>微信团队<em>02-24</em></p><blockquote><p>公告更新时间：2021年04月15日</p></blockquote><p>考虑到近期开发者对小程序登录、用户信息相关接口调整的相关反馈，为优化开发者调整接口的体验，回收wx.getUserInfo接口可获取用户授权的个人信息能力的截止时间由2021年4月13日调整至2021年4月28日24时。</p><p>为﻿优化用户的使用体验，平台将进行以下调整：</p><ol><li>2021年2月23日起，若小程序已在微信开放平台进行绑定，则通过wx.login接口获取的登录凭证可直接换取unionID</li><li>2021年4月28日24时后发布的小程序新版本，无法通过wx.getUserInfo与<code>&lt;button open-type=&quot;getUserInfo&quot;/&gt;</code>获取用户个人信息（头像、昵称、性别与地区），将直接获取匿名数据（包括userInfo与encryptedData中的用户个人信息），获取加密后的openID与unionID数据的能力不做调整。此前发布的小程序版本不受影响，但如果要进行版本更新则需要进行适配。</li><li>新增getUserProfile接口（基础库2.10.4版本开始支持），可获取用户头像、昵称、性别及地区信息，开发者每次通过该接口获取用户个人信息均需用户确认。具体接口文档：<a href="https://developers.weixin.qq.com/miniprogram/dev/api/open-api/user-info/wx.getUserProfile.html">《getUserProfile接口文档》</a></li><li>由于getUserProfile接口从2.10.4版本基础库开始支持（覆盖微信7.0.9以上版本），考虑到开发者在低版本中有获取用户头像昵称的诉求，对于未支持getUserProfile的情况下，开发者可继续使用getUserInfo能力。开发者可参考<a href="https://developers.weixin.qq.com/miniprogram/dev/api/open-api/user-info/wx.getUserProfile.html#%E7%A4%BA%E4%BE%8B%E4%BB%A3%E7%A0%81">getUserProfile接口文档中的示例代码</a>进行适配。</li></ol><p><strong>请使用了wx.getUserInfo接口或<code>&lt;button open-type=&quot;getUserInfo&quot;/&gt;</code>的开发者尽快适配。</strong><a href="https://developers.weixin.qq.com/miniprogram/dev/devtools/nightly.html">开发者工具</a><a href="https://developers.weixin.qq.com/miniprogram/dev/devtools/nightly.html">1.05.2103022版本</a>开始支持getUserProfile接口调试，开发者可下载该版本进行改造。</p><p>小游戏不受本次调整影响。  </p><p>…(略)…  </p><p><strong>回收wx.getUserInfo接口可获取用户个人信息能力</strong><br>4月28日24时后发布的新版本小程序，开发者调用wx.getUserInfo或<code>&lt;button open-type=&quot;getUserInfo&quot;/&gt;</code>将不再弹出弹窗，<strong>直接返回匿名的用户个人信息</strong>，获取加密后的openID、unionID数据的能力不做调整。</p></blockquote><h1 id="修改代码"><a href="#修改代码" class="headerlink" title="修改代码"></a>修改代码</h1><p>按照官方API文档的示例代码，对自己的小程序代码进行了修改，结果报错</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wx.getUserProfile is not a function; [Component] Event Handler Error @ pages/index/index#bound getUserProfile</span><br></pre></td></tr></table></figure><h1 id="解决问题"><a href="#解决问题" class="headerlink" title="解决问题"></a>解决问题</h1><p>看到在《getUserInfo和getUserProfile 对比》文中提到的使用<code>getUserProfile</code>两个前提条件：</p><blockquote><p>1.开发者工具版本不低于 1.05.2103022<br>2.基础库版本不低于 2.10.4</p></blockquote><p>这才恍然大悟，原来官方在《微信官方文档-API-wx.getUserProfile》中也有说明。将基础库从原来设置的 2.6.2 修改为最新的 2.18.0 后，再进行真机调试，果然可以获取到用户昵称和头像了。</p><h1 id="我的小程序"><a href="#我的小程序" class="headerlink" title="我的小程序"></a>我的小程序</h1><img src="/2021/07/18/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8FgetUserProfile%E6%8A%A5%E9%94%99%E8%A7%A3%E5%86%B3/post-wx-userinfo.jpg" class=""><h1 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h1><ul><li><a href="https://developers.weixin.qq.com/community/develop/doc/000cacfa20ce88df04cb468bc52801" target="_blank">小程序登录、用户信息相关接口调整说明</a></li><li><a href="https://developers.weixin.qq.com/miniprogram/dev/api/open-api/user-info/wx.getUserProfile.html#Bug-Tip" target="_blank">微信官方文档-API-wx.getUserProfile</a></li><li><a href="https://developers.weixin.qq.com/community/develop/doc/000e6e0dc08f00b0cdcb13b3653400" target="_blank">wx.getUserProfile is not a function?</a></li><li><a href="https://developers.weixin.qq.com/community/develop/article/doc/00040885c386f81e96cbf93cf51013" target="_blank">getUserInfo和getUserProfile 对比</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> 技术坑记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 前端 </tag>
            
            <tag> 微信小程序 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Happy-Birthday 歌词 back number</title>
      <link href="/2021/07/17/%E6%AD%8C%E8%AF%8DHappy-Birthday/"/>
      <url>/2021/07/17/%E6%AD%8C%E8%AF%8DHappy-Birthday/</url>
      
        <content type="html"><![CDATA[<h1>Happy Birthday 歌词</h1><p>作词：清水依与吏</p><p>作曲：清水依与吏</p><div class="lyricBody">  <div class="large">    <div class="hiragana">      いつの<span class="ruby"><span class="rb">間</span><span class="rt">ま</span></span>にやら<span class="ruby"><span class="rb">日付</span><span class="rt">ひづけ</span></span>は<span class="ruby"><span class="rb">変</span><span class="rt">か</span></span>わって<br>なんで<span class="ruby"><span class="rb">年</span><span class="rt">とし</span></span>って<span class="ruby"><span class="rb">取</span><span class="rt">と</span></span>るんだろう<br>もう<span class="ruby"><span class="rb">背</span><span class="rt">せ</span></span>は<span class="ruby"><span class="rb">伸</span><span class="rt">の</span></span>びないくせに<br><span class="ruby"><span class="rb">着信</span><span class="rt">ちゃくしん</span></span>の<span class="ruby"><span class="rb">音</span><span class="rt">おと</span></span>で<span class="ruby"><span class="rb">飛</span><span class="rt">と</span></span>び<span class="ruby"><span class="rb">起</span><span class="rt">お</span></span>きたけど<span class="ruby"><span class="rb">損</span><span class="rt">そん</span></span>したな<br><span class="ruby"><span class="rb">君</span><span class="rt">きみ</span></span>かと<span class="ruby"><span class="rb">思</span><span class="rt">おも</span></span>ったのに<br><br><span class="ruby"><span class="rb">何</span><span class="rt">なに</span></span>かの<span class="ruby"><span class="rb">手違</span><span class="rt">てちが</span></span>いで<br><span class="ruby"><span class="rb">好</span><span class="rt">す</span></span>きになってくれないかな<br>どうにも<span class="ruby"><span class="rb">君</span><span class="rt">きみ</span></span>のいない<span class="ruby"><span class="rb">場所</span><span class="rt">ばしょ</span></span>は<br><span class="ruby"><span class="rb">空気</span><span class="rt">くうき</span></span>が<span class="ruby"><span class="rb">薄</span><span class="rt">うす</span></span>くてさ<br><br>くだらない<span class="ruby"><span class="rb">話</span><span class="rt">はなし</span></span>は<span class="ruby"><span class="rb">思</span><span class="rt">おも</span></span>い<span class="ruby"><span class="rb">付</span><span class="rt">つ</span></span>くのに<br><span class="ruby"><span class="rb">君</span><span class="rt">きみ</span></span>を<span class="ruby"><span class="rb">抱</span><span class="rt">だ</span></span>き<span class="ruby"><span class="rb">締</span><span class="rt">し</span></span>めていい<span class="ruby"><span class="rb">理由</span><span class="rt">りゆう</span></span>だけが<span class="ruby"><span class="rb">見付</span><span class="rt">みつ</span></span>からない<br>ああそうか そうだよな<br>ハッピーバースデー <span class="ruby"><span class="rb">片想</span><span class="rt">かたおも</span></span>いの<span class="ruby"><span class="rb">俺</span><span class="rt">おれ</span></span><br><br><span class="ruby"><span class="rb">愛</span><span class="rt">あい</span></span>が<span class="ruby"><span class="rb">何</span><span class="rt">なに</span></span>かは<span class="ruby"><span class="rb">知</span><span class="rt">し</span></span>らないけれど<br><span class="ruby"><span class="rb">好</span><span class="rt">す</span></span>きと<span class="ruby"><span class="rb">言</span><span class="rt">い</span></span>う<span class="ruby"><span class="rb">名前</span><span class="rt">なまえ</span></span>の<span class="ruby"><span class="rb">痛</span><span class="rt">いた</span></span>みになら<span class="ruby"><span class="rb">詳</span><span class="rt">くわ</span></span>しいかも<br><span class="ruby"><span class="rb">君</span><span class="rt">きみ</span></span>にも<span class="ruby"><span class="rb">教</span><span class="rt">おし</span></span>えてあげたいけれど<span class="ruby"><span class="rb">結局</span><span class="rt">けっきょく</span></span><br><span class="ruby"><span class="rb">教</span><span class="rt">おそ</span></span>わるのは<span class="ruby"><span class="rb">俺</span><span class="rt">おれ</span></span>だろう<br><br>このまま<span class="ruby"><span class="rb">今日</span><span class="rt">きょう</span></span>が<span class="ruby"><span class="rb">終</span><span class="rt">お</span></span>わり<span class="ruby"><span class="rb">明日</span><span class="rt">あした</span></span>が<span class="ruby"><span class="rb">来</span><span class="rt">く</span></span>れば<br>いつになっても<span class="ruby"><span class="rb">縮</span><span class="rt">ちぢ</span></span>まらないこの<span class="ruby"><span class="rb">距離</span><span class="rt">きょり</span></span>を<br><span class="ruby"><span class="rb">駆</span><span class="rt">か</span></span>け<span class="ruby"><span class="rb">引</span><span class="rt">ひ</span></span>きにも<span class="ruby"><span class="rb">綱引</span><span class="rt">つなひ</span></span>きにもならないやり<span class="ruby"><span class="rb">取</span><span class="rt">と</span></span>りを<br>もっと<span class="ruby"><span class="rb">単純</span><span class="rt">たんじゅん</span></span>な<span class="ruby"><span class="rb">名前</span><span class="rt">なまえ</span></span>で<span class="ruby"><span class="rb">呼</span><span class="rt">よ</span></span>んであげられるよ<br><span class="ruby"><span class="rb">何</span><span class="rt">なに</span></span>ひとつ<span class="ruby"><span class="rb">終</span><span class="rt">お</span></span>われないけど<br><br>つまらない<span class="ruby"><span class="rb">言葉</span><span class="rt">ことば</span></span>の<span class="ruby"><span class="rb">繰</span><span class="rt">く</span></span>り<span class="ruby"><span class="rb">返</span><span class="rt">かえ</span></span>しで<br>つじつまもきっと<span class="ruby"><span class="rb">合</span><span class="rt">あ</span></span>ってない<span class="ruby"><span class="rb">物語</span><span class="rt">ものがたり</span></span>の<span class="ruby"><span class="rb">続</span><span class="rt">つづ</span></span>きに<br>ひとりよがりの<span class="ruby"><span class="rb">毎日</span><span class="rt">まいにち</span></span>に<br>ハッピーバースデー<br><span class="ruby"><span class="rb">君</span><span class="rt">きみ</span></span>に<span class="ruby"><span class="rb">言</span><span class="rt">い</span></span>って<span class="ruby"><span class="rb">欲</span><span class="rt">ほ</span></span>しいだけ<br><br>くだらない<span class="ruby"><span class="rb">話</span><span class="rt">はなし</span></span>は<span class="ruby"><span class="rb">思</span><span class="rt">おも</span></span>い<span class="ruby"><span class="rb">付</span><span class="rt">つ</span></span>くのに<br><span class="ruby"><span class="rb">君</span><span class="rt">きみ</span></span>を<span class="ruby"><span class="rb">抱</span><span class="rt">だ</span></span>き<span class="ruby"><span class="rb">締</span><span class="rt">し</span></span>めていい<span class="ruby"><span class="rb">理由</span><span class="rt">りゆう</span></span>だけが<span class="ruby"><span class="rb">見付</span><span class="rt">みつ</span></span>からない<br>ああそうかそうだよな<br>ハッピーバースデー <span class="ruby"><span class="rb">片想</span><span class="rt">かたおも</span></span>いの<span class="ruby"><span class="rb">俺</span><span class="rt">おれ</span></span><br><br>ハッピーバースデー <span class="ruby"><span class="rb">片想</span><span class="rt">かたおも</span></span>いの<span class="ruby"><span class="rb">俺</span><span class="rt">おれ</span></span><br>    </div>  </div></div>  <hr /><h1>原文地址</h1><a href="https://utaten.com/lyric/sa19011566/" target="_blank" >HAPPY BIRTHDAY 歌詞「back number」ふりがな付</a><style>.lyricBody {    background: #fff;    padding: 10px;    user-select: none;    letter-spacing: 1px;    line-height: 2.3;}.lyricBody div.large {    font-size: 21px;}.lyricBody div.large span.ruby {    line-height: 2.6;}.lyricBody div span.ruby {    margin-bottom: 0.55em;    display: inline-table;    position: relative;    vertical-align: bottom;}.lyricBody span.ruby span.rb {    display: table-row;    position: relative;    line-height: 1.2;}.lyricBody div.large span.ruby span.rt {    font-size: 14px;}.lyricBody span.ruby span.rt {    display: table-header-group;    line-height: 1.8;    color: #999;    white-space: nowrap;    text-align: center;    letter-spacing: -0.001em;    before: '(';    after: ')';}</style>]]></content>
      
      
      <categories>
          
          <category> 日语之路 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 日语 </tag>
            
            <tag> 歌曲 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>NHK《简明日语》第04课 ただいま。</title>
      <link href="/2021/07/16/NHK%E3%80%8A%E7%AE%80%E6%98%8E%E6%97%A5%E8%AF%AD%E3%80%8B%E7%AC%AC04%E8%AF%BE/"/>
      <url>/2021/07/16/NHK%E3%80%8A%E7%AE%80%E6%98%8E%E6%97%A5%E8%AF%AD%E3%80%8B%E7%AC%AC04%E8%AF%BE/</url>
      
        <content type="html"><![CDATA[<h1 id="NHK《简明日语》第04课"><a href="#NHK《简明日语》第04课" class="headerlink" title="NHK《简明日语》第04课"></a>NHK《简明日语》第04课</h1><h2 id="课程简介"><a href="#课程简介" class="headerlink" title="课程简介"></a>课程简介</h2><p>安娜带着小樱，回到了自己住的学生宿舍。舍监出来迎接她们。</p><h2 id="教材详情"><a href="#教材详情" class="headerlink" title="教材详情"></a>教材详情</h2><h3 id="ただいま。"><a href="#ただいま。" class="headerlink" title="ただいま。"></a>ただいま。</h3><ul><li>アンナ: ただいま。 &#x2F;&#x2F; 我回来了。</li><li>寮母: お帰りなさい。 &#x2F;&#x2F; 你回来了。</li><li>さくら: こんにちは。 &#x2F;&#x2F; 您好。</li><li>寮母: あなたも留学生ですか。 &#x2F;&#x2F; 你也是留学生吗？</li><li>さくら: いいえ、私は留学生ではありません。 &#x2F;&#x2F; 不，我不是留学生。<br>日本人の学生です。 &#x2F;&#x2F; 我是日本学生。</li></ul><h3 id="语法要点"><a href="#语法要点" class="headerlink" title="语法要点"></a>语法要点</h3><p>____ではありません。  &#x2F;&#x2F; （不是~~ ）</p><blockquote><p>「です」是放在句尾表示郑重语气的说法。例如，「はい、私（わたし）は日本人（にほんじん）です。」（是的，我是日本人。）</p><p>「ではありません」是「です」的否定形。例如，「いいえ、私は日本人ではありません。」（不，我不是日本人。）</p></blockquote><blockquote><p>否定句的造句方法<br>以“我是日本人”为例，“我”是「私（わたし）」，“日本人”是「日本人（にほんじん）」，所以“我是日本人”用日语说就是「私は日本人です」。以「です」结尾的句子变成否定句时，要把「です」变成「ではありません」。“我不是日本人”就是「私は日本人ではありません」。</p></blockquote><h3 id="单词"><a href="#单词" class="headerlink" title="单词"></a>单词</h3><table><thead><tr><th>ただいま</th><th>お帰りなさい</th></tr></thead><tbody><tr><td><strong>我回来了</strong></td><td><strong>你回来了</strong></td></tr><tr><td>「ただいま」是回家时说的寒暄语。</td><td>「お帰りなさい」是对回到家的人说的寒暄语。</td></tr></tbody></table><table><thead><tr><th>こんにちは</th></tr></thead><tbody><tr><td><strong>你好</strong></td></tr><tr><td>「こんにちは」是白天和他人见面时说的寒暄语。</td></tr></tbody></table><table><thead><tr><th>おはようございます</th><th>こんばんは</th></tr></thead><tbody><tr><td><strong>早上好</strong></td><td><strong>晚上好</strong></td></tr><tr><td>「おはようございます」是早上说的寒暄语。</td><td>「こんばんは」是晚上说的寒暄语。</td></tr></tbody></table><table><thead><tr><th>あなた</th></tr></thead><tbody><tr><td><strong>你</strong></td></tr></tbody></table><table><thead><tr><th>いいえ</th><th>はい</th></tr></thead><tbody><tr><td><strong>不</strong></td><td><strong>是的</strong></td></tr></tbody></table><p>教材：<a href="https://www.nhk.or.jp/lesson/update/pdf/le4_zh_t.pdf">https://www.nhk.or.jp/lesson/update/pdf/le4_zh_t.pdf</a></p><h2 id="我的收获"><a href="#我的收获" class="headerlink" title="我的收获"></a>我的收获</h2><ul><li>「ただいま。」和「お帰りなさい。」是一对常用语，可以放在一起记忆。在看日本动漫时也经常听到动漫角色回家是这么说。</li></ul><h2 id="课程地址"><a href="#课程地址" class="headerlink" title="课程地址"></a>课程地址</h2><p><a href="https://www.nhk.or.jp/lesson/chinese/learn/list/4.html">https://www.nhk.or.jp/lesson/chinese/learn/list/4.html</a></p>]]></content>
      
      
      <categories>
          
          <category> 日语之路 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 日语 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Linux常用命令 《Linux就该这么学》</title>
      <link href="/2021/07/15/Linux%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/"/>
      <url>/2021/07/15/Linux%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/</url>
      
        <content type="html"><![CDATA[<h1 id="Linux常用基本命令"><a href="#Linux常用基本命令" class="headerlink" title="Linux常用基本命令"></a>Linux常用基本命令</h1><blockquote><p>Shell就是终端程序的统称，它担当起了人与内核（硬件）之间的翻译工作，用户把一些命令“告诉”终端程序，它就会调用相应的程序服务去完成某些工作。现在包括红帽系统在内的许多主流Linux系统默认使用的终端是Bash（Bourne-Again SHell）解释器。</p></blockquote><p>Linux命令的参数长格式与短格式示例</p><table><thead><tr><th>长格式</th><th>短格式</th></tr></thead><tbody><tr><td>man –help</td><td>man -h</td></tr></tbody></table><h2 id="man"><a href="#man" class="headerlink" title="man"></a>man</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">man man</span><br></pre></td></tr></table></figure><h2 id="快捷键"><a href="#快捷键" class="headerlink" title="快捷键"></a>快捷键</h2><ul><li>ctrl+c：停止脚本</li><li>ctrl+d：退出终端</li><li>ctrl+l：清屏</li><li>ctrl+shift+c：Ubuntu终端中复制选中文本</li><li>ctrl+shift+v：Ubuntu终端中粘贴文本</li></ul><h2 id="echo"><a href="#echo" class="headerlink" title="echo"></a>echo</h2><p>echo  [字符串] [$变量]  </p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">echo xtongs.com $SHELL</span><br></pre></td></tr></table></figure><p>显示</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">xtongs.com /bin/bash</span><br></pre></td></tr></table></figure><h2 id="date"><a href="#date" class="headerlink" title="date"></a>date</h2><p>date [+指定的格式]<br>在打包文件时常常用到。</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">date &quot;+%Y-%m-%d %H:%M:%S&quot;</span><br></pre></td></tr></table></figure><p>显示</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">2021-07-15 21:12:17</span><br></pre></td></tr></table></figure><h2 id="关机与重启"><a href="#关机与重启" class="headerlink" title="关机与重启"></a>关机与重启</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">poweroff</span><br><span class="line">reboot</span><br></pre></td></tr></table></figure><h2 id="wget"><a href="#wget" class="headerlink" title="wget"></a>wget</h2><blockquote><p>wget命令用于在终端命令行里下载网络文件，英文全称为：“web get”，语法格式为：“wget [参数] 网址”。</p></blockquote><h2 id="ps-和-pstree"><a href="#ps-和-pstree" class="headerlink" title="ps 和 pstree"></a>ps 和 pstree</h2><blockquote><p>ps命令用于查看系统中的进程状态，英文全称为：“processes”，语法格式为：“ps [参数]”。</p></blockquote><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">下面三条命令是一样的，ps命令允许省略`-`</span></span><br><span class="line">ps aux</span><br><span class="line">ps -aux</span><br><span class="line">ps -a -u -x</span><br></pre></td></tr></table></figure><blockquote><p>pstree命令用于以树状图的形式展示进程之间的关系，英文全称为：“process tree”，输入后回车执行即可。</p></blockquote><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pstree</span><br></pre></td></tr></table></figure><p>显示</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">systemd─┬─ModemManager───2*[&#123;ModemManager&#125;]</span><br><span class="line">        ├─NetworkManager───2*[&#123;NetworkManager&#125;]</span><br><span class="line">        ├─accounts-daemon───2*[&#123;accounts-daemon&#125;]</span><br><span class="line">        ├─acpid</span><br><span class="line">        ├─avahi-daemon───avahi-daemon</span><br><span class="line">        ├─bluetoothd</span><br><span class="line">        ├─boltd───2*[&#123;boltd&#125;]</span><br><span class="line">        ├─colord───2*[&#123;colord&#125;]</span><br><span class="line">...省略...</span><br></pre></td></tr></table></figure><h2 id="top"><a href="#top" class="headerlink" title="top"></a>top</h2><blockquote><p>top命令用于动态地监视进程活动及系统负载等信息，输入后回车执行即可。</p></blockquote><h2 id="pidof"><a href="#pidof" class="headerlink" title="pidof"></a>pidof</h2><blockquote><p>pidof命令用于查询某个指定服务进程的PID号码值，语法格式为：“pidof [参数] 服务名称”。</p></blockquote><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pidof systemd</span><br><span class="line">3816</span><br></pre></td></tr></table></figure><h2 id="kill"><a href="#kill" class="headerlink" title="kill"></a>kill</h2><blockquote><p>kill命令用于终止某个指定PID值的服务进程，语法格式为：“kill [参数] 进程的PID”。<br>但也有时候会提示进程无法被终止，则可以加参数-9，代表最高级别的强制杀死进程</p></blockquote><h2 id="ifconfig"><a href="#ifconfig" class="headerlink" title="ifconfig"></a>ifconfig</h2><blockquote><p>ifconfig命令用于获取网卡配置与网络状态等信息，英文全称为：“interface config”，语法格式为：“ifconfig [参数] [网络设备]”。</p></blockquote><h2 id="uname"><a href="#uname" class="headerlink" title="uname"></a>uname</h2><blockquote><p>uname命令用于查看系统内核版本与系统架构等信息，英文全称为：“Unix name”，语法格式为：“uname [-a]”。</p></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">xtong@xtong-TM1704:~$ uname -a</span><br><span class="line">Linux xtong-TM1704 5.8.0-59-generic #66~20.04.1-Ubuntu SMP Thu Jun 17 11:14:10 UTC 2021 x86_64 x86_64 x86_64 GNU/Linux</span><br></pre></td></tr></table></figure><h2 id="uptime"><a href="#uptime" class="headerlink" title="uptime"></a>uptime</h2><blockquote><p>它可以显示当前系统时间、系统已运行时间、启用终端数量以及平均负载值等信息。平均负载值指的是系统在最近1分钟、5分钟、15分钟内的压力情况，负载值越低越好</p></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">xtong@xtong-TM1704:~$ uptime</span><br><span class="line"> 21:48:50 up 6 days, 15:31,  1 user,  load average: 0.79, 0.83, 0.72</span><br></pre></td></tr></table></figure><h2 id="free"><a href="#free" class="headerlink" title="free"></a>free</h2><blockquote><p>free命令用于显示当前系统中内存的使用量信息，语法格式为：“free [-h]”。</p></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">xtong@xtong-TM1704:~$ free -m</span><br><span class="line">              总计         已用        空闲      共享    缓冲/缓存    可用</span><br><span class="line">内存：        7869        4126         839         906        2903        2544</span><br><span class="line">交换：        8191         834        7357</span><br><span class="line">xtong@xtong-TM1704:~$ free -h</span><br><span class="line">              总计         已用        空闲      共享    缓冲/缓存    可用</span><br><span class="line">内存：       7.7Gi       4.0Gi       844Mi       899Mi       2.8Gi       2.5Gi</span><br><span class="line">交换：       8.0Gi       834Mi       7.2Gi</span><br></pre></td></tr></table></figure><h2 id="who"><a href="#who" class="headerlink" title="who"></a>who</h2><blockquote><p>who命令用于查看当前登入主机的用户终端信息，输入后回车执行即可。</p></blockquote><h2 id="last"><a href="#last" class="headerlink" title="last"></a>last</h2><p>调取主机的被访记录。</p><h2 id="tracepath"><a href="#tracepath" class="headerlink" title="tracepath"></a>tracepath</h2><blockquote><p>tracepath命令用于显示数据包达到目的主机途中所经过的路由信息，语法格式为：“tracepath [参数] 域名”。</p></blockquote><h2 id="netstat"><a href="#netstat" class="headerlink" title="netstat"></a>netstat</h2><blockquote><p>netstat命令用于显示如网络连接、路由表、接口状态等的网络相关信息，英文全称为：“network status”，语法格式为：“netstat [参数]”。</p></blockquote><h2 id="history"><a href="#history" class="headerlink" title="history"></a>history</h2><blockquote><p>history命令用于显示执行过的命令历史，语法格式为：“history [-c]”。</p></blockquote><h2 id="pwd"><a href="#pwd" class="headerlink" title="pwd"></a>pwd</h2><blockquote><p>pwd命令用于显示用户当前所处的工作目录，英文全称为：“print working directory”，输入后回车执行即可。</p></blockquote><h1 id="其他常用命令"><a href="#其他常用命令" class="headerlink" title="其他常用命令"></a>其他常用命令</h1><ul><li>查看硬件信息相关命令（8个）<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ifconfig free fdisk ethtool mii-tool dmidecode dmesg lspci</span><br></pre></td></tr></table></figure></li><li>其他<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">echo printf rpm yum watch alias unalias date clear</span><br><span class="line">history eject time nohup nc xargs exec export unset type</span><br></pre></td></tr></table></figure></li><li>系统性能监视高级命令(12个)<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">uptime top free vmstat mpstat iostat sar chkconfig</span><br></pre></td></tr></table></figure></li><li>内存<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">top free vmstat mpstat iostat sar</span><br></pre></td></tr></table></figure></li><li>CPU<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">top vmstat mpstat iostat sar</span><br></pre></td></tr></table></figure></li><li>I&#x2F;O<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vmstat mpstat iostat sar</span><br></pre></td></tr></table></figure></li><li>进程<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ipcs ipcrm lsof strace lstrace</span><br></pre></td></tr></table></figure></li><li>负载<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">uptime mount umount df du fsck dd dumpe2fs dump</span><br></pre></td></tr></table></figure></li><li>关机和查看系统信息的命令（3个）<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">shutdown halt init</span><br></pre></td></tr></table></figure></li><li>系统管理相关命令（8个）<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">uptime top free vmstat mpstat iostat sar chkconfig</span><br></pre></td></tr></table></figure></li><li>系统安全相关命令（10个）<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chmod chown chgrp chage passwd su sudo umask chattr</span><br></pre></td></tr></table></figure></li></ul><h1 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h1><p>文章：<a href="https://www.linuxprobe.com/linux-command-skill.html" target="_blank" >《实用技能：60个常用的Linux命令》</a>    </p><hr><p>图书：《Linux就该这么学》  </p><img src="/2021/07/15/Linux%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/post-linux.png" class=""><hr><p>地址：<a href="https://book.douban.com/subject/27198046/">https://book.douban.com/subject/27198046/</a><br>在线阅读：<a href="https://www.linuxprobe.com/basic-learning-00.html">https://www.linuxprobe.com/basic-learning-00.html</a><br>PDF在线阅读：<a href="https://www.linuxprobe.com/docs/LinuxProbe.pdf">https://www.linuxprobe.com/docs/LinuxProbe.pdf</a></p>]]></content>
      
      
      <categories>
          
          <category> 技术坑记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 阅读 </tag>
            
            <tag> Linux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>GTD引子清单 《搞定》的引子清单</title>
      <link href="/2021/07/14/GTD%E5%BC%95%E5%AD%90%E6%B8%85%E5%8D%95/"/>
      <url>/2021/07/14/GTD%E5%BC%95%E5%AD%90%E6%B8%85%E5%8D%95/</url>
      
        <content type="html"><![CDATA[<h1 id="GTD引子清单"><a href="#GTD引子清单" class="headerlink" title="GTD引子清单"></a>GTD引子清单</h1><h2 id="工作方面"><a href="#工作方面" class="headerlink" title="工作方面"></a>工作方面</h2><ul><li><p>已经启动、尚未完成的项目</p></li><li><p>需要启动的项目</p></li><li><p>需要“调查研究”的项目</p></li><li><p>对他人的承诺</p><blockquote><p>老板、合伙人、同事、下属、机构中的其他人、其他专业人士、客户、其他机构</p></blockquote></li><li><p>要做的沟通</p><blockquote><p>电话、电子邮件、语音留言、传真、信函、备忘录</p></blockquote></li><li><p>要撰写或提交的材料</p></li></ul><blockquote><p>报告、评估报告、回顾、提案、文章、促销材料、说明书、总结、会议记录、编辑和修改的材料、现状报告、谈话和沟通记录</p></blockquote><ul><li>会议</li></ul><blockquote><p>即将召开、要求主持或应邀出席、要听取汇报</p></blockquote><ul><li>阅读&#x2F;回顾</li></ul><blockquote><p>书籍、期刊、文章</p></blockquote><ul><li>财务</li></ul><blockquote><p>现金、预算、资产负债表、损益表、最高赊账限额、应付账款、应收账款、小额现金、银行、投资人、资产管理</p></blockquote><ul><li>计划&#x2F;组织</li></ul><blockquote><p>目标、下一个目标、短期目标、企业规划、营销计划、财务计划、即将发生的事件、发言、会议、例会、出差、休假</p></blockquote><ul><li>组织发展</li></ul><blockquote><p>组织结构图、重新调整、上下级关系、岗位描述、设施、新系统、改革动议、领导风格、接班计划、文化</p></blockquote><ul><li>管理</li></ul><blockquote><p>法律问题、保险、人事、员工、政策&#x2F;步骤、培训</p></blockquote><ul><li>员工</li></ul><blockquote><p>招聘、辞退、总结、员工发展、沟通、士气、反馈、报酬</p></blockquote><ul><li>系统</li></ul><blockquote><p>电话、电脑、软件、数据库、办公设备、打印机、传真机、档案、储存、家具、修理、装饰、办公用品、名片、文具、个人组织用品</p></blockquote><ul><li>销售</li></ul><blockquote><p>客户、未来客户、大客户、销售流程、培训、关系建立、报告、关系追踪、客户服务</p></blockquote><ul><li>营销&#x2F;促销</li></ul><blockquote><p>促销活动、材料、公共关系</p></blockquote><ul><li>等待事务</li></ul><blockquote><p>信息、委派的项目&#x2F;任务、项目要件、沟通的答复、提案的反馈、问题的回答、提交物品要求反馈&#x2F;报销、票据、继续执行或完成项目的必要的外部行动……（决策、变化、实施等）、订购</p></blockquote><ul><li>职业发展</li></ul><blockquote><p>培训、研讨会、要学的知识、要了解的情况、要培养或练习的技能、要读的书、研究、正规教育（资格证书、学位）、事业研究、简历</p></blockquote><ul><li>着装</li></ul><blockquote><p>职业装</p></blockquote><h2 id="个人方面"><a href="#个人方面" class="headerlink" title="个人方面"></a>个人方面</h2><ul><li><p>已经启动、尚未完成的项目</p></li><li><p>需要启动的项目</p></li><li><p>项目-其他组织</p></li></ul><blockquote><p>服务、社会团体、志愿者、公益机构</p></blockquote><ul><li>对他人的承诺</li></ul><blockquote><p>配偶、伴侣、孩子、父母、家人、朋友、职业人士</p></blockquote><ul><li>要做的沟通</li></ul><blockquote><p>电话、电子邮件、传真、卡片、信函、感谢信</p></blockquote><ul><li>即将发生的事件</li></ul><blockquote><p>生日、周年庆典、婚礼、毕业、外出游玩、假日、长假、旅行、宴会、聚会、招待会、文娱活动、体育活动</p></blockquote><ul><li>家庭</li></ul><blockquote><p>与配偶、伴侣、孩子、父母和亲戚的项目&#x2F;活动</p></blockquote><ul><li>管理</li></ul><blockquote><p>家用办公用品、设备、电话、语音留言机、电脑、网络、电视、DVD、家用电器、消遣物、归档、储存、工具</p></blockquote><ul><li>休闲娱乐</li></ul><blockquote><p>数据、音乐、录像带、旅行、要去的地方、要看望的人、网络搜索、照片、运动设备、业余爱好、烹饪、消遣</p></blockquote><ul><li>财务</li></ul><blockquote><p>账单、银行、投资、带宽、纳税、预算、保险、抵押、会计</p></blockquote><ul><li>法律</li></ul><blockquote><p>遗嘱、信托、资产、法律事务</p></blockquote><ul><li>等待事务</li></ul><blockquote><p>邮件订购、修理、报销、出借物、信息、对请柬的答复</p></blockquote><ul><li>家庭&#x2F;家务事</li></ul><blockquote><p>不动产、修理、建筑、重新装修、房东、取暖和制冷、下水道、电、屋顶、景观、车道、车库、墙壁、地板、天花板、装饰物、家具、公用设施、家用电器、电灯电线、厨房用品、洗衣机、要清晰&#x2F;打扫&#x2F;整理的地方和储物空间</p></blockquote><ul><li>健康</li></ul><blockquote><p>保健、医生、牙医、验光师、专科医生、体检、饮食、食品、锻炼</p></blockquote><ul><li>个人发展</li></ul><blockquote><p>上课、研讨会、教育、培养、事业、创作</p></blockquote><ul><li>交通</li></ul><blockquote><p>汽车、自行车、摩托车、维护、修理、上下班、票据、预定</p></blockquote><ul><li>衣服</li></ul><blockquote><p>职业装、便装、正装、运动装、配饰、行李、修补、定做</p></blockquote><ul><li>宠物</li></ul><blockquote><p>健康、训练、用品</p></blockquote><ul><li>外出事宜</li></ul><blockquote><p>五金商店、药店、报货商店、银行、洗衣店、文具店、购物中心、礼品店、办公用品店、杂货店</p></blockquote><ul><li>社区</li></ul><blockquote><p>邻居、服务工作、学校、社会活动</p></blockquote><h1 id="参考书籍"><a href="#参考书籍" class="headerlink" title="参考书籍"></a>参考书籍</h1><img src="/2021/07/14/GTD%E5%BC%95%E5%AD%90%E6%B8%85%E5%8D%95/post-gtd-1.jpg" class=""><hr><p>图书：《搞定I》</p><p>地址：<a href="https://book.douban.com/subject/26612471/">https://book.douban.com/subject/26612471/</a></p>]]></content>
      
      
      <categories>
          
          <category> 思考札记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> GTD </tag>
            
            <tag> 阅读 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>项目中软删除的实现思路 改造phalapi框架实现软删除</title>
      <link href="/2021/07/13/%E9%A1%B9%E7%9B%AE%E4%B8%AD%E8%BD%AF%E5%88%A0%E9%99%A4%E7%9A%84%E5%AE%9E%E7%8E%B0%E6%80%9D%E8%B7%AF/"/>
      <url>/2021/07/13/%E9%A1%B9%E7%9B%AE%E4%B8%AD%E8%BD%AF%E5%88%A0%E9%99%A4%E7%9A%84%E5%AE%9E%E7%8E%B0%E6%80%9D%E8%B7%AF/</url>
      
        <content type="html"><![CDATA[<h1 id="什么是软删除"><a href="#什么是软删除" class="headerlink" title="什么是软删除"></a>什么是软删除</h1><p>软删除也叫逻辑删除，指在数据库中使用标记字段表示数据的删除状态，而不是正真删除数据。</p><h1 id="为什么要用软删除"><a href="#为什么要用软删除" class="headerlink" title="为什么要用软删除"></a>为什么要用软删除</h1><p>项目在生产环境中产生的数据，即使在业务上删除的数据，也有存在的意义，彻底的抹去这些已删除数据可能会对我们进行数据分析产生影响。<br>使用软删除保证了数据的完整性，另外在定位程序问题上也有一定的帮助。  </p><h1 id="实现思路"><a href="#实现思路" class="headerlink" title="实现思路"></a>实现思路</h1><p>我的习惯是，在需要软删除的业务表中，加入以下4个字段：</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- MySQL 举例 --</span></span><br><span class="line">`status` tinyint(<span class="number">3</span>) <span class="keyword">NOT NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;1&#x27;</span> COMMENT <span class="string">&#x27;状态（1正常，2更新，3删除）&#x27;</span>,</span><br><span class="line">`created_at` <span class="type">bigint</span>(<span class="number">13</span>) <span class="keyword">NOT NULL</span> COMMENT <span class="string">&#x27;创建时间&#x27;</span>,</span><br><span class="line">`updated_at` <span class="type">bigint</span>(<span class="number">13</span>) <span class="keyword">NOT NULL</span> COMMENT <span class="string">&#x27;最后更新时间&#x27;</span>,</span><br><span class="line">`deleted_at` <span class="type">bigint</span>(<span class="number">13</span>) <span class="keyword">NOT NULL</span> COMMENT <span class="string">&#x27;删除时间&#x27;</span>,</span><br><span class="line"><span class="comment">-- 也可以使用created、updated、deleted，字段类型可以根据业务来定，可以使用datetime --</span></span><br></pre></td></tr></table></figure><p>然后在框架中，修改原来的对应数据库操作逻辑：</p><ul><li>add：增加当前时间戳(created_at&#x2F;created)</li><li>update：更新当前时间戳(updated_at&#x2F;updated)，更新status&#x3D;2</li><li>delete：更新当前时间戳(deleted_at&#x2F;deleted)，更新status&#x3D;3</li><li>查询：增加查询条件<code>status&lt;3</code></li></ul><h2 id="在PHP的phalapi框架下改造软删除的示例"><a href="#在PHP的phalapi框架下改造软删除的示例" class="headerlink" title="在PHP的phalapi框架下改造软删除的示例"></a>在PHP的phalapi框架下改造软删除的示例</h2><p>原框架中没有内置软删除功能，我们需要修改框架的 DataModel 类中的方法来实现。<br>我们不要去直接修改 DataModel 类，而是创建一个 Model 类继承自 DataModel。</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Model</span> <span class="keyword">extends</span> <span class="title">DataModel</span></span></span><br></pre></td></tr></table></figure><p>然后重写以下的方法，让项目中的 业务表Model 继承于我们创建的这个 Model类。</p><ul><li>插入 insert<ul><li>自动插入创建时间 created</li></ul></li><li>更新 updateAll 和 update<ul><li>自动更新更新时间 updated</li><li>自动更新数据状态 status &#x3D; 2（已更新）</li></ul></li><li>删除 deleteAll 和 deleteIds<ul><li>原删除 delete 操作改为 更新 update 操作</li><li>自动更新删除时间 deleted</li><li>自动更新数据状态 status &#x3D; 3（已删除）</li></ul></li><li>查询 getList、getDataMoreBy、count<ul><li>查询条件增加软删除状态过滤，status &lt; 3 （已删除）</li></ul></li></ul><p>当然，修改完 Model 之后，别忘了每张数据表也都应该修改，必须包含<code>status、created、updated、deleted</code>四个字段。</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/** ---------------- 插入操作 ---------------- **/</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">insert</span>(<span class="params"><span class="variable">$data</span>, <span class="variable">$id</span> = <span class="literal">NULL</span></span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">// 创建时间 xtongs</span></span><br><span class="line">    <span class="variable">$data</span>[<span class="string">&#x27;created&#x27;</span>] = <span class="title function_ invoke__">date</span>(<span class="string">&#x27;Y-m-d H:i:s&#x27;</span>);</span><br><span class="line">    <span class="variable">$id</span> = <span class="built_in">parent</span>::<span class="title function_ invoke__">insert</span>(<span class="variable">$data</span>, <span class="variable">$id</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="variable">$id</span> !== <span class="literal">FALSE</span> ? <span class="title function_ invoke__">intval</span>(<span class="variable">$id</span>) : <span class="variable">$id</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/** ---------------- 更新操作 ---------------- **/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 更新全部数据</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> string|array $where 查询条件，例如：id = 1，或数组形式array(&#x27;id&#x27; =&gt; 1)</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> array $updateData</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> int|boolean 返回更新的条数</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">updateAll</span>(<span class="params"><span class="variable">$where</span>, <span class="keyword">array</span> <span class="variable">$updateData</span></span>) </span>&#123;</span><br><span class="line">    <span class="comment">// 更新时间 xtongs</span></span><br><span class="line">    <span class="variable">$updateData</span>[<span class="string">&#x27;updated&#x27;</span>] = <span class="title function_ invoke__">date</span>(<span class="string">&#x27;Y-m-d H:i:s&#x27;</span>);</span><br><span class="line">    <span class="variable">$updateData</span>[<span class="string">&#x27;status&#x27;</span>] = <span class="title class_">Constant</span>::<span class="variable constant_">STATUS_UPDATE</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">$this</span>-&gt;<span class="title function_ invoke__">getORM</span>()-&gt;<span class="title function_ invoke__">where</span>(<span class="variable">$where</span>)-&gt;<span class="title function_ invoke__">update</span>(<span class="variable">$updateData</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">update</span>(<span class="params"><span class="variable">$id</span>, <span class="variable">$data</span></span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">// 更新时间 xtongs</span></span><br><span class="line">    <span class="variable">$updateData</span>[<span class="string">&#x27;updated&#x27;</span>] = <span class="title function_ invoke__">date</span>(<span class="string">&#x27;Y-m-d H:i:s&#x27;</span>);</span><br><span class="line">    <span class="variable">$updateData</span>[<span class="string">&#x27;status&#x27;</span>] = <span class="title class_">Constant</span>::<span class="variable constant_">STATUS_UPDATE</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">parent</span>::<span class="title function_ invoke__">update</span>(<span class="variable">$id</span>, <span class="variable">$data</span>); <span class="comment">// <span class="doctag">TODO:</span> Change the autogenerated stub</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/** ---------------- 删除操作 ---------------- **/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 删除全部</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> string|array $where 查询条件，例如：id = 1，或数组形式array(&#x27;id&#x27; =&gt; 1)</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> int|boolean 返回删除的条数</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">deleteAll</span>(<span class="params"><span class="variable">$where</span></span>) </span>&#123;</span><br><span class="line">    <span class="comment">// 软删除，删除时间 xtongs</span></span><br><span class="line">    <span class="variable">$updateData</span>[<span class="string">&#x27;deleted&#x27;</span>] = <span class="title function_ invoke__">date</span>(<span class="string">&#x27;Y-m-d H:i:s&#x27;</span>);</span><br><span class="line">    <span class="variable">$updateData</span>[<span class="string">&#x27;status&#x27;</span>] = <span class="title class_">Constant</span>::<span class="variable constant_">STATUS_DELETE</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">$this</span>-&gt;<span class="title function_ invoke__">getORM</span>()-&gt;<span class="title function_ invoke__">where</span>(<span class="variable">$where</span>)-&gt;<span class="title function_ invoke__">update</span>(<span class="variable">$updateData</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 根据多个ID删除</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> string|array $ids</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> int|boolean 返回删除的条数</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">deleteIds</span>(<span class="params"><span class="variable">$ids</span></span>) </span>&#123;</span><br><span class="line">    <span class="comment">// 软删除，删除时间 xtongs</span></span><br><span class="line">    <span class="variable">$updateData</span>[<span class="string">&#x27;deleted&#x27;</span>] = <span class="title function_ invoke__">date</span>(<span class="string">&#x27;Y-m-d H:i:s&#x27;</span>);</span><br><span class="line">    <span class="variable">$updateData</span>[<span class="string">&#x27;status&#x27;</span>] = <span class="title class_">Constant</span>::<span class="variable constant_">STATUS_DELETE</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">$this</span>-&gt;<span class="title function_ invoke__">getORM</span>()-&gt;<span class="title function_ invoke__">where</span>(<span class="string">&#x27;id&#x27;</span>, <span class="variable">$ids</span>)-&gt;<span class="title function_ invoke__">update</span>(<span class="variable">$updateData</span>);</span><br><span class="line">&#125;  </span><br><span class="line"></span><br><span class="line"><span class="comment">/** ---------------- 查询操作 ---------------- **/</span></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 根据条件，取列表数组</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> string|array $where 查询条件</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> array $whereParams 更复杂查询条件时的动态参数</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> string|array $select 需要获取的字段</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> string $order 排序</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> int $page 第几页</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> int $perpage 分页数量</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> array 没有时返回空数组</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">getList</span>(<span class="params"><span class="variable">$where</span> = <span class="literal">NULL</span>, <span class="variable">$whereParams</span> = <span class="keyword">array</span>(<span class="params"></span>), <span class="variable">$select</span> = <span class="string">&#x27;*&#x27;</span>, <span class="variable">$order</span> = <span class="literal">NULL</span>, <span class="variable">$page</span> = <span class="number">1</span>, <span class="variable">$perpage</span> = <span class="number">0</span></span>) </span>&#123;</span><br><span class="line">    <span class="variable">$page</span> = <span class="title function_ invoke__">intval</span>(<span class="variable">$page</span>);</span><br><span class="line">    <span class="variable">$perpage</span> = <span class="title function_ invoke__">intval</span>(<span class="variable">$perpage</span>);</span><br><span class="line">    <span class="variable">$orm</span> = <span class="variable language_">$this</span>-&gt;<span class="title function_ invoke__">getORM</span>();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 软删除标记 xtongs</span></span><br><span class="line">    <span class="variable">$where</span>[<span class="string">&#x27;status &lt; ?&#x27;</span>] = <span class="title class_">Constant</span>::<span class="variable constant_">STATUS_DELETE</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 条件</span></span><br><span class="line">    <span class="keyword">if</span> (!<span class="keyword">empty</span>(<span class="variable">$where</span>) &amp;&amp; !<span class="keyword">empty</span>(<span class="variable">$whereParams</span>)) &#123;</span><br><span class="line">        <span class="variable">$orm</span>-&gt;<span class="title function_ invoke__">where</span>(<span class="variable">$where</span>, <span class="variable">$whereParams</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (!<span class="keyword">empty</span>(<span class="variable">$where</span>)) &#123;</span><br><span class="line">        <span class="variable">$orm</span>-&gt;<span class="title function_ invoke__">where</span>(<span class="variable">$where</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 字段选择</span></span><br><span class="line">    <span class="variable">$select</span> = <span class="title function_ invoke__">is_array</span>(<span class="variable">$select</span>) ? <span class="title function_ invoke__">implode</span>(<span class="string">&#x27;,&#x27;</span>, <span class="variable">$select</span>) : <span class="variable">$select</span>;</span><br><span class="line">    <span class="variable">$orm</span>-&gt;<span class="title function_ invoke__">select</span>(<span class="variable">$select</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 排序</span></span><br><span class="line">    <span class="variable">$order</span> = <span class="title function_ invoke__">is_array</span>(<span class="variable">$order</span>) ? <span class="title function_ invoke__">implode</span>(<span class="string">&#x27;, &#x27;</span>, <span class="variable">$order</span>) : <span class="variable">$order</span>;</span><br><span class="line">    <span class="keyword">if</span> (!<span class="keyword">empty</span>(<span class="variable">$order</span>)) &#123;</span><br><span class="line">        <span class="variable">$orm</span>-&gt;<span class="title function_ invoke__">order</span>(<span class="variable">$order</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 分页</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="variable">$perpage</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="variable">$orm</span>-&gt;<span class="title function_ invoke__">page</span>(<span class="variable">$page</span>, <span class="variable">$perpage</span>)-&gt;<span class="title function_ invoke__">fetchAll</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="variable">$orm</span>-&gt;<span class="title function_ invoke__">fetchAll</span>();</span><br><span class="line">&#125;  </span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 获取多条纪录</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> string $field 需要查询的字段名，通常为主键或带有唯一索引的字段</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> string|int|float|NULL $value 查询的值</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> int $limit 需要获取的数量，为0时无限制，顺序获取</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> string|array $select 需要获取的字段</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> array 没有时返回空数组</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">getDataMoreBy</span>(<span class="params"><span class="variable">$field</span>, <span class="variable">$value</span>, <span class="variable">$limit</span> = <span class="number">0</span>, <span class="variable">$select</span> = <span class="string">&#x27;*&#x27;</span></span>) </span>&#123;</span><br><span class="line">    <span class="variable">$orm</span> = <span class="variable language_">$this</span>-&gt;<span class="title function_ invoke__">getORM</span>()</span><br><span class="line">        -&gt;<span class="title function_ invoke__">select</span>(<span class="title function_ invoke__">is_array</span>(<span class="variable">$select</span>) ? <span class="title function_ invoke__">implode</span>(<span class="string">&#x27;,&#x27;</span>, <span class="variable">$select</span>) : <span class="variable">$select</span>)</span><br><span class="line">        -&gt;<span class="title function_ invoke__">where</span>(<span class="variable">$field</span>, <span class="variable">$value</span>)</span><br><span class="line">        <span class="comment">// 软删除 xtongs</span></span><br><span class="line">        -&gt;<span class="title function_ invoke__">where</span>(<span class="string">&#x27;status &lt; ?&#x27;</span>, <span class="title class_">Constant</span>::<span class="variable constant_">STATUS_DELETE</span>);</span><br><span class="line">    <span class="variable">$limit</span> = <span class="title function_ invoke__">intval</span>(<span class="variable">$limit</span>);</span><br><span class="line">    <span class="keyword">if</span> (<span class="variable">$limit</span> &gt; <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="variable">$orm</span>-&gt;<span class="title function_ invoke__">limit</span>(<span class="number">0</span>, <span class="variable">$limit</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable">$orm</span>-&gt;<span class="title function_ invoke__">fetchAll</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 获取总数</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> string|array|NULL $where 统计条件</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> string $countBy 需要统计的字段名</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> int 总数</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">count</span>(<span class="params"><span class="variable">$where</span> = <span class="literal">NULL</span>, <span class="variable">$countBy</span> = <span class="string">&#x27;*&#x27;</span></span>) </span>&#123;</span><br><span class="line">    <span class="variable">$orm</span> = <span class="variable language_">$this</span>-&gt;<span class="title function_ invoke__">getORM</span>();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 软删除标记 xtongs</span></span><br><span class="line">    <span class="variable">$where</span>[<span class="string">&#x27;status &lt; ?&#x27;</span>] = <span class="title class_">Constant</span>::<span class="variable constant_">STATUS_DELETE</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 条件</span></span><br><span class="line">    <span class="keyword">if</span> (!<span class="keyword">empty</span>(<span class="variable">$where</span>)) &#123;</span><br><span class="line">        <span class="variable">$orm</span>-&gt;<span class="title function_ invoke__">where</span>(<span class="variable">$where</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="variable">$total</span> = <span class="variable">$orm</span>-&gt;<span class="title function_ invoke__">count</span>(<span class="variable">$countBy</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="title function_ invoke__">intval</span>(<span class="variable">$total</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 技术坑记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> php </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>《redis实战》学习笔记</title>
      <link href="/2021/07/12/redis%E5%AE%9E%E6%88%98/"/>
      <url>/2021/07/12/redis%E5%AE%9E%E6%88%98/</url>
      
        <content type="html"><![CDATA[<h1 id="《redis实战》学习"><a href="#《redis实战》学习" class="headerlink" title="《redis实战》学习"></a>《redis实战》学习</h1><p>之前看《redis实战》，记录了书中的一些内容方便查阅。</p><h2 id="redis的适用场景"><a href="#redis的适用场景" class="headerlink" title="redis的适用场景"></a>redis的适用场景</h2><ul><li>取最新 N 个数据的操作</li><li>排行榜应用，取 TOP N 操作</li><li>需要精准设定过期时间的应用</li><li>计数器应用</li><li>Uniq 操作，获取某段时间所有数据排重值</li><li>实时系统，反垃圾系统</li><li>Pub&#x2F;Sub 构建实时消息系统</li><li>构建队列系统</li><li>缓存</li></ul><h2 id="记录"><a href="#记录" class="headerlink" title="记录"></a>记录</h2><blockquote><p>setnx，如果 key 已经存在，返回 0，nx 是 not exist 的意思。</p></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">redis 127.0.0.1:6379&gt; get name</span><br><span class="line">&quot;HongWan&quot;</span><br><span class="line">redis 127.0.0.1:6379&gt; setnx name HongWan_new</span><br><span class="line">(integer) 0</span><br><span class="line">redis 127.0.0.1:6379&gt; get name</span><br><span class="line">&quot;HongWan&quot;</span><br><span class="line">redis 127.0.0.1:6379&gt;</span><br></pre></td></tr></table></figure><blockquote><p>setex，设置 key 对应的值为 string 类型的 value，并指定此键值对应的有效期。</p></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">redis 127.0.0.1:6379&gt; setex haircolor 10 red</span><br><span class="line">OK</span><br><span class="line">redis 127.0.0.1:6379&gt; get haircolor</span><br><span class="line">&quot;red&quot;</span><br><span class="line">redis 127.0.0.1:6379&gt; get haircolor</span><br><span class="line">(nil)</span><br><span class="line">redis 127.0.0.1:6379&gt;</span><br></pre></td></tr></table></figure><blockquote><p>setrange，设置指定 key 的 value 值的子字符串。<br>例如我们希望将 HongWan 的 126 邮箱替换为 gmail 邮箱，那么我们可以这样做:（其中的 8 是指从下标为 8（包含 8）的字符开始替换）</p></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">redis 127.0.0.1:6379&gt; get name</span><br><span class="line">&quot;HongWan@126.com&quot;</span><br><span class="line">redis 127.0.0.1:6379&gt; setrange name 8 gmail.com</span><br><span class="line">(integer) 17</span><br><span class="line">redis 127.0.0.1:6379&gt; get name</span><br><span class="line">&quot;HongWan@gmail.com&quot;</span><br><span class="line">redis 127.0.0.1:6379&gt;</span><br></pre></td></tr></table></figure><blockquote><p>mset，一次设置多个 key 的值，成功返回 ok 表示所有的值都设置了，失败返回 0 表示没有任何值<br>被设置。</p></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">redis 127.0.0.1:6379&gt; mset key1 HongWan1 key2 HongWan2</span><br><span class="line">OK</span><br><span class="line">redis 127.0.0.1:6379&gt; get key1</span><br><span class="line">&quot;HongWan1&quot;</span><br><span class="line">redis 127.0.0.1:6379&gt; get key2</span><br><span class="line">&quot;HongWan2&quot;</span><br><span class="line">redis 127.0.0.1:6379&gt;</span><br></pre></td></tr></table></figure><blockquote><p>getset，设置 key 的值，并返回 key 的旧值。</p></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">redis 127.0.0.1:6379&gt; get name</span><br><span class="line">&quot;HongWan&quot;</span><br><span class="line">redis 127.0.0.1:6379&gt; getset name HongWan_new</span><br><span class="line">&quot;HongWan&quot;</span><br><span class="line">redis 127.0.0.1:6379&gt; get name</span><br><span class="line">&quot;HongWan_new&quot;</span><br><span class="line">redis 127.0.0.1:6379&gt;</span><br></pre></td></tr></table></figure><blockquote><p>incr，对 key 的值做加加操作,并返回新的值。注意 incr 一个不是 int 的 value 会返回错误，incr 一个不存在的 key，则设置 key 为 1</p></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">redis 127.0.0.1:6379&gt; set age 20</span><br><span class="line">OK</span><br><span class="line">redis 127.0.0.1:6379&gt; incr age</span><br><span class="line">(integer) 21</span><br><span class="line">redis 127.0.0.1:6379&gt; get age</span><br><span class="line">&quot;21&quot;</span><br><span class="line">redis 127.0.0.1:6379&gt;</span><br></pre></td></tr></table></figure><blockquote><p>decr，对 key 的值做的是减减操作，decr 一个不存在 key，则设置 key 为-1</p></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">redis 127.0.0.1:6379&gt; get age</span><br><span class="line">&quot;26&quot;</span><br><span class="line">redis 127.0.0.1:6379&gt; decr age</span><br><span class="line">(integer) 25</span><br><span class="line">redis 127.0.0.1:6379&gt; get age</span><br><span class="line">&quot;25&quot;</span><br><span class="line">redis 127.0.0.1:6379&gt;</span><br></pre></td></tr></table></figure><blockquote><p>append，给指定 key 的字符串值追加 value,返回新字符串值的长度。<br>例如我们向 name 的值追加一个@126.com 字符串，那么可以这样做:</p></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">redis 127.0.0.1:6379&gt; append name @126.com</span><br><span class="line">(integer) 15</span><br><span class="line">redis 127.0.0.1:6379&gt; get name</span><br><span class="line">&quot;HongWan@126.com&quot;</span><br><span class="line">redis 127.0.0.1:6379&gt;</span><br></pre></td></tr></table></figure><blockquote><p>strlen，取指定 key 的 value 值的长度。</p></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">redis 127.0.0.1:6379&gt; get name</span><br><span class="line">&quot;HongWan_new&quot;</span><br><span class="line">redis 127.0.0.1:6379&gt; strlen name</span><br><span class="line">(integer) 11</span><br><span class="line">redis 127.0.0.1:6379&gt; get age</span><br><span class="line">&quot;15&quot;</span><br><span class="line">redis 127.0.0.1:6379&gt; strlen age</span><br><span class="line">(integer) 2</span><br><span class="line">redis 127.0.0.1:6379&gt;</span><br></pre></td></tr></table></figure><h2 id="常用命令"><a href="#常用命令" class="headerlink" title="常用命令"></a>常用命令</h2><blockquote><p>keys *，返回满足给定 pattern 的所有 key</p></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">redis 127.0.0.1:6379&gt; keys *</span><br><span class="line">1) &quot;myzset2&quot;</span><br><span class="line">2) &quot;myzset3&quot;</span><br><span class="line">3) &quot;mylist&quot;</span><br><span class="line">4) &quot;myset2&quot;</span><br><span class="line">5) &quot;myset3&quot;</span><br><span class="line">6) &quot;myset4&quot;</span><br><span class="line">7) &quot;k_zs_1&quot;</span><br><span class="line">8) &quot;myset5&quot;</span><br><span class="line">9) &quot;myset6&quot;</span><br><span class="line">10) &quot;myset7&quot;</span><br><span class="line">11) &quot;myhash&quot;</span><br><span class="line">12) &quot;myzset&quot;</span><br><span class="line">13) &quot;age&quot;</span><br><span class="line">14) &quot;myset&quot;</span><br><span class="line">15) &quot;mylist5&quot;</span><br><span class="line">16) &quot;mylist6&quot;</span><br><span class="line">17) &quot;mylist7&quot;</span><br><span class="line">18) &quot;mylist8&quot;</span><br><span class="line">redis 127.0.0.1:6379&gt; keys mylist*</span><br><span class="line">1) &quot;mylist&quot;</span><br><span class="line">2) &quot;mylist5&quot;</span><br><span class="line">3) &quot;mylist6&quot;</span><br><span class="line">4) &quot;mylist7&quot;</span><br><span class="line">5) &quot;mylist8&quot;</span><br><span class="line">redis 127.0.0.1:6379&gt;</span><br></pre></td></tr></table></figure><blockquote><p>exists，确认一个 key 是否存在</p></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">redis 127.0.0.1:6379&gt; exists HongWan</span><br><span class="line">(integer) 0</span><br><span class="line">redis 127.0.0.1:6379&gt; exists age</span><br><span class="line">(integer) 1</span><br><span class="line">redis 127.0.0.1:6379&gt;</span><br></pre></td></tr></table></figure><blockquote><p>del，删除一个 key</p></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">redis 127.0.0.1:6379&gt; del age</span><br><span class="line">(integer) 1</span><br><span class="line">redis 127.0.0.1:6379&gt; exists age</span><br><span class="line">(integer) 0</span><br><span class="line">redis 127.0.0.1:6379&gt;</span><br></pre></td></tr></table></figure><blockquote><p>expire，设置一个 key 的过期时间(单位:秒)</p></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">redis 127.0.0.1:6379&gt; expire addr 10</span><br><span class="line">(integer) 1</span><br><span class="line">redis 127.0.0.1:6379&gt; ttl addr</span><br><span class="line">(integer) 8</span><br><span class="line">redis 127.0.0.1:6379&gt; ttl addr</span><br><span class="line">(integer) 1</span><br><span class="line">redis 127.0.0.1:6379&gt; ttl addr</span><br><span class="line">(integer) -1</span><br><span class="line">redis 127.0.0.1:6379&gt;</span><br></pre></td></tr></table></figure><blockquote><p>move，将当前数据库中的 key 转移到其它数据库中</p></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">redis 127.0.0.1:6379&gt; select 0</span><br><span class="line">OK</span><br><span class="line">redis 127.0.0.1:6379&gt; set age 30</span><br><span class="line">OK</span><br><span class="line">redis 127.0.0.1:6379&gt; get age</span><br><span class="line">&quot;30&quot;</span><br><span class="line">redis 127.0.0.1:6379&gt; move age 1</span><br><span class="line">(integer) 1</span><br><span class="line">redis 127.0.0.1:6379&gt; get age</span><br><span class="line">(nil)</span><br><span class="line">redis 127.0.0.1:6379&gt; select 1</span><br><span class="line">OK</span><br><span class="line">redis 127.0.0.1:6379[1]&gt; get age</span><br><span class="line">&quot;30&quot;</span><br><span class="line">redis 127.0.0.1:6379[1]&gt;</span><br></pre></td></tr></table></figure><blockquote><p>persist，移除给定 key 的过期时间</p></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">redis 127.0.0.1:6379[1]&gt; expire age 300</span><br><span class="line">(integer) 1</span><br><span class="line">redis 127.0.0.1:6379[1]&gt; ttl age</span><br><span class="line">(integer) 294</span><br><span class="line">redis 127.0.0.1:6379[1]&gt; persist age</span><br><span class="line">(integer) 1</span><br><span class="line">redis 127.0.0.1:6379[1]&gt; ttl age</span><br><span class="line">(integer) -1</span><br><span class="line">redis 127.0.0.1:6379[1]&gt;</span><br></pre></td></tr></table></figure><blockquote><p>randomkey，随机返回 key 空间的一个 key</p></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">redis 127.0.0.1:6379&gt; randomkey</span><br><span class="line">&quot;mylist7&quot;</span><br><span class="line">redis 127.0.0.1:6379&gt; randomkey</span><br><span class="line">&quot;mylist5&quot;</span><br><span class="line">redis 127.0.0.1:6379&gt;</span><br></pre></td></tr></table></figure><blockquote><p>rename，重命名 key</p></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">redis 127.0.0.1:6379[1]&gt; keys *</span><br><span class="line">1) &quot;age&quot;</span><br><span class="line">redis 127.0.0.1:6379[1]&gt; rename age age_new</span><br><span class="line">OK</span><br><span class="line">redis 127.0.0.1:6379[1]&gt; keys *</span><br><span class="line">1) &quot;age_new&quot;</span><br><span class="line">redis 127.0.0.1:6379[1]&gt;</span><br></pre></td></tr></table></figure><blockquote><p>type，返回值的类型</p></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">redis 127.0.0.1:6379&gt; type addr</span><br><span class="line">string</span><br><span class="line">redis 127.0.0.1:6379&gt; type myzset2</span><br><span class="line">zset</span><br><span class="line">redis 127.0.0.1:6379&gt; type mylist</span><br><span class="line">list</span><br><span class="line">redis 127.0.0.1:6379&gt;</span><br></pre></td></tr></table></figure><h1 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h1><p>图书：《Redis实战》<br>地址：<a href="https://book.douban.com/subject/26612779/">https://book.douban.com/subject/26612779/</a></p>]]></content>
      
      
      <categories>
          
          <category> 技术坑记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 阅读 </tag>
            
            <tag> redis </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>NHK《简明日语》第03课 トイレはどこですか。</title>
      <link href="/2021/07/11/NHK%E3%80%8A%E7%AE%80%E6%98%8E%E6%97%A5%E8%AF%AD%E3%80%8B%E7%AC%AC03%E8%AF%BE/"/>
      <url>/2021/07/11/NHK%E3%80%8A%E7%AE%80%E6%98%8E%E6%97%A5%E8%AF%AD%E3%80%8B%E7%AC%AC03%E8%AF%BE/</url>
      
        <content type="html"><![CDATA[<h1 id="NHK《简明日语》第03课"><a href="#NHK《简明日语》第03课" class="headerlink" title="NHK《简明日语》第03课"></a>NHK《简明日语》第03课</h1><h2 id="课程简介"><a href="#课程简介" class="headerlink" title="课程简介"></a>课程简介</h2><p>今天，安娜要跟小樱去学校看看。</p><h2 id="教材详情"><a href="#教材详情" class="headerlink" title="教材详情"></a>教材详情</h2><h3 id="トイレはどこですか。"><a href="#トイレはどこですか。" class="headerlink" title="トイレはどこですか。"></a>トイレはどこですか。</h3><ul><li>さくら: ここは教室です。 &#x2F;&#x2F; 这里是教室。</li><li>アンナ: わあ、広い。 &#x2F;&#x2F; 哇，好大。</li><li>さくら: あそこは図書館。 &#x2F;&#x2F; 那里是图书馆。</li><li>アンナ: トイレはどこですか。 &#x2F;&#x2F; 洗手间在哪儿？</li><li>さくら: すぐそこです。 &#x2F;&#x2F; 就在那儿。</li></ul><h3 id="语法要点"><a href="#语法要点" class="headerlink" title="语法要点"></a>语法要点</h3><p>____はどこですか。  &#x2F;&#x2F; （···在哪儿？）</p><blockquote><p>「どこですか」是询问场所的说法。<br>例如，「トイレはどこですか」，意思就是“洗手间在哪儿？”</p></blockquote><h3 id="单词"><a href="#单词" class="headerlink" title="单词"></a>单词</h3><table><thead><tr><th>わあ</th></tr></thead><tbody><tr><td><strong>哇</strong></td></tr><tr><td>「わあ」是在吃惊或感动时使用的感叹词。</td></tr></tbody></table><table><thead><tr><th>広い</th><th>狭い</th></tr></thead><tbody><tr><td><strong>宽敞</strong></td><td><strong>狭小</strong></td></tr></tbody></table><table><thead><tr><th>トイレ</th><th>テレビ</th><th>ラジオ</th></tr></thead><tbody><tr><td><strong>洗手间</strong></td><td><strong>电视机</strong></td><td><strong>收音机</strong></td></tr></tbody></table><p>教材：<a href="https://www.nhk.or.jp/lesson/update/pdf/le3_zh_t.pdf">https://www.nhk.or.jp/lesson/update/pdf/le3_zh_t.pdf</a></p><h2 id="我的收获"><a href="#我的收获" class="headerlink" title="我的收获"></a>我的收获</h2><table><thead><tr><th></th><th>距说话者近</th><th>距说话者远</th><th>距两者都远</th><th>疑问</th></tr></thead><tbody><tr><td>事物</td><td>これ（这个）</td><td>それ（那个）</td><td>あれ（那个）</td><td>どれ（哪个）</td></tr><tr><td>场所</td><td>ここ（这里）</td><td>そこ（那里）</td><td>あそこ（那里）</td><td>どこ（哪里）</td></tr><tr><td>方向</td><td>こちら（这边）</td><td>そちら（那边）</td><td>あちら（那边）</td><td>どちら（哪边）</td></tr></tbody></table><h2 id="课程地址"><a href="#课程地址" class="headerlink" title="课程地址"></a>课程地址</h2><p><a href="https://www.nhk.or.jp/lesson/chinese/learn/list/3.html">https://www.nhk.or.jp/lesson/chinese/learn/list/3.html</a></p>]]></content>
      
      
      <categories>
          
          <category> 日语之路 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 日语 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ssh连接超时解决办法 仅修改本地设置</title>
      <link href="/2021/07/10/ssh%E8%BF%9E%E6%8E%A5%E8%B6%85%E6%97%B6%E8%A7%A3%E5%86%B3%E5%8A%9E%E6%B3%95/"/>
      <url>/2021/07/10/ssh%E8%BF%9E%E6%8E%A5%E8%B6%85%E6%97%B6%E8%A7%A3%E5%86%B3%E5%8A%9E%E6%B3%95/</url>
      
        <content type="html"><![CDATA[<p>平时使用 ssh 命令远程到服务器上操作时，经常会因为超时要退出重新登录，要怎么保持登录直到我主动退出呢？<br>下面是只修改本地配置，来实现【保持登录不超时】的方法。</p><h1 id="ssh超时设置-本地"><a href="#ssh超时设置-本地" class="headerlink" title="ssh超时设置(本地)"></a>ssh超时设置(本地)</h1><p>修改<code>客户端</code>的&#x2F;etc&#x2F;ssh&#x2F;ssh_config添加以下：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">client每隔60秒发送一次请求给server，然后server响应，从而保持连接</span></span><br><span class="line">ServerAliveInterval 60</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">client发出请求后，服务器端没有响应得次数达到3，就自动断开连接，正常情况下，server不会不响应</span></span><br><span class="line">ServerAliveCountMax 3</span><br></pre></td></tr></table></figure><h1 id="ssh连接很慢的处理办法-本地"><a href="#ssh连接很慢的处理办法-本地" class="headerlink" title="ssh连接很慢的处理办法(本地)"></a>ssh连接很慢的处理办法(本地)</h1><p>修改<code>客户端</code>配置</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo vim /etc/ssh/ssh_config</span><br></pre></td></tr></table></figure><p>将 <code>GSSAPIAuthentication</code> 设置为 <code>no</code></p><h1 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h1><ul><li><a href="http://blog.chinaunix.net/uid-10697776-id-3341317.html">ssh设置超时时间</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> 技术坑记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> ssh </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>lnmp环境open_basedir报错解决</title>
      <link href="/2021/07/09/lnmp%E7%8E%AF%E5%A2%83open-basedir%E6%8A%A5%E9%94%99%E8%A7%A3%E5%86%B3/"/>
      <url>/2021/07/09/lnmp%E7%8E%AF%E5%A2%83open-basedir%E6%8A%A5%E9%94%99%E8%A7%A3%E5%86%B3/</url>
      
        <content type="html"><![CDATA[<p>在Linux环境下安装了lnmp集成环境（Linux-nginx-MySQL-PHP），运行php后端接口程序，请求接口页面空白，不知道哪里出了问题。</p><h1 id="定位问题"><a href="#定位问题" class="headerlink" title="定位问题"></a>定位问题</h1><p>首先排除nginx配置文件的问题，<code>nginx -t</code>没有异常。<br>然后在代码运行目录’&#x2F;home&#x2F;wwwroot&#x2F;carapi&#x2F;public’下的框架入口文件index.php中插入调试代码</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">echo</span> <span class="number">1</span>;<span class="keyword">die</span>;</span><br></pre></td></tr></table></figure><p>页面成功显示<code>1</code>。php也正常，看来像是框架的问题。<br>但是框架的debug模式也打开了，但是页面没有任何错误提示，原来是需要在 php.ini 中打开错误显示。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim /usr/local/php/etc/php.ini</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">display_errors = On</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lnmp restart</span><br></pre></td></tr></table></figure><p>这下错误显示出来了</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">Warning: require_once(): open_basedir restriction in effect. File(/home/wwwroot/carapi/vendor/autoload.php) is not within the allowed path(s): (/home/wwwroot/carapi/public/:/tmp/:/proc/) in /home/wwwroot/carapi/public/init.php on line 13</span><br><span class="line"></span><br><span class="line">Warning: require_once(/home/wwwroot/carapi/vendor/autoload.php): failed to open stream: Operation not permitted in /home/wwwroot/carapi/public/init.php on line 13</span><br><span class="line"></span><br><span class="line">Fatal error: require_once(): Failed opening required &#x27;/home/wwwroot/carapi/public/../vendor/autoload.php&#x27; (include_path=&#x27;.:/usr/local/php/lib/php&#x27;) in /home/wwwroot/carapi/public/init.php on line 13</span><br></pre></td></tr></table></figure><p>有了错误信息，就好解决了  </p><h1 id="解决办法"><a href="#解决办法" class="headerlink" title="解决办法"></a>解决办法</h1><p>因为nginx中配置的网站根目录是<code>/home/wwwroot/carapi/public</code>，所以在获取public之外的目录文件时出错。<br>只要修改<code>open_basedir</code>，增加<code>/home/wwwroot/carapi/</code>目录就可以了。<br>lnmp的nginx配置文件</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim /usr/local/nginx/conf/fastcgi.conf</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">fastcgi_param  SCRIPT_FILENAME    $document_root$fastcgi_script_name;</span><br><span class="line">fastcgi_param  QUERY_STRING       $query_string;</span><br><span class="line">fastcgi_param  REQUEST_METHOD     $request_method;</span><br><span class="line">fastcgi_param  CONTENT_TYPE       $content_type;</span><br><span class="line">fastcgi_param  CONTENT_LENGTH     $content_length;</span><br><span class="line"></span><br><span class="line">fastcgi_param  SCRIPT_NAME        $fastcgi_script_name;</span><br><span class="line">fastcgi_param  REQUEST_URI        $request_uri;</span><br><span class="line">fastcgi_param  DOCUMENT_URI       $document_uri;</span><br><span class="line">fastcgi_param  DOCUMENT_ROOT      $document_root;</span><br><span class="line">fastcgi_param  SERVER_PROTOCOL    $server_protocol;</span><br><span class="line">fastcgi_param  REQUEST_SCHEME     $scheme;</span><br><span class="line">fastcgi_param  HTTPS              $https if_not_empty;</span><br><span class="line"></span><br><span class="line">fastcgi_param  GATEWAY_INTERFACE  CGI/1.1;</span><br><span class="line">fastcgi_param  SERVER_SOFTWARE    nginx/$nginx_version;</span><br><span class="line"></span><br><span class="line">fastcgi_param  REMOTE_ADDR        $remote_addr;</span><br><span class="line">fastcgi_param  REMOTE_PORT        $remote_port;</span><br><span class="line">fastcgi_param  SERVER_ADDR        $server_addr;</span><br><span class="line">fastcgi_param  SERVER_PORT        $server_port;</span><br><span class="line">fastcgi_param  SERVER_NAME        $server_name;</span><br><span class="line"></span><br><span class="line"># PHP only, required if PHP was built with --enable-force-cgi-redirect</span><br><span class="line">fastcgi_param  REDIRECT_STATUS    200;</span><br><span class="line">fastcgi_param PHP_ADMIN_VALUE &quot;open_basedir=$document_root/:/tmp/:/proc/&quot;;</span><br></pre></td></tr></table></figure><p>对最后一行的<code>open_basedir</code>进行修改：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">fastcgi_param PHP_ADMIN_VALUE &quot;open_basedir=$document_root/:/tmp/:/proc/:/home/wwwroot/carapi/&quot;;</span><br></pre></td></tr></table></figure><p>然后重启服务，接口就可以正常访问了。</p>]]></content>
      
      
      <categories>
          
          <category> 技术坑记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Linux服务器增加swap分区 centos操作过程记录</title>
      <link href="/2021/07/08/Linux%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%A2%9E%E5%8A%A0swap%E5%88%86%E5%8C%BA/"/>
      <url>/2021/07/08/Linux%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%A2%9E%E5%8A%A0swap%E5%88%86%E5%8C%BA/</url>
      
        <content type="html"><![CDATA[<h1 id="查看swap分区大小"><a href="#查看swap分区大小" class="headerlink" title="查看swap分区大小"></a>查看swap分区大小</h1><p><code>free -m</code>查看内存。</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# free -m</span><br><span class="line">              total        used        free      shared  buff/cache   available</span><br><span class="line">Mem:            972         149         392           6         430         654</span><br><span class="line">Swap:             0           0           0</span><br></pre></td></tr></table></figure><h1 id="创建swap分区"><a href="#创建swap分区" class="headerlink" title="创建swap分区"></a>创建swap分区</h1><p>创建2G大小的swap</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">2G = 2*1024*1024 = 2097152</span></span><br><span class="line">dd if=/dev/zero of=/var/swap bs=1024 count=2097152</span><br><span class="line">mkswap /var/swap</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"><span class="built_in">chmod</span> 0600 /var/swap</span></span><br><span class="line">swapon /var/swap</span><br><span class="line">vim /etc/fstab</span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">添加一行</span></span><br><span class="line">/var/swap            swap                 swap       defaults              0 0</span><br></pre></td></tr></table></figure><h1 id="运行结果"><a href="#运行结果" class="headerlink" title="运行结果"></a>运行结果</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# dd if=/dev/zero of=/var/swap bs=1024 count=2097152</span><br><span class="line">记录了2097152+0 的读入</span><br><span class="line">记录了2097152+0 的写出</span><br><span class="line">2147483648字节(2.1 GB)已复制，9.82065 秒，219 MB/秒</span><br><span class="line">[root@localhost ~]# mkswap /var/swap</span><br><span class="line">正在设置交换空间版本 1，大小 = 2097148 KiB</span><br><span class="line">无标签，UUID=bd890611-ddbe-4eaa-a4c2-3b7e7e2af347</span><br><span class="line">[root@localhost ~]# swapon /var/swap</span><br><span class="line">swapon: /var/swap：不安全的权限 0644，建议使用 0600。</span><br><span class="line">[root@localhost ~]# chmod 0600 /var/swap</span><br><span class="line">[root@localhost ~]# vim /etc/fstab</span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"></span></span><br><span class="line"><span class="language-bash"><span class="comment"># /etc/fstab</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Created by anaconda on Thu Sep 14 11:27:20 2017</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"></span></span><br><span class="line"><span class="language-bash"><span class="comment"># Accessible filesystems, by reference, are maintained under &#x27;/dev/disk&#x27;</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">See man pages fstab(5), findfs(8), mount(8) and/or blkid(8) <span class="keyword">for</span> more info</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"></span></span><br><span class="line"><span class="language-bash">/dev/sda1                        /                       ext4    defaults        1 1</span></span><br><span class="line">/dev/sdb1               /data                   ext4    defaults        0 0</span><br><span class="line">/var/swap            swap                 swap       defaults              0 0</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# free -m</span><br><span class="line">              total        used        free      shared  buff/cache   available</span><br><span class="line">Mem:            972         149          80           6         742         650</span><br><span class="line">Swap:          2047           0        2047</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 技术坑记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>服务器SSH密钥登录设置</title>
      <link href="/2021/07/07/%E6%9C%8D%E5%8A%A1%E5%99%A8SSH%E5%AF%86%E9%92%A5%E7%99%BB%E5%BD%95%E8%AE%BE%E7%BD%AE/"/>
      <url>/2021/07/07/%E6%9C%8D%E5%8A%A1%E5%99%A8SSH%E5%AF%86%E9%92%A5%E7%99%BB%E5%BD%95%E8%AE%BE%E7%BD%AE/</url>
      
        <content type="html"><![CDATA[<h1 id="本机生成密钥"><a href="#本机生成密钥" class="headerlink" title="本机生成密钥"></a>本机生成密钥</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh-keygen -t rsa -C &quot;email&quot;</span><br></pre></td></tr></table></figure><p>生成后，默认在<code>~/.ssh</code>目录下</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">xtong@xtong-TM1704:~$ ls .ssh/</span><br><span class="line">id_rsa  id_rsa.ppk  id_rsa.pub  known_hosts</span><br></pre></td></tr></table></figure><h1 id="服务器添加密钥"><a href="#服务器添加密钥" class="headerlink" title="服务器添加密钥"></a>服务器添加密钥</h1><p>在服务器的<code>~/.ssh/authorized_keys</code>文件，添加一行，内容是我们本地<code>id_rsa.pub</code>中的全部内容。<br>如果服务器没有这个文件，则创建此文件。</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">mkdir .ssh</span><br><span class="line">chmod 700 .ssh</span><br><span class="line">touch .ssh/authorized_keys</span><br><span class="line">chmod 600 .ssh/authorized_keys</span><br></pre></td></tr></table></figure><h1 id="服务器设置密钥登录"><a href="#服务器设置密钥登录" class="headerlink" title="服务器设置密钥登录"></a>服务器设置密钥登录</h1><p>打开服务器的<code> /etc/ssh/sshd_config</code>文件，修改下面的设置  </p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">...</span></span><br><span class="line">RSAAuthentication yes</span><br><span class="line">PubkeyAuthentication yes</span><br><span class="line"></span><br><span class="line">AuthorizedKeysFile      .ssh/authorized_keys</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">...</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">允许root用户登录</span></span><br><span class="line">PermitRootLogin yes</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">...</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">禁止密码登录</span></span><br><span class="line">PasswordAuthentication no</span><br></pre></td></tr></table></figure><p>重启ssh服务</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">service sshd restart</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 技术坑记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>NHK《简明日语》第02课 これは何（なん）ですか。</title>
      <link href="/2021/07/06/NHK%E3%80%8A%E7%AE%80%E6%98%8E%E6%97%A5%E8%AF%AD%E3%80%8B%E7%AC%AC02%E8%AF%BE/"/>
      <url>/2021/07/06/NHK%E3%80%8A%E7%AE%80%E6%98%8E%E6%97%A5%E8%AF%AD%E3%80%8B%E7%AC%AC02%E8%AF%BE/</url>
      
        <content type="html"><![CDATA[<h1 id="NHK《简明日语》第02课"><a href="#NHK《简明日语》第02课" class="headerlink" title="NHK《简明日语》第02课"></a>NHK《简明日语》第02课</h1><h2 id="课程简介"><a href="#课程简介" class="headerlink" title="课程简介"></a>课程简介</h2><p>泰国留学生安娜向小樱做了自我介绍。安娜把一样东西递给了小樱。</p><h2 id="教材详情"><a href="#教材详情" class="headerlink" title="教材详情"></a>教材详情</h2><h3 id="これは何（なん）ですか。"><a href="#これは何（なん）ですか。" class="headerlink" title="これは何（なん）ですか。"></a>これは何（なん）ですか。</h3><ul><li>アンナ: さくらさん。はい、どうぞ。 &#x2F;&#x2F; 小樱。这个，给你。</li><li>さくら: これは何ですか。 &#x2F;&#x2F; 这是什么？</li><li>アンナ: それはタイのお土産です。 &#x2F;&#x2F; 那是泰国的礼物。</li><li>さくら: ありがとうございます。 &#x2F;&#x2F; 谢谢。</li><li>アンナ: どういたしまして。 &#x2F;&#x2F; 不客气。</li></ul><h3 id="语法要点"><a href="#语法要点" class="headerlink" title="语法要点"></a>语法要点</h3><p>名词A の 名词B  &#x2F;&#x2F; 名词A 的 名词B</p><blockquote><p>「の」是连接名词和名词的助词，在日语里，修饰语放在名词前面。<br>例如，「東京（とうきょう）のお土産（みやげ）」（东京的礼物）  </p></blockquote><h3 id="单词"><a href="#单词" class="headerlink" title="单词"></a>单词</h3><table><thead><tr><th>さん</th></tr></thead><tbody><tr><td><strong>先生、女士、小姐</strong></td></tr><tr><td>在日语里，称呼一个人，要在这个人的名字后面加上敬称「さん」。如果是小女孩的话，也可以在名字后面加上「ちゃん」；如果是小男孩，也可以在名字后面加上「くん」。这两种说法通常用来称呼学龄前的小孩。</td></tr></tbody></table><table><thead><tr><th>どうぞ</th></tr></thead><tbody><tr><td><strong>请</strong></td></tr><tr><td>「よろしくお願いします」是自我介绍时经常说的一句话，意思是「希望我们今后保持良好关系」。除此以外，在有事拜托对方的时候，也会在最后附加上这句话。</td></tr></tbody></table><table><thead><tr><th>これ</th></tr></thead><tbody><tr><td><strong>这个</strong></td></tr><tr><td>「これ」是指示代词，指离说话人距离比较近的东西。</td></tr></tbody></table><table><thead><tr><th>何ですか</th></tr></thead><tbody><tr><td><strong>···是什么？</strong></td></tr><tr><td>「何」后续「です」，构成谓语。「か」是助词，接在句尾，用升调来读，就变成了疑问句。</td></tr></tbody></table><table><thead><tr><th>それ</th></tr></thead><tbody><tr><td><strong>那个</strong></td></tr><tr><td>「それ」是指示代词，指离听话人距离比较近的东西。</td></tr></tbody></table><table><thead><tr><th>タイ</th></tr></thead><tbody><tr><td><strong>泰国</strong></td></tr></tbody></table><table><thead><tr><th>お土産</th></tr></thead><tbody><tr><td><strong>礼物、特产</strong></td></tr></tbody></table><table><thead><tr><th>ありがとうございます</th></tr></thead><tbody><tr><td><strong>谢谢</strong></td></tr><tr><td>只说「ありがとう」也可以，加上「ございます」的话，就变成了郑重说法。</td></tr></tbody></table><table><thead><tr><th>どういたしまして</th></tr></thead><tbody><tr><td><strong>不客气</strong></td></tr><tr><td>这是对方向你表示感谢时的一种固定的回应方法。</td></tr></tbody></table><table><thead><tr><th>何時ですか</th></tr></thead><tbody><tr><td><strong>几点钟？</strong></td></tr><tr><td>在「何（なん）」（几）后面加上表示时间的「時（じ）」（点），「何時ですか」，意思就是“几点钟？</td></tr></tbody></table><table><thead><tr><th>何人ですか</th></tr></thead><tbody><tr><td><strong>几个人？</strong></td></tr><tr><td>也可以在「何（なん）」（几）后面加上表示人数的「人（にん）」，「何人ですか」，意思就是“几个人？”</td></tr></tbody></table><p>教材：<a href="https://www.nhk.or.jp/lesson/update/pdf/le2_zh_t.pdf">https://www.nhk.or.jp/lesson/update/pdf/le2_zh_t.pdf</a></p><h2 id="我的收获"><a href="#我的收获" class="headerlink" title="我的收获"></a>我的收获</h2><p>日语的「か」是助词，放在句尾用升调读，就变成了疑问句。<br>「ありがとうございます。」表示感谢，如果收到别人的感谢，可以回一句「どういたしまして。」。<br>两个人谈话时，距离说话人近的物品用<code>これ</code>指代，距离说话人远的物品用<code>それ</code>指代。</p><h2 id="课程地址"><a href="#课程地址" class="headerlink" title="课程地址"></a>课程地址</h2><p><a href="https://www.nhk.or.jp/lesson/chinese/learn/list/2.html">https://www.nhk.or.jp/lesson/chinese/learn/list/2.html</a></p>]]></content>
      
      
      <categories>
          
          <category> 日语之路 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 日语 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>蚂蚁金服antdv快速上手 快速构建一个antdv的前端项目</title>
      <link href="/2021/07/05/%E8%9A%82%E8%9A%81%E9%87%91%E6%9C%8Dantdv%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B/"/>
      <url>/2021/07/05/%E8%9A%82%E8%9A%81%E9%87%91%E6%9C%8Dantdv%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B/</url>
      
        <content type="html"><![CDATA[<h1 id="antdv是什么"><a href="#antdv是什么" class="headerlink" title="antdv是什么"></a>antdv是什么</h1><p>ant-design-vue 是 Ant Design 的 Vue 实现，组件的风格与 Ant Design 保持同步，组件的 html 结构和 css 样式也保持一致，组件 API 也尽量保持了一致。</p><p>Ant Design:  <a href="https://antdv.com/components/overview">https://antdv.com/components/overview</a></p><p>中文介绍：<a href="https://antdv.com/docs/vue/introduce-cn">https://antdv.com/docs/vue/introduce-cn</a></p><p>中文文档：<a href="https://antdv.com/components/overview-cn">https://antdv.com/components/overview-cn</a></p><h1 id="如何安装"><a href="#如何安装" class="headerlink" title="如何安装"></a>如何安装</h1><p>使用 npm 或者 <a href="https://yarnpkg.com/">yarn</a> 都可以，个人推荐 yarn，速度比 npm 快。</p><h2 id="安装yarn"><a href="#安装yarn" class="headerlink" title="安装yarn"></a>安装yarn</h2><p><a href="https://yarn.bootcss.com/docs/install#mac-stable">安装 yarn</a>：<code>npm install --global yarn</code> 安装成功后 <code>yarn -v</code> 查看版本确认安装成功</p><h2 id="安装vue脚手架工具"><a href="#安装vue脚手架工具" class="headerlink" title="安装vue脚手架工具"></a>安装vue脚手架工具</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yarn global add @vue/cli</span><br></pre></td></tr></table></figure><p>全局安装 vue-cli</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">yarn global add @vue/cli</span><br><span class="line">yarn global v1.22.17</span><br><span class="line">[1/4] 🔍  Resolving packages...</span><br><span class="line">warning @vue/cli &gt; @vue/cli-ui &gt; apollo-server-express &gt; subscriptions-transport-ws@0.9.19: The `subscriptions-transport-ws` package is no longer maintained. We recommend you use `graphql-ws` instead. For help migrating Apollo software to `graphql-ws`, see https://www.apollographql.com/docs/apollo-server/data/subscriptions/#switching-from-subscriptions-transport-ws    For general help using `graphql-ws`, see https://github.com/enisdenjo/graphql-ws/blob/master/README.md</span><br><span class="line">warning @vue/cli &gt; @vue/cli-ui &gt; apollo-server-express &gt; apollo-server-core &gt; subscriptions-transport-ws@0.9.19: The `subscriptions-transport-ws` package is no longer maintained. We recommend you use `graphql-ws` instead. For help migrating Apollo software to `graphql-ws`, see https://www.apollographql.com/docs/apollo-server/data/subscriptions/#switching-from-subscriptions-transport-ws    For general help using `graphql-ws`, see https://github.com/enisdenjo/graphql-ws/blob/master/README.md</span><br><span class="line">warning @vue/cli &gt; @vue/cli-ui &gt; apollo-server-express &gt; apollo-server-core &gt; apollo-cache-control@0.14.0: The functionality provided by the `apollo-cache-control` package is built in to `apollo-server-core` starting with Apollo Server 3. See https://www.apollographql.com/docs/apollo-server/migration/#cachecontrol for details.</span><br><span class="line">warning @vue/cli &gt; @vue/cli-ui &gt; apollo-server-express &gt; apollo-server-core &gt; apollo-tracing@0.15.0: The `apollo-tracing` package is no longer part of Apollo Server 3. See https://www.apollographql.com/docs/apollo-server/migration/#tracing for details</span><br><span class="line">warning @vue/cli &gt; @vue/cli-ui &gt; apollo-server-express &gt; apollo-server-core &gt; graphql-extensions@0.15.0: The `graphql-extensions` API has been removed from Apollo Server 3. Use the plugin API instead: https://www.apollographql.com/docs/apollo-server/integrations/plugins/</span><br><span class="line">warning @vue/cli &gt; @vue/cli-ui &gt; apollo-server-express &gt; graphql-tools@4.0.8: This package has been deprecated and now it only exports makeExecutableSchema.\nAnd it will no longer receive updates.\nWe recommend you to migrate to scoped packages such as @graphql-tools/schema, @graphql-tools/utils and etc.\nCheck out https://www.graphql-tools.com to learn what package you should use instead</span><br><span class="line">warning @vue/cli &gt; @vue/cli-ui &gt; apollo-server-express &gt; apollo-server-core &gt; graphql-tools@4.0.8: This package has been deprecated and now it only exports makeExecutableSchema.\nAnd it will no longer receive updates.\nWe recommend you to migrate to scoped packages such as @graphql-tools/schema, @graphql-tools/utils and etc.\nCheck out https://www.graphql-tools.com to learn what package you should use instead</span><br><span class="line">warning @vue/cli &gt; @vue/cli-ui &gt; apollo-server-express &gt; graphql-tools &gt; uuid@3.4.0: Please upgrade  to version 7 or higher.  Older versions may use Math.random() in certain circumstances, which is known to be problematic.  See https://v8.dev/blog/math-random for details.</span><br><span class="line">warning @vue/cli &gt; vue-codemod &gt; jscodeshift &gt; micromatch &gt; snapdragon &gt; source-map-resolve@0.5.3: See https://github.com/lydell/source-map-resolve#deprecated</span><br><span class="line">warning @vue/cli &gt; vue-codemod &gt; jscodeshift &gt; micromatch &gt; snapdragon &gt; source-map-resolve &gt; resolve-url@0.2.1: https://github.com/lydell/resolve-url#deprecated</span><br><span class="line">warning @vue/cli &gt; vue-codemod &gt; jscodeshift &gt; micromatch &gt; snapdragon &gt; source-map-resolve &gt; source-map-url@0.4.1: See https://github.com/lydell/source-map-url#deprecated</span><br><span class="line">warning @vue/cli &gt; vue-codemod &gt; jscodeshift &gt; micromatch &gt; snapdragon &gt; source-map-resolve &gt; urix@0.1.0: Please see https://github.com/lydell/urix#deprecated</span><br><span class="line">[2/4] 🚚  Fetching packages...</span><br><span class="line">[3/4] 🔗  Linking dependencies...</span><br><span class="line">[4/4] 🔨  Building fresh packages...</span><br><span class="line">success Installed &quot;@vue/cli@5.0.4&quot; with binaries:</span><br><span class="line">      - vue</span><br><span class="line">✨  Done in 167.46s.</span><br></pre></td></tr></table></figure><h2 id="创建一个vue项目"><a href="#创建一个vue项目" class="headerlink" title="创建一个vue项目"></a>创建一个vue项目</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vue create antd-demo</span><br></pre></td></tr></table></figure><p>选择 <code>vue2</code> 版本，使用 yarn 安装（antdv 的 1.7.6 版本，不支持最新的 vue3）</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Vue CLI v5.0.4</span><br><span class="line">? Please pick a preset:</span><br><span class="line">  Default ([Vue 3] babel, eslint)</span><br><span class="line">❯ Default ([Vue 2] babel, eslint)</span><br><span class="line">  Manually select features</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">Vue CLI v5.0.4</span><br><span class="line">✨  Creating project in /Users/xtong/code/demo/antd-demo.</span><br><span class="line">🗃  Initializing git repository...</span><br><span class="line">⚙️  Installing CLI plugins. This might take a while...</span><br><span class="line"></span><br><span class="line">yarn install v1.22.17</span><br><span class="line">info No lockfile found.</span><br><span class="line">[1/4] 🔍  Resolving packages...</span><br><span class="line">[2/4] 🚚  Fetching packages...</span><br><span class="line">[3/4] 🔗  Linking dependencies...</span><br><span class="line"></span><br><span class="line">success Saved lockfile.</span><br><span class="line">✨  Done in 54.09s.</span><br><span class="line">🚀  Invoking generators...</span><br><span class="line">📦  Installing additional dependencies...</span><br><span class="line"></span><br><span class="line">yarn install v1.22.17</span><br><span class="line">[1/4] 🔍  Resolving packages...</span><br><span class="line">[2/4] 🚚  Fetching packages...</span><br><span class="line">[3/4] 🔗  Linking dependencies...</span><br><span class="line">[4/4] 🔨  Building fresh packages...</span><br><span class="line"></span><br><span class="line">success Saved lockfile.</span><br><span class="line">✨  Done in 11.58s.</span><br><span class="line">⚓  Running completion hooks...</span><br><span class="line"></span><br><span class="line">📄  Generating README.md...</span><br><span class="line"></span><br><span class="line">🎉  Successfully created project antd-demo.</span><br><span class="line">👉  Get started with the following commands:</span><br><span class="line"></span><br><span class="line"> $ cd antd-demo</span><br><span class="line"> $ yarn serve</span><br></pre></td></tr></table></figure><p>在 antd-demo 目录下，运行 <code>yarn serve</code> 查看 demo 页面。</p><h2 id="安装-antdv-组件（版本-1-7-6）"><a href="#安装-antdv-组件（版本-1-7-6）" class="headerlink" title="安装 antdv 组件（版本@1.7.6）"></a>安装 antdv 组件（版本@1.7.6）</h2><p>在 antd-demo 目录下，执行</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">// npm 安装 antdv</span><br><span class="line">npm install ant-design-vue --save</span><br><span class="line">// yarn 安装 antdv</span><br><span class="line">yarn add ant-design-vue@1.7.6</span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line">➜  antd-demo git:(master) ✗ yarn add ant-design-vue@1.7.6</span><br><span class="line">yarn add v1.22.17</span><br><span class="line">[1/4] 🔍  Resolving packages...</span><br><span class="line">info There appears to be trouble with your network connection. Retrying...</span><br><span class="line">warning ant-design-vue &gt; babel-runtime &gt; core-js@2.6.12: core-js@&lt;3.4 is no longer maintained and not recommended for usage due to the number of issues. Because of the V8 engine whims, feature detection in old core-js versions could cause a slowdown up to 100x even if nothing is polyfilled. Please, upgrade your dependencies to the actual version of core-js.</span><br><span class="line">[2/4] 🚚  Fetching packages...</span><br><span class="line">[3/4] 🔗  Linking dependencies...</span><br><span class="line">[4/4] 🔨  Building fresh packages...</span><br><span class="line">success Saved lockfile.</span><br><span class="line">success Saved 39 new dependencies.</span><br><span class="line">info Direct dependencies</span><br><span class="line">└─ ant-design-vue@1.7.6</span><br><span class="line">info All dependencies</span><br><span class="line">├─ @ant-design/colors@3.2.2</span><br><span class="line">├─ @ant-design/icons-vue@2.0.0</span><br><span class="line">├─ @ant-design/icons@2.1.1</span><br><span class="line">├─ @simonwep/pickr@1.7.4</span><br><span class="line">├─ add-dom-event-listener@1.1.0</span><br><span class="line">├─ ant-design-vue@1.7.6</span><br><span class="line">├─ array-tree-filter@2.1.0</span><br><span class="line">├─ async-validator@3.5.2</span><br><span class="line">├─ babel-helper-vue-jsx-merge-props@2.0.3</span><br><span class="line">├─ babel-runtime@6.26.0</span><br><span class="line">├─ classnames@2.3.1</span><br><span class="line">├─ component-classes@1.2.6</span><br><span class="line">├─ component-indexof@0.0.3</span><br><span class="line">├─ dom-align@1.12.3</span><br><span class="line">├─ dom-closest@0.2.0</span><br><span class="line">├─ dom-matches@2.0.0</span><br><span class="line">├─ dom-scroll-into-view@2.0.1</span><br><span class="line">├─ enquire.js@2.1.6</span><br><span class="line">├─ intersperse@1.0.0</span><br><span class="line">├─ is-mobile@2.2.2</span><br><span class="line">├─ is-negative-zero@2.0.2</span><br><span class="line">├─ ismobilejs@1.1.1</span><br><span class="line">├─ json2mq@0.2.0</span><br><span class="line">├─ loose-envify@1.4.0</span><br><span class="line">├─ moment@2.29.3</span><br><span class="line">├─ mutationobserver-shim@0.3.7</span><br><span class="line">├─ nanopop@2.1.0</span><br><span class="line">├─ node-emoji@1.11.0</span><br><span class="line">├─ omit.js@1.0.2</span><br><span class="line">├─ performance-now@2.1.0</span><br><span class="line">├─ raf@3.4.1</span><br><span class="line">├─ regenerator-runtime@0.11.1</span><br><span class="line">├─ resize-observer-polyfill@1.5.1</span><br><span class="line">├─ shallow-equal@1.2.1</span><br><span class="line">├─ shallowequal@1.1.0</span><br><span class="line">├─ string-convert@0.2.1</span><br><span class="line">├─ tinycolor2@1.4.2</span><br><span class="line">├─ vue-ref@2.0.0</span><br><span class="line">└─ warning@4.0.3</span><br><span class="line">✨  Done in 50.41s.</span><br></pre></td></tr></table></figure><h2 id="引入-antd"><a href="#引入-antd" class="headerlink" title="引入 antd"></a>引入 antd</h2><p>在 vue 项目的 main.js 中，增加引入 antd 的代码。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">import Vue from &#x27;vue&#x27;</span><br><span class="line">import App from &#x27;./App.vue&#x27;</span><br><span class="line">+ import Antd from &#x27;ant-design-vue&#x27;</span><br><span class="line">+ import &#x27;ant-design-vue/dist/antd.css&#x27;</span><br><span class="line"></span><br><span class="line">Vue.config.productionTip = false</span><br><span class="line"></span><br><span class="line">+ Vue.use(Antd)</span><br><span class="line"></span><br><span class="line">new Vue(&#123;</span><br><span class="line">  render: h =&gt; h(App),</span><br><span class="line">&#125;).$mount(&#x27;#app&#x27;)</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>在 HelloWord.vue 文件中插入 antdv 的按钮元素查看效果: <code>a-button</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;hello&quot;&gt;</span><br><span class="line">    &lt;h1&gt;&#123;&#123; msg &#125;&#125;&lt;/h1&gt;</span><br><span class="line">    &lt;a-button type=&quot;primary&quot; &gt;新增&lt;/a-button&gt;</span><br><span class="line">    ...</span><br></pre></td></tr></table></figure><img src="/2021/07/05/%E8%9A%82%E8%9A%81%E9%87%91%E6%9C%8Dantdv%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B/post-antdv-button.jpg" class=""><p>可以看到，antdv 的元素可以正常展示了。</p><h1 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h1><ul><li><a href="https://antdv.com/components/overview-cn" target="_blank">Ant Design Vue 官方中文文档</a></li><li><a href="https://github.com/tongg112/antd-demo">GitHub 代码示例：antd-demo 项目</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> 技术坑记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> vue </tag>
            
            <tag> antd </tag>
            
            <tag> 前端 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>饥荒联机版游戏服务器搭建</title>
      <link href="/2021/07/04/%E9%A5%A5%E8%8D%92%E8%81%94%E6%9C%BA%E7%89%88%E6%B8%B8%E6%88%8F%E6%9C%8D%E5%8A%A1%E5%99%A8%E6%90%AD%E5%BB%BA/"/>
      <url>/2021/07/04/%E9%A5%A5%E8%8D%92%E8%81%94%E6%9C%BA%E7%89%88%E6%B8%B8%E6%88%8F%E6%9C%8D%E5%8A%A1%E5%99%A8%E6%90%AD%E5%BB%BA/</url>
      
        <content type="html"><![CDATA[<img src="/2021/07/04/%E9%A5%A5%E8%8D%92%E8%81%94%E6%9C%BA%E7%89%88%E6%B8%B8%E6%88%8F%E6%9C%8D%E5%8A%A1%E5%99%A8%E6%90%AD%E5%BB%BA/post-bg-dst-server.jpg" class=""><h1 id="背景故事"><a href="#背景故事" class="headerlink" title="背景故事"></a>背景故事</h1><p>和朋友一起玩饥荒是非常快乐的事情。在和朋友在开新档时总说：“这个是长期档，咱们好好玩”，然而总是“半途而废”。<br>饥荒弃坑已经很久了，前一阵儿和朋友偶然说玩一玩饥荒，我们离开的时间里klei一直勤奋地更新着，攒了好大一波对我们来说的“新内容”，可以一次体验个够了。而我们又发现了一些有趣的mod，比如《神话书说》、《棱镜》，这下料就更足了。<br>我用windows在游戏内，开mod，创建存档，断断续续玩了差不多200天（饥荒游戏内的日历）。最近工作上开始忙了，不能稳定地创建服务器，所以想把这个存档迁移到云服务器上，这样就方便多了。</p><h1 id="存档迁移"><a href="#存档迁移" class="headerlink" title="存档迁移"></a>存档迁移</h1><h2 id="本地准备工作"><a href="#本地准备工作" class="headerlink" title="本地准备工作"></a>本地准备工作</h2><h3 id="找到存档"><a href="#找到存档" class="headerlink" title="找到存档"></a>找到存档</h3><p>既然是迁移存档，首先要找到存档的位置。<br>windows的饥荒联机版存档位置一般在这个目录，（<code>87037553</code>这个可能是用来区分不同steam账户的）</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">C:\Users\&#123;用户名&#125;\Documents\Klei\DoNotStarveTogether\87037553\Cluster_1</span><br></pre></td></tr></table></figure><img src="/2021/07/04/%E9%A5%A5%E8%8D%92%E8%81%94%E6%9C%BA%E7%89%88%E6%B8%B8%E6%88%8F%E6%9C%8D%E5%8A%A1%E5%99%A8%E6%90%AD%E5%BB%BA/dst-save.png" class="" title="存档目录"><h3 id="创建并下载服务端配置"><a href="#创建并下载服务端配置" class="headerlink" title="创建并下载服务端配置"></a>创建并下载服务端配置</h3><p>登录klei账号：<a href="https://accounts.klei.com/account/game/list">https://accounts.klei.com/account/game/list</a><br>使用steam登录，登录后选择【《饥荒：联机版》的游戏服务器】按钮<br>（<a href="https://accounts.klei.com/account/game/servers?game=DontStarveTogether%EF%BC%89">https://accounts.klei.com/account/game/servers?game=DontStarveTogether）</a><br>添加新服务器，填写好服务器配置后，点击【下载设置】按钮，得到一个压缩文件<code>MyDediServer.zip</code>。</p><h3 id="解压空白存档，将其替换成要迁移的存档"><a href="#解压空白存档，将其替换成要迁移的存档" class="headerlink" title="解压空白存档，将其替换成要迁移的存档"></a>解压空白存档，将其替换成要迁移的存档</h3><p>解压<code>MyDediServer.zip</code>后，把我们的存档替换进来：</p><ul><li>删除 MyDediServer 下的 Master 和 Caves 文件夹；</li><li>将我们需要迁移的存档 Cluster 目录下的 Master 和 Caves 文件夹拷贝到 MyDediServer目录里。</li></ul><h2 id="服务器准备工作"><a href="#服务器准备工作" class="headerlink" title="服务器准备工作"></a>服务器准备工作</h2><h3 id="环境安装"><a href="#环境安装" class="headerlink" title="环境安装"></a>环境安装</h3><p>登录云服务器，执行</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install -y libstdc++6:i386 libgcc1:i386 libcurl4-gnutls-dev:i386 screen</span><br></pre></td></tr></table></figure><h3 id="安装steamcmd"><a href="#安装steamcmd" class="headerlink" title="安装steamcmd"></a>安装steamcmd</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mkdir ~/steamcmd &amp;&amp; cd ~/steamcmd</span><br><span class="line">wget &quot;https://steamcdn-a.akamaihd.net/client/installer/steamcmd_linux.tar.gz&quot;</span><br><span class="line">tar -zxvf steamcmd_linux.tar.gz</span><br></pre></td></tr></table></figure><h3 id="创建游戏存档目录"><a href="#创建游戏存档目录" class="headerlink" title="创建游戏存档目录"></a>创建游戏存档目录</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mkdir -p ~/.klei/DoNotStarveTogether</span><br></pre></td></tr></table></figure><h3 id="上传空白存档"><a href="#上传空白存档" class="headerlink" title="上传空白存档"></a>上传空白存档</h3><p>把之前得到的<code>MyDediServer.zip</code>,上传到<code>~/.klei/DoNotStarveTogether</code>并解压。</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">空白存档的位置</span></span><br><span class="line">~/.klei/DoNotStarveTogether/MyDediServer</span><br></pre></td></tr></table></figure><h2 id="开始迁移"><a href="#开始迁移" class="headerlink" title="开始迁移"></a>开始迁移</h2><h3 id="启动脚本上传至云服务器"><a href="#启动脚本上传至云服务器" class="headerlink" title="启动脚本上传至云服务器"></a>启动脚本上传至云服务器</h3><p>上传或者创建以下脚本到云服务器的当前用户目录（~&#x2F;）：<br>下载地址：<a href="https://accounts.klei.com/assets/gamesetup/linux/run_dedicated_servers.sh">https://accounts.klei.com/assets/gamesetup/linux/run_dedicated_servers.sh</a>  </p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">!/bin/bash</span></span><br><span class="line"></span><br><span class="line">steamcmd_dir=&quot;$HOME/steamcmd&quot;</span><br><span class="line">install_dir=&quot;$HOME/dontstarvetogether_dedicated_server&quot;</span><br><span class="line">cluster_name=&quot;MyDediServer&quot;</span><br><span class="line">dontstarve_dir=&quot;$HOME/.klei/DoNotStarveTogether&quot;</span><br><span class="line"></span><br><span class="line">function fail()</span><br><span class="line">&#123;</span><br><span class="line">echo Error: &quot;$@&quot; &gt;&amp;2</span><br><span class="line">exit 1</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function check_for_file()</span><br><span class="line">&#123;</span><br><span class="line">if [ ! -e &quot;$1&quot; ]; then</span><br><span class="line">fail &quot;Missing file: $1&quot;</span><br><span class="line">fi</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">cd &quot;$steamcmd_dir&quot; || fail &quot;Missing $steamcmd_dir directory!&quot;</span><br><span class="line"></span><br><span class="line">check_for_file &quot;steamcmd.sh&quot;</span><br><span class="line">check_for_file &quot;$dontstarve_dir/$cluster_name/cluster.ini&quot;</span><br><span class="line">check_for_file &quot;$dontstarve_dir/$cluster_name/cluster_token.txt&quot;</span><br><span class="line">check_for_file &quot;$dontstarve_dir/$cluster_name/Master/server.ini&quot;</span><br><span class="line">check_for_file &quot;$dontstarve_dir/$cluster_name/Caves/server.ini&quot;</span><br><span class="line"></span><br><span class="line">./steamcmd.sh +force_install_dir &quot;$install_dir&quot; +login anonymous +app_update 343050 validate +quit</span><br><span class="line"></span><br><span class="line">check_for_file &quot;$install_dir/bin&quot;</span><br><span class="line"></span><br><span class="line">cd &quot;$install_dir/bin&quot; || fail</span><br><span class="line"></span><br><span class="line">run_shared=(./dontstarve_dedicated_server_nullrenderer)</span><br><span class="line">run_shared+=(-console)</span><br><span class="line">run_shared+=(-cluster &quot;$cluster_name&quot;)</span><br><span class="line">run_shared+=(-monitor_parent_process $$)</span><br><span class="line"></span><br><span class="line">&quot;$&#123;run_shared[@]&#125;&quot; -shard Caves  | sed &#x27;s/^/Caves:  /&#x27; &amp;</span><br><span class="line">&quot;$&#123;run_shared[@]&#125;&quot; -shard Master | sed &#x27;s/^/Master: /&#x27;</span><br></pre></td></tr></table></figure><h3 id="赋予脚本可执行权限"><a href="#赋予脚本可执行权限" class="headerlink" title="赋予脚本可执行权限"></a>赋予脚本可执行权限</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chmod u+x run_dedicated_servers.sh</span><br></pre></td></tr></table></figure><h3 id="执行脚本启动服务"><a href="#执行脚本启动服务" class="headerlink" title="执行脚本启动服务"></a>执行脚本启动服务</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">screen</span><br><span class="line">./run_dedicated_servers.sh</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>执行成功后，服务器上会生成一些目录，Ctrl+c停止脚本，进行后续操作。</p><ul><li>生成的<code>~/dontstarvetogether_dedicated_serve</code>可以存放稍后上传mod</li><li>生成的<code>~/.klei/DoNotStarveTogether</code>用来存放存档</li></ul><h3 id="上传需要迁移的游戏存档"><a href="#上传需要迁移的游戏存档" class="headerlink" title="上传需要迁移的游戏存档"></a>上传需要迁移的游戏存档</h3><p>将准备好的 MyDediServer 文件夹，上传到<code>~/.klei/DoNotStarveTogether</code>下。</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">存档上传后的路径：</span></span><br><span class="line">~/.klei/DoNotStarveTogether/MyDediServer</span><br></pre></td></tr></table></figure><h3 id="上传游戏mod"><a href="#上传游戏mod" class="headerlink" title="上传游戏mod"></a>上传游戏mod</h3><p>windows本地饥荒游戏mod一般在  </p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;steam安装目录&#125;\Steam\steamapps\common\Don&#x27;t Starve Together\mods</span><br><span class="line"># 比如</span><br><span class="line">D:\Program Files (x86)\Steam\steamapps\common\Don&#x27;t Starve Together\mods</span><br></pre></td></tr></table></figure><p>将这个mods文件夹里的文件上传到服务器下面的目录中</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">~/dontstarvetogether_dedicated_server/mods</span><br></pre></td></tr></table></figure><p>对于《神话书说》《棱镜》等mod，并没有在上面的mods目录中，需要在这个目录下找</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;steam安装目录&#125;\Steam\steamapps\workshop\content\322330</span><br><span class="line"># 比如</span><br><span class="line">D:\Program Files (x86)\Steam\steamapps\workshop\content\322330</span><br></pre></td></tr></table></figure><p>找到对应的mod，并上传到服务器<code>~/dontstarvetogether_dedicated_server/mods</code>中。<br>注意，需要将这些mod的文件夹命名为<code>workshop-&#123;mod ID&#125;</code>的格式。<br>比如<code>workshop-727774324</code>。</p><blockquote><p>Myth Words Theme-神话书说主题：workshop-1991746508</p></blockquote><blockquote><p>Myth Words Characters 神话书说角色：workshop-1699194522</p></blockquote><blockquote><p>[DST] Legion-棱镜：workshop-1392778117</p></blockquote><h2 id="mod更新"><a href="#mod更新" class="headerlink" title="mod更新"></a>mod更新</h2><p>在<code>~/dontstarvetogether_dedicated_server/mods/dedicated_server_mods_setup.lua</code><br>文件末尾添加 <code>ServerModSetup(&#39;mod编号&#39;)</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">--There are two functions that will install mods, ServerModSetup and ServerModCollectionSetup. Put the calls to the functions in this file and they will be executed on boot.</span><br><span class="line"></span><br><span class="line">--ServerModSetup takes a string of a specific mod&#x27;s Workshop id. It will download and install the mod to your mod directory on boot.</span><br><span class="line">--The Workshop id can be found at the end of the url to the mod&#x27;s Workshop page.</span><br><span class="line">--Example: http://steamcommunity.com/sharedfiles/filedetails/?id=350811795</span><br><span class="line">--ServerModSetup(&quot;350811795&quot;)</span><br><span class="line"></span><br><span class="line">--ServerModCollectionSetup takes a string of a specific mod&#x27;s Workshop id. It will download all the mods in the collection and install them to the mod directory on boot.</span><br><span class="line">--The Workshop id can be found at the end of the url to the collection&#x27;s Workshop page.</span><br><span class="line">--Example: http://steamcommunity.com/sharedfiles/filedetails/?id=379114180</span><br><span class="line">--ServerModCollectionSetup(&quot;379114180&quot;)</span><br><span class="line">ServerModSetup(&quot;1392778117&quot;)</span><br><span class="line">ServerModSetup(&quot;378160973&quot;)</span><br></pre></td></tr></table></figure><p>注释掉<code>run_dedicated_servers.sh </code>脚本中的这一行后，重新运行脚本启动服务</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># ./steamcmd.sh +force_install_dir &quot;$install_dir&quot; +login anonymous +app_update 343050 validate +quit</span><br><span class="line"></span><br></pre></td></tr></table></figure><h1 id="其他注意"><a href="#其他注意" class="headerlink" title="其他注意"></a>其他注意</h1><h2 id="报libcurl-gnutls-so-4找不到的错误"><a href="#报libcurl-gnutls-so-4找不到的错误" class="headerlink" title="报libcurl-gnutls.so.4找不到的错误"></a>报<code>libcurl-gnutls.so.4</code>找不到的错误</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./dontstarve_dedicated_server_nullrenderer: error while loading shared libraries: libcurl-gnutls.so.4: cannot open shared object file: No such file or directory]</span><br></pre></td></tr></table></figure><p>解决办法：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># 给steamcmd创建软连接</span><br><span class="line">ln -s /usr/lib64/libcurl.so.4 ~/steamcmd/linux32/libcurl-gnutls.so.4</span><br><span class="line">ln -s /usr/lib64/libcurl.so.4 ~/steamcmd/linux64/libcurl-gnutls.so.4</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># 注意查看 /usr/lib64 下是否存在 libcurl.so.4</span><br><span class="line"># 如果不存在，查看有没有 libcurl.so.4.XX，有的话创建一个软连接</span><br><span class="line">ln -s /usr/lib64/libcurl.so.4 /usr/lib64/libcurl.so.4.3.0</span><br></pre></td></tr></table></figure><p>如果还是不行，安装</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">yum install libcurl.i686</span><br><span class="line">cd /usr/lib</span><br><span class="line">ln -s libcurl.so.4 libcurl-gnutls.so.4</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="报ld-linux-so-2找不到的错误"><a href="#报ld-linux-so-2找不到的错误" class="headerlink" title="报ld-linux.so.2找不到的错误"></a>报<code>ld-linux.so.2</code>找不到的错误</h2><p>安装ld-linux.so.2：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install ld-linux.so.2</span><br></pre></td></tr></table></figure><h2 id="报错ERROR-ld-so-object-LIB-libonion-so-from-etc-ld-so-preload-cannot-be-preloaded-ignored"><a href="#报错ERROR-ld-so-object-LIB-libonion-so-from-etc-ld-so-preload-cannot-be-preloaded-ignored" class="headerlink" title="报错ERROR: ld.so: object &#39;/$LIB/libonion.so&#39; from /etc/ld.so.preload cannot be preloaded: ignored."></a>报错<code>ERROR: ld.so: object &#39;/$LIB/libonion.so&#39; from /etc/ld.so.preload cannot be preloaded: ignored.</code></h2><p>清空 &#x2F;etc&#x2F;ld.so.preload</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">echo &quot;&quot; &gt; /etc/ld.so.preload</span><br></pre></td></tr></table></figure><h1 id="2025-06更新"><a href="#2025-06更新" class="headerlink" title="2025-06更新"></a>2025-06更新</h1><p>新版服务器使用 <a href="https://github.com/DongyangHu/bbs-dontstarve-server">BBS 一键饥荒联机版专用服务器搭建脚本</a> 会更方便</p><h1 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h1><ul><li><a href="https://forums.kleientertainment.com/forums/topic/64441-dedicated-server-quick-setup-guide-linux/">Dedicated Server Quick Setup Guide - Linux</a></li><li><a href="https://forums.kleientertainment.com/forums/topic/64212-dedicated-server-quick-setup-guide-windows/">Dedicated Server Quick Setup Guide - Windows</a></li><li><a href="http://mahakala.lesc.uec.ac.jp/mahoodle/moodle/bug/lib_ld-linuxso2-bad-elf.php">ld-linux.so.2: bad ELF interpreter: No such file or directory</a></li><li><a href="http://blog.nice123.plus/2018/10/19/object-usr-local-lib-libdns-so-from-etc-ld-so-preload-cannot-be-preloaded-ignored/">libdns.so 错误解决</a></li><li><a href="https://www.cnblogs.com/lanhj/p/7620147.html">centos7.x86_64搭建饥荒服务器</a></li><li><a href="https://github.com/DongyangHu/bbs-dontstarve-server">BBS 一键饥荒联机版专用服务器搭建脚本</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> 游戏世界 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 游戏 </tag>
            
            <tag> 饥荒 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>NHK《简明日语》第01课 私（わたし）はアンナです。</title>
      <link href="/2021/07/03/NHK%E3%80%8A%E7%AE%80%E6%98%8E%E6%97%A5%E8%AF%AD%E3%80%8B%E7%AC%AC01%E8%AF%BE/"/>
      <url>/2021/07/03/NHK%E3%80%8A%E7%AE%80%E6%98%8E%E6%97%A5%E8%AF%AD%E3%80%8B%E7%AC%AC01%E8%AF%BE/</url>
      
        <content type="html"><![CDATA[<h1 id="NHK《简明日语》第01课"><a href="#NHK《简明日语》第01课" class="headerlink" title="NHK《简明日语》第01课"></a>NHK《简明日语》第01课</h1><p>《简明日语》是日本的公共广播电视机构、NHK环球广播网日本国际广播电台制作播出的日语讲座。通过广播剧形式的课程，学习基本语法和实用语句。课程音频和学习教材可以免费下载。</p><h2 id="课程简介"><a href="#课程简介" class="headerlink" title="课程简介"></a>课程简介</h2><p>短剧的主人公名叫安娜，是一名来自泰国的留学生，今年20岁。安娜非常喜欢日本的漫画，为了学习日语，正在东京的一所大学留学。在为期一年的留学生活中，安娜通过大学课堂、宿舍生活、购物和旅行等各种体验学习方便实用的日语。<br>安娜是泰国留学生。今天，她在大学里和负责照顾她学习和生活的辅助生小樱第一次见面。</p><p>原文：<a href="https://www.nhk.or.jp/lesson/chinese/learn/story/overview.html">https://www.nhk.or.jp/lesson/chinese/learn/story/overview.html</a><br>50音图：<a href="https://www.nhk.or.jp/lesson/zh/pdf/textbook_kana_all.pdf">https://www.nhk.or.jp/lesson/zh/pdf/textbook_kana_all.pdf</a>  </p><h2 id="教材详情"><a href="#教材详情" class="headerlink" title="教材详情"></a>教材详情</h2><h3 id="私（わたし）はアンナです。"><a href="#私（わたし）はアンナです。" class="headerlink" title="私（わたし）はアンナです。"></a>私（わたし）はアンナです。</h3><ul><li>アンナ: はじめまして。私はアンナです。 &#x2F;&#x2F; 初次见面。我是安娜。</li><li>さくら: はじめまして。さくらです。 &#x2F;&#x2F; 初次见面。我是小樱。</li><li>アンナ: よろしくお願いします。 &#x2F;&#x2F; 请多关照。</li><li>さくら: こちらこそ。 &#x2F;&#x2F; 我也要请你多关照。</li></ul><h3 id="语法要点"><a href="#语法要点" class="headerlink" title="语法要点"></a>语法要点</h3><p>A は B です。 &#x2F;&#x2F; A 是 B。</p><blockquote><p>「は」是表示主题的助词。<br>「です」接在B后面，构成谓语。<br>例如，「私はアンナです」（我是安娜）。  </p></blockquote><h3 id="单词"><a href="#单词" class="headerlink" title="单词"></a>单词</h3><table><thead><tr><th>はじめまして</th></tr></thead><tbody><tr><td><strong>初次见面</strong></td></tr><tr><td>这是对初次见面的人说的寒暄语。如果有人对你说「はじめまして」，你可以回答说「はじめまして」。</td></tr></tbody></table><table><thead><tr><th>私</th></tr></thead><tbody><tr><td><strong>我</strong></td></tr><tr><td>「よろしくお願いします」是自我介绍时经常说的一句话，意思是「希望我们今后保持良好关系」。除此以外，在有事拜托对方的时候，也会在最后附加上这句话。</td></tr></tbody></table><table><thead><tr><th>よろしくお願いします</th></tr></thead><tbody><tr><td><strong>请多关照</strong></td></tr></tbody></table><table><thead><tr><th>こちらこそ</th></tr></thead><tbody><tr><td><strong>我也···、是我该这么说</strong></td></tr></tbody></table><p>教材：<a href="https://www.nhk.or.jp/lesson/update/pdf/le1_zh_t.pdf">https://www.nhk.or.jp/lesson/update/pdf/le1_zh_t.pdf</a></p><h2 id="我的收获"><a href="#我的收获" class="headerlink" title="我的收获"></a>我的收获</h2><p>学习前要练习好平假名和片假名的发音和书写，这样学起来更顺畅。<br>和学英语类似，一些惯用语需要熟记。</p><table><thead><tr><th>あ</th><th>い</th><th>う</th><th>え</th><th>お</th></tr></thead><tbody><tr><td>あ</td><td>い</td><td>う</td><td>え</td><td>お</td></tr><tr><td>さ</td><td>し</td><td>す</td><td>せ</td><td>そ</td></tr><tr><td>た</td><td>ち</td><td>つ</td><td>て</td><td>と</td></tr><tr><td>な</td><td>に</td><td>ぬ</td><td>ね</td><td>の</td></tr><tr><td>は</td><td>ひ</td><td>ふ</td><td>へ</td><td>ほ</td></tr><tr><td>ま</td><td>み</td><td>む</td><td>め</td><td>も</td></tr><tr><td>や</td><td></td><td>ゆ</td><td></td><td>よ</td></tr><tr><td>ら</td><td>り</td><td>る</td><td>れ</td><td>ろ</td></tr><tr><td>わ</td><td></td><td></td><td></td><td>を</td></tr><tr><td>ん</td><td></td><td></td><td></td><td></td></tr></tbody></table><h2 id="课程地址"><a href="#课程地址" class="headerlink" title="课程地址"></a>课程地址</h2><p><a href="https://www.nhk.or.jp/lesson/chinese/learn/list/1.html">https://www.nhk.or.jp/lesson/chinese/learn/list/1.html</a></p>]]></content>
      
      
      <categories>
          
          <category> 日语之路 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 日语 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Windows10下切换日语输入法</title>
      <link href="/2021/07/02/Windows10%E4%B8%8B%E5%88%87%E6%8D%A2%E6%97%A5%E8%AF%AD%E8%BE%93%E5%85%A5%E6%B3%95/"/>
      <url>/2021/07/02/Windows10%E4%B8%8B%E5%88%87%E6%8D%A2%E6%97%A5%E8%AF%AD%E8%BE%93%E5%85%A5%E6%B3%95/</url>
      
        <content type="html"><![CDATA[<h1 id="Windows10下切换日语输入法"><a href="#Windows10下切换日语输入法" class="headerlink" title="Windows10下切换日语输入法"></a>Windows10下切换日语输入法</h1><p>Windows10下安装日语输入法，在【设置-&gt;时间和语言-&gt;语言-&gt;添加首选的语言】中，选择日本语进行安装即可。</p><h2 id="输入法切换"><a href="#输入法切换" class="headerlink" title="输入法切换"></a>输入法切换</h2><p>【alt】+【shift】 中文和日文输入法之间互相转换</p><p>【alt】+【&#96;】 日文输入法下，英文和日文输入状态之间互相转换</p><style>.video-container {    position: relative;    width: 100%;    padding-top: 56.25%; /* 16:9 aspect ratio (height/width = 9/16 * 100%) */}.video-container iframe {    position: absolute;    top: 0;    left: 0;    width: 100%;    height: 100%;}</style>]]></content>
      
      
      
        <tags>
            
            <tag> 日语 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Ubuntu下连接并使用Airpods</title>
      <link href="/2021/07/01/Ubuntu%E4%B8%8B%E8%BF%9E%E6%8E%A5%E5%B9%B6%E4%BD%BF%E7%94%A8Airpods/"/>
      <url>/2021/07/01/Ubuntu%E4%B8%8B%E8%BF%9E%E6%8E%A5%E5%B9%B6%E4%BD%BF%E7%94%A8Airpods/</url>
      
        <content type="html"><![CDATA[<h1 id="Ubuntu-下连接并使用-Airpods"><a href="#Ubuntu-下连接并使用-Airpods" class="headerlink" title="Ubuntu 下连接并使用 Airpods"></a>Ubuntu 下连接并使用 Airpods</h1><p>在 Ubuntu 20.04 上连接 Airpods 终于成功了，记录一下过程吧。</p><blockquote><p>Ubuntu系统版本：Ubuntu 20.04.1<br>AirPods型号： Airpods1（第二代）</p></blockquote><ul><li>编辑 <code>/etc/bluetooth/main.conf</code> 文件，设定<code>ControllerMode = bredr</code></li><li>重启蓝牙 <code>sudo /etc/init.d/bluetooth restart</code></li><li>AirPods 长按充电盒上的按钮，进入蓝牙配对模式。</li><li>在 Ubuntu 设置中找到蓝牙，搜索 Airpods 配对。</li></ul><p>如果连接上了，但是没有声音。就按如下的操作。  </p><ul><li>在 Ubuntu 设置中找到声音，设定声音输出设备为 AirPods。</li></ul><p>如果还是不行，就把当前用户注销，再重新登录登进来。</p><p>连接成功之后可以再把那个设置加上<code>#</code>注释掉。</p><p>耳机和蓝牙鼠标都可以正常使用了。</p><h1 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h1><ul><li><a href="https://jixiaobai.club/airpods-connection-guide/">Airpods耳机连接Mac、Windows 10、iPhone、安卓、Linux-完全指南</a></li></ul><style>.video-container {    position: relative;    width: 100%;    padding-top: 56.25%; /* 16:9 aspect ratio (height/width = 9/16 * 100%) */}.video-container iframe {    position: absolute;    top: 0;    left: 0;    width: 100%;    height: 100%;}</style>]]></content>
      
      
      <categories>
          
          <category> 技术坑记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>centos下安装node环境</title>
      <link href="/2021/06/30/centos%E4%B8%8B%E5%AE%89%E8%A3%85node%E7%8E%AF%E5%A2%83/"/>
      <url>/2021/06/30/centos%E4%B8%8B%E5%AE%89%E8%A3%85node%E7%8E%AF%E5%A2%83/</url>
      
        <content type="html"><![CDATA[<h1 id="离线安装node环境"><a href="#离线安装node环境" class="headerlink" title="离线安装node环境"></a>离线安装node环境</h1><p>在下面链接中找到需要的版本下载</p><blockquote><p><a href="https://nodejs.org/dist/">https://nodejs.org/dist/</a></p></blockquote><p>比如安装12.17.0版本：</p><p>这里是root用户的主目录（<code>/root</code>）下进行操作的，</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">下载指定版本</span></span><br><span class="line">wget https://nodejs.org/dist/v12.17.0/node-v12.17.0-linux-x64.tar.xz</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">解压</span></span><br><span class="line">tar xf  node-v12.17.0-linux-x64.tar.xz</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">进入解压目录</span></span><br><span class="line">cd node-v12.17.0-linux-x64/</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">执行node命令 查看版本</span></span><br><span class="line">./bin/node -v</span><br><span class="line"></span><br><span class="line">v12.17.0</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">建立软连接 <span class="built_in">ln</span> -s 源文件路径 软连接路径</span></span><br><span class="line">ln -s /root/node-v12.17.0-linux-x64/bin/node   /usr/local/bin/</span><br><span class="line">ln -s /root/node-v12.17.0-linux-x64/bin/npm   /usr/local/bin/</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">如果安装的cnpm或者其他（比如vue），需要再次建立软连接</span></span><br><span class="line">ln -s /root/node-v12.17.0-linux-x64/bin/cnpm   /usr/local/bin/</span><br></pre></td></tr></table></figure><p>安装到这里就完成了，如果要更新版本只需要下载最新的node安装包解压到原来的目录即可。</p><hr><h1 id="npm-在线安装-yarn、vue-cli"><a href="#npm-在线安装-yarn、vue-cli" class="headerlink" title="npm 在线安装 yarn、vue-cli"></a>npm 在线安装 yarn、vue-cli</h1><p>安装yarn、vue-cli，将nodejs的bin目录下的yarn、vue在<code>/usr/local/bin</code>下建立软连接</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm install yarn -g</span><br><span class="line">sudo ln -s /home/xtong/tools/node-v14.15.4-linux-x64/bin/yarn /usr/local/bin/</span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm install -g @vue/cli</span><br><span class="line">sudo ln -s /home/xtong/tools/node-v14.15.4-linux-x64/bin/vue /usr/local/bin/</span><br></pre></td></tr></table></figure><h1 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h1><ul><li><a href="https://nodejs.org/zh-cn">nodejs官网</a></li><li><a href="http://nodejs.cn/download/">nodejs中文网</a></li></ul><style>.video-container {    position: relative;    width: 100%;    padding-top: 56.25%; /* 16:9 aspect ratio (height/width = 9/16 * 100%) */}.video-container iframe {    position: absolute;    top: 0;    left: 0;    width: 100%;    height: 100%;}</style>]]></content>
      
      
      <categories>
          
          <category> 技术坑记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> nodejs </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>git常用命令速查</title>
      <link href="/2021/06/25/git%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4%E9%80%9F%E6%9F%A5/"/>
      <url>/2021/06/25/git%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4%E9%80%9F%E6%9F%A5/</url>
      
        <content type="html"><![CDATA[<p><img src="/images/bg-git.jpg" alt="git"></p><h2 id="git基础"><a href="#git基础" class="headerlink" title="git基础"></a>git基础</h2><p><a href="http://www.ruanyifeng.com/blog/2014/06/git_remote.html">Git远程操作详解</a></p><h2 id="git设置用户名和邮箱"><a href="#git设置用户名和邮箱" class="headerlink" title="git设置用户名和邮箱"></a>git设置用户名和邮箱</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">设置用户名和邮箱</span></span><br><span class="line">git config --global user.name &quot;username&quot;</span><br><span class="line">git config --global user.email &quot;useremail&quot;</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">查看用户名和邮箱</span></span><br><span class="line">git config user.name</span><br><span class="line">git config user.email</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">查看其它配置</span></span><br><span class="line">git config --list</span><br></pre></td></tr></table></figure><p>参考：<a href="https://blog.csdn.net/xingbaozhen1210/article/details/80342212">git配置用户名和邮箱</a></p><h2 id="git设置代理"><a href="#git设置代理" class="headerlink" title="git设置代理"></a>git设置代理</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">设置当前代理</span></span><br><span class="line">git config http.proxy http://127.0.0.1:7890</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">设置全局代理（我在用的）</span></span><br><span class="line">git config --global http.proxy http://127.0.0.1:7890</span><br><span class="line">git config --global https.proxy http://127.0.0.1:7890</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">取消当前代理</span></span><br><span class="line">git config --unset http.proxy</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">取消全局代理</span></span><br><span class="line">git config --global --unset http.proxy</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">设置socks5代理</span></span><br><span class="line">git config http.proxy socks5://127.0.0.1:10809</span><br><span class="line">————————————————</span><br><span class="line">版权声明：本文为CSDN博主「用户昵称不能为空」的原创文章，遵循CC 4.0 BY-SA版权协议，转载请附上原文出处链接及本声明。</span><br><span class="line">原文链接：https://blog.csdn.net/default7/article/details/100068256</span><br></pre></td></tr></table></figure><h2 id="git获取版本差异打包"><a href="#git获取版本差异打包" class="headerlink" title="git获取版本差异打包"></a>git获取版本差异打包</h2><ul><li>某个版本与当前版本的差异  <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">完整的commit <span class="built_in">id</span></span></span><br><span class="line">git diff e3d368f457358a4a39f31f033d6a6f3729df541c --name-only | xargs zip update.zip</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">或者 简略的commit <span class="built_in">id</span></span></span><br><span class="line">git diff e177fd68 --name-only | xargs zip update.zip</span><br></pre></td></tr></table></figure></li><li>两个版本之间的差异打包  <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">git archive -o ./update.zip 新 $(git diff --name-only 旧 新)</span></span><br><span class="line">git archive -o ./update.zip 5ec3905f6a64ad90ea53803b1ec05a72476e2e1c $(git diff --name-only cb59ee6a13812761067a28ea25a8188f467d47e0 5ec3905f6a64ad90ea53803b1ec05a72476e2e1c )</span><br></pre></td></tr></table></figure></li></ul><h2 id="git统计"><a href="#git统计" class="headerlink" title="git统计"></a>git统计</h2><ul><li>git统计代码行数<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">查看 xtong 在 2010-07-16 到 2019-07-14 之间的代码行数</span></span><br><span class="line">git log --since=&quot;2010-07-16&quot; --before=&quot;2019-07-14&quot; --author=&quot;xtong&quot; --pretty=tformat: --numstat | gawk &#x27;&#123; add += $1 ; subs += $2 ; loc += $1 - $2 &#125; END &#123; printf &quot;added lines: %s removed lines : %s total lines: %s\n&quot;,add,subs,loc &#125;&#x27;</span><br></pre></td></tr></table></figure></li><li>查看所有人代码行数<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git log --pretty=&#x27;%aN&#x27; | sort -u | while read name; do echo -en &quot;$name\t&quot;; git log --author=&quot;$name&quot; --pretty=tformat: --numstat | awk &#x27;&#123; add += $1; subs += $2; loc += $1 - $2 &#125; END &#123; printf &quot;added lines: %s, removed lines: %s, total lines: %s \n&quot;, add, subs, loc &#125;&#x27; -; done</span><br></pre></td></tr></table></figure></li><li>查看提交排名前5<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git log --pretty=&#x27;%aN&#x27; | sort | uniq -c | sort -k1 -n -r | head -n 5</span><br></pre></td></tr></table></figure></li><li>查看开发者人数<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git log --pretty=&#x27;%aN&#x27; | sort -u | wc -l</span><br></pre></td></tr></table></figure></li><li>查看总提交次数<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git log --oneline | wc -l</span><br></pre></td></tr></table></figure></li></ul><h2 id="git配置文件"><a href="#git配置文件" class="headerlink" title="git配置文件"></a>git配置文件</h2><p>本地项目配置文件，在项目目录下 <code>.git/config</code> 文件<br>全局，用户目录下 <code>.gitconfig</code> 文件</p><ul><li>本地保存密码，在config中<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[credential]</span><br><span class="line">        helper = store</span><br></pre></td></tr></table></figure></li><li>全局设置vim为默认编辑器<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git config –global core.editor vim</span><br></pre></td></tr></table></figure><blockquote><p>Linux下编辑~&#x2F;.gitconfig文件 在core中添加editor &#x3D; vim</p></blockquote></li></ul><h2 id="常用基础命令"><a href="#常用基础命令" class="headerlink" title="常用基础命令"></a>常用基础命令</h2><ul><li>获取主机[origin]上的所有分支  <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git fetch origin</span><br></pre></td></tr></table></figure></li><li>版本更新打tag<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">创建补丁版本，进行修改</span></span><br><span class="line">git fetch origin --tag</span><br><span class="line">git checkout -b hotfix/&lt;版本号&gt; &lt;版本号&gt;</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">修改完成发布</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">1. 合并到master</span></span><br><span class="line">git fetch origin master:master</span><br><span class="line">git checkout master</span><br><span class="line">git merge hotfix/&lt;版本号&gt;</span><br><span class="line">git tag -a &lt;发布版本号&gt; -m &quot;发布功能描述&quot;</span><br><span class="line">git push origin --tag</span><br><span class="line">git push origin master:master</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">清理 hotfix</span></span><br><span class="line">git push origin :hotfix/&lt;版本号&gt;</span><br><span class="line">git branch -D hotfix/&lt;版本号&gt;</span><br></pre></td></tr></table></figure></li><li>还原删除的分支或commit<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">git <span class="built_in">log</span> --since=<span class="string">&quot;2 weeks ago&quot;</span> -- myfile 可以2个星期期间的myfile历史；</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">git <span class="built_in">log</span> --branches=<span class="string">&quot;develop&quot;</span> 可以查看develop的commit</span></span><br><span class="line">git branch recover_branch commit_id</span><br></pre></td></tr></table></figure></li><li>版本回退<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git revert e3d368f457358a4a39f31f033d6a6f3729df541c</span><br></pre></td></tr></table></figure></li><li>创建一个git库推送到远端  <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">可参照github</span></span><br><span class="line">git init</span><br><span class="line">git add .</span><br><span class="line">git commit -am &#x27;创建项目&#x27;</span><br><span class="line"></span><br><span class="line">echo &quot;# integral&quot; &gt;&gt; README.md</span><br><span class="line">git init</span><br><span class="line">git add README.md</span><br><span class="line">git commit -m &quot;first commit&quot;</span><br><span class="line">git remote add origin git@github.com:tongg112/integral.git</span><br><span class="line">git push -u origin master</span><br></pre></td></tr></table></figure></li><li>git提交全局保存密码  <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">建议设置ssh key来替代输入密码的方式</span></span><br><span class="line">git config --global credential.helper store</span><br></pre></td></tr></table></figure></li><li>git生成rsa<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh-keygen -t rsa -C &quot;email&quot;</span><br></pre></td></tr></table></figure></li></ul><style>.video-container {    position: relative;    width: 100%;    padding-top: 56.25%; /* 16:9 aspect ratio (height/width = 9/16 * 100%) */}.video-container iframe {    position: absolute;    top: 0;    left: 0;    width: 100%;    height: 100%;}</style>]]></content>
      
      
      <categories>
          
          <category> 技术坑记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> git </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
